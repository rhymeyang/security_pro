---
lang: zh-CN
title: Section 11.2 Monitoring and Reconnaissance
description: some description
---

As you study this section, answer the following questions:

<ul>
    <li>
     What is the goal of network monitoring?
    </li>
    <li>
     What is the difference between passive and active reconnaissance?
    </li>
    <li>
     What tool is a search engine for internet-connected devices?
    </li>
</ul>

In this section, you will learn to:

<ul>
    <li>
     Perform port and ping scans.
    </li>
    <li>
     Perform reconnaissance with Nmap.
    </li>
    <li>
     Perform reconnaissance with the Harvester.
    </li>
</ul>

The key terms for this section include:

<table class="terms">
    <thead>
    <tr>
        <th class_="firstTableHeader" scope="col" class="fw-bold">Term</th>
        <th scope="col" class="fw-bold">Definition</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>IP scanners</td>
        <td>
        Special tools that allow a network administrator to scan the entire
        network to find all connected devices and their IP addresses.
        </td>
    </tr>
    <tr>
        <td>Reconnaissance</td>
        <td>
        Also known as
        <i class="fs-italicize"> footprinting </i>
        . This is the process of gathering information about a target before
        beginning any penetration test or security audit.
        </td>
    </tr>
    <tr>
        <td>Active reconnaissance</td>
        <td>
        The process of gathering information by interacting with the target
        in some manner.
        </td>
    </tr>
    <tr>
        <td>Passive reconnaissance</td>
        <td>
        The process of gathering information about a target with no direct
        interaction with the target.
        </td>
    </tr>
    <tr>
        <td>Packet sniffing</td>
        <td>
        The act of capturing data packets transmitted across the network and
        analyzing them for important information.
        </td>
    </tr>
    <tr>
        <td>War driving</td>
        <td>
        The act of driving around with a wireless device looking for open
        vulnerable wireless networks.
        </td>
    </tr>
    <tr>
        <td>War flying</td>
        <td>
        The act of using drones or unmanned aerial vehicles to find open
        wireless networks.
        </td>
    </tr>
    <tr>
        <td>Eavesdropping</td>
        <td>
        The act of covertly listening in on a communication between other
        people.
        </td>
    </tr>
    <tr>
        <td>Open-Source Intelligence (OSINT)</td>
        <td>
        Any data that is collected from publicly available sources such as
        social media, search engines, company websites, media sources, or
        public government sources.
        </td>
    </tr>
    </tbody>
</table>

This section helps you prepare for the following certification exam objectives:

<table class="objectives">
    <thead>
    <tr>
        <th class_="firstTableHeader" scope="col" class="fw-bold">Exam</th>
        <th scope="col" class="fw-bold">Objective</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>TestOut Security Pro</td>
        <td>
        5.0 Audit and Security Assessment
        <p>5.1 Implement Logging and Auditing</p>
        <p>5.2 Assessment Techniques</p>
        </td>
    </tr>
    <tr>
        <td>CompTIA Security+ SY0-601</td>
        <td>
        1.1 Compare and contrast different types of social engineering
        techniques.
        <ul>
            <li>Reconnaissance</li>
        </ul>
        <p>1.8 Explain the techniques used in penetration testing.</p>
        <ul>
            <li>
            Passive and active reconnaissance
            <ul>
                <li>War driving</li>
                <li>OSINT</li>
            </ul>
            </li>
        </ul>
        <p>
            4.1 Given a scenario, use the appropriate tool to assess
            organizational security
        </p>
        <ul>
            <li>
            Network reconnaissance and discovery
            <ul>
                <li>nslookup/dig</li>
                <li>nmap</li>
                <li>ping/pathping</li>
                <li>the harvester</li>
            </ul>
            </li>
        </ul>
        </td>
    </tr>
    </tbody>
</table>

## 11.2.1 Network Monitoring

### Network Monitoring 00:00-00:24

Keeping an eye on the type of traffic that flows across your network helps you to better understand what's going on in your system. If you know your network and constantly monitor it, you can catch attackers before they do any significant damage. In this lesson, we'll look at some common network monitoring tools and how they can be used.

### Ping 00:24-00:57

One of the more common network tests is a connection test. The command line utility named ping is the easiest way to do this. The ping utility sends an ICMP packet from our computer to another device on our network and waits for a response. If we get a response, the device is connected and active. If there's no response, it means the device could be offline or something is blocking the reply packets, and we need to figure out why. Ping is used in pretty much all operating systems.

### Tracert/Traceroute 00:57-01:29

Traceroute is a tool that allows us to see the path that a packet takes. Every device the packet travels through to its destination is known as a hop. The traceroute utility helps us determine if there's a specific device in our network that's down and causing problems for us. Traceroute is the command used in Linux and tracert is the command for Windows. The Linux version defaults to sending UDP packets and Windows uses ICMP packets. Other than that, these tools do exactly the same thing.

### Pathping 01:29-01:55

Pathping is a Windows command line tool that essentially combines the ping and tracert tools. The pathping utility sends ICMP packets to check connectivity, but it also gives us information such as latency and packet loss about each and every hop a packet takes. We can also use pathping to see if certain router connections are dropping packets before they reach their desired destination.

### Netstat 01:55-02:18

The netstat command shows us all sorts of network statistics. When we run this command, we receive a snapshot of our TCP connections, which ports they're connected to, the programs that are using those connections, and other statistics. We can use this information to monitor our traffic and make sure that our computer isn't connected to places it shouldn't be.

### Route 02:18-02:36

The route command is used in both Linux and Windows to show us our routing table and to allow us to make manual changes to it. Routers use the routing table to determine where to send packets. If there's an issue with the routing table, the route command can help us find it and make the necessary changes.

### ARP 02:36-03:03

The arp command is another command used in basically all operating systems. ARP stands for Address Resolution Protocol, and its purpose is to match IP addresses to MAC addresses. The arp command allows us to view and modify the ARP table entries on our local computer. We can use this information to discover and correct any duplicate IP addresses or invalid entries that might cause connection issues.

### Nslookup/Dig 03:03-03:40

One of the biggest reasons for connectivity issues is an improperly configured Domain Name System, or DNS. DNS is what's responsible for matching IP addresses to website or computer names. If we're running a web server, we absolutely need to make sure that our DNS entries are correct or no one will be able to connect. Even in an internal network, an improperly configured DNS can cause devices to be unable to connect to the server. We use the nslookup command in Windows or the dig command in Linux to view and modify our DNS settings.

### Ipconfig/Ifconfig 03:40-04:09

Another big reason for connectivity issues is the IP configuration on the local computer. To view current information about our local system, we use the ipconfig command in Windows and the ifconfig command in Linux. These commands show us the current IP address, subnet mask, default gateway, and more. We can use this information to correct DHCP issues or static IP configurations.

### Hping 04:09-04:32

Hping is a security tool that can be used to send ICMP packets as well as TCP, UDP, and RAW IP packets. Aside from simply checking connectivity, hping is used to analyze the target system to gather more information on it. The hping command is primarily designed for Linux but can be installed on Windows as well.

### Netcat 04:32-04:50

Netcat is an extremely powerful security tool that can basically do anything with TCP. Netcat is able to open up a TCP connection between two devices and send UDP packets between them, scan for open ports, and even listen in on connections between individual ports.

### IP Scanners 04:50-05:08

IP scanners are tools that allow us to scan our entire network in order to find all connected devices and their IP addresses. Depending on the program, these tools pull up basic-to-advanced information such as routes, hostnames, operating systems, and more.

### Nmap 05:08-05:37

Nmap is another powerful network monitoring tool. Nmap is a command line utility, but there is a GUI-based version called Zenmap. We can use nmap to scan an entire network or a specific IP address to discover all sorts of information like open ports, running services, operating system information, and beyond. One thing that makes nmap so powerful is that it can scan with different protocols on individual networks.

### Summary 05:37-05:56

That'll wrap up this lesson. In this video, we covered a variety of tools and commands we can use to monitor and manage our network. It's important that we know each of these tools and how they're used so that we can pick the best tool for our situation.

## 11.2.2 Network Monitoring Facts

The goal of monitoring is to keep track of conditions on the network, identify situations that might signal potential problems, pinpoint the source of problems, and locate areas of your network that might need to be upgraded or modified.

As you monitor your network, look for the top talkers and listeners.

- Top talkers are computers that send the most data, either from your network or into your network.
- Top listeners are hosts that are receiving most of the data by streaming or downloading large amounts of data from the internet.

It is important to know which computers are the big receivers and senders of information because it is a good way to tell if something is wrong on your network. An unauthorized system that is sending large amounts of data to locations outside of your network could be a sign of a data breach.

The below table lists some of the tools used to monitor the health of a network:

<table>
    <thead>
    <tr>
        <th class_="firstTableHeader" scope="col" class="fw-bold">Tool</th>
        <th scope="col" class="fw-bold">Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>ping</td>
        <td>
        Ping is a command line tool that is used to perform a connection
        test between two network devices. Ping works by sending ICMP packets
        to a specified device on the network and waiting for a response.
        This shows if there is a connection issue or not. The syntax for the
        ping command is:
        <blockquote>
            <b class="fw-bold">
            ping &lt;target IP address or hostname&gt;
            </b>
        </blockquote>
        The following switches are the more common switches that can be used
        to modify the ping command:
        <ul>
            <li>
            <b class="fw-bold"> -t </b>
            sends ICMP packets until manually stopped.
            </li>
            <li>
            <b class="fw-bold"> -a </b>
            resolves addresses to hostnames.
            </li>
            <li>
            <b class="fw-bold">
                -n
                <i class="fs-italicize"> &lt;count&gt; </i>
            </b>
            specifies the number of ICMP packets to send. Ping sends 4
            packets by default
            </li>
            <li>
            <b class="fw-bold"> -l </b>
            <i class="fs-italicize">
                <b class="fw-bold"> &lt;size&gt; </b>
            </i>
            specifies the packet size in bytes. ping sends 32-byte packets
            by default
            </li>
        </ul>
        </td>
    </tr>
    <tr>
        <td>tracert/traceroute</td>
        <td>
        The tracert tool shows the path a packet takes to reach its
        destination. Every device the packet passes through is known as a
        hop. Use tracert to locate network devices that are down or causing
        latency issues.
        <ul>
            <li>tracert is the Windows version and sends ICMP packets.</li>
            <li>traceroute is used in Linux and sends UDP packets.</li>
        </ul>
        </td>
    </tr>
    <tr>
        <td>pathping</td>
        <td>
        The pathping Windows command line tool combines the tracert and ping
        tools. Use pathping to locate network devices that are down or
        causing latency issues.
        </td>
    </tr>
    <tr>
        <td>netstat</td>
        <td>
        Use the netstat command to display a variety of network statistics
        in both Windows and Linux, including:
        <ul>
            <li>Connections for different protocols</li>
            <li>Open ports</li>
            <li>Running programs</li>
        </ul>
        Some of the common switches used to specify the information shown in
        Windows are:
        <ul>
            <li>
            <b class="fw-bold"> -a </b>
            displays all connections and listening ports.
            </li>
            <li>
            <b class="fw-bold"> -b </b>
            displays the executable involved in creating each connection or
            listening port.
            </li>
            <li>
            <b class="fw-bold"> -f </b>
            displays the FQDN for the foreign address if possible.
            </li>
            <li>
            <b class="fw-bold"> -r </b>
            displays the routing table
            </li>
            <li>
            <b class="fw-bold">
                -p
                <i class="fs-italicize"> &lt;protocol&gt; </i>
            </b>
            shows the connections for a specified protocol (TCP, UDP, TCPv6,
            UDPv6)
            </li>
        </ul>
        </td>
    </tr>
    <tr>
        <td>route</td>
        <td>
        The route command is used in both Windows and Linux to show the
        routing table and to make manual changes to the table.
        </td>
    </tr>
    <tr>
        <td>arp</td>
        <td>
        The arp command is used in both Windows and Linux. ARP stands for
        Address Resolution Protocol and is used to match IP addresses to MAC
        addresses. The arp command displays, adds, and removes arp
        information from network devices. Some of the common switches used
        with the arp command are:
        <ul>
            <li>
            <b class="fw-bold"> -a </b>
            displays current ARP entries.
            </li>
            <li>
            <b class="fw-bold"> inet_addr </b>
            specifies an internet address
            </li>
            <li>
            <b class="fw-bold"> -d </b>
            deletes the host specified by inet_addr
            </li>
        </ul>
        </td>
    </tr>
    <tr>
        <td>nslookup/dig</td>
        <td>
        The nslookup and dig commands are used to view and modify DNS
        settings. These tools can be used to look up DNS server information
        and also give IP addresses and domain names for a network server.
        <ul>
            <li>nslookup is used in Windows.</li>
            <li>dig is used in Linux.</li>
        </ul>
        </td>
    </tr>
    <tr>
        <td>ipconfig/ifconfig</td>
        <td>
        The ipconfig command (Windows) and the ifconfig command (Linux) are
        used to display the IP configuration on the local computer.
        Information such as the following can be shown using these commands:
        <ul>
            <li>Adapter name</li>
            <li>Adapter MAC address</li>
            <li>If DHCP is enabled or not</li>
            <li>IPv6 address</li>
            <li>IPv4 address</li>
            <li>Subnet mask</li>
            <li>IP lease information</li>
            <li>Default gateway</li>
            <li>DHCP server</li>
            <li>DNS server</li>
        </ul>
        </td>
    </tr>
    <tr>
        <td>hping</td>
        <td>
        Hping is a security tool that can check connectivity and also
        analyze the target to gather information. Hping can send ICMP, TCP.
        UDP, and RAW-IP packets. Hping is primarily designed for Linux but
        can be installed in Windows.
        </td>
    </tr>
    <tr>
        <td>netcat</td>
        <td>
        The netcat security tool can read and write data across both TCP and
        UDP network connections. It opens a TCP connection between two
        devices and can be used to send packets, scan for open ports, and
        listen in on connections to specific ports. You can download netcat
        from the internet.
        </td>
    </tr>
    <tr>
        <td>IP scanners</td>
        <td>
        IP scanners are special tools that allow a network administrator to
        scan the entire network to find all connected devices and their IP
        addresses. Advanced scans can also display information such as:
        <ul>
            <li>Routes</li>
            <li>Hostnames</li>
            <li>Operating systems</li>
        </ul>
        </td>
    </tr>
    <tr>
        <td>nmap</td>
        <td>
        The nmap utility is a network security scanner. Use nmap to scan an
        entire network or specific IP addresses to discover all sorts of
        information such as:
        <ul>
            <li>Open ports</li>
            <li>Running services</li>
            <li>Operating system</li>
        </ul>
        Nmap can use many different protocols and options depending on the
        network or device being scanned.
        <br />
        <br />
        Nmap is a command line tool, but a GUI version called Zenmap is
        available.
        </td>
    </tr>
    </tbody>
</table>

## 11.2.3 Performing Port and Ping Scans

### Performing Port and Ping Scans 00:00-00:24

In this demo, we're going to look at Zenmap. Zenmap is the GUI equivalent of Nmap, which is a command line tool. We've downloaded and installed Zenmap for Windows. Even though Zenmap has a graphical user interface, we still use the familiar commands that Nmap uses. Other than that, the interface is quite simple.

### Identify the Target of Your Scan 00:24-00:50

First, you want to identify the target of your scan. In this case, it might be 192.168.2.1, a specific IP address, or maybe a range of IP addresses using CIDR notation. It's going to make sure that these first three octets stay the same, 192.168.2, then we'll try .1 and so on all the way up to .255 for the last octet.

### Types of Scan 00:50-01:58

To the right here, you can see what type of scan you want to perform. Right now, it's listed as an intense scan. To start out, I'm going do a lighter scan. You can see you have Intense Scan, plus UDP, plus all the TCP ports, without the ping, etc. You have the ping, the quick scan, the quick scan plus, and on and on. There's lots of different options here.

I'm going to start out with just a ping scan, which will simply see if the hosts in this IP address range respond to a ping. To do this, I'll simply select that option and then click on Scan. This will only take a few seconds to complete, as it's a very lightweight scan. You'll see here, as it goes on, that we'll start to populate the operating systems and the hosts associated with those IP addresses to the left.

In this case, we haven't done a deep scan. We don't know the operating systems on these hosts or other details yet. But we can see all the hosts that are in that range that responded to the ping scan. Maybe we come down and say, "Hey, this IP address is something of interest." Then we can go and do an intense scan with that specific host.

### Intense Scan 01:58-02:38

Before I do that, let me show you here that there's not really a lot we know about this host right now. We know its MAC address, its IP address, and whether it's currently up, but we don't know anything else.

You could do this intense scan with a full range of IP addresses. It'll just take a while. In the interest of time, I'll just do an intense scan on that single IP address.

This takes about four or five minutes to complete depending on the responsiveness of the server, so I'll stop the demo while it runs. But you can see that it's starting to discover open ports, different TCP ports, and it'll run through a variety of different scripts to try to discover information about this host.

### Results 02:38-04:33

When all is said and done, we should be able to see what type of operating system it is, even the version of the operating system, and other things that it uses as it discovers open ports. It can query those ports and ask certain questions in order to receive responses and determine the types of services that are running on this machine. We'll go ahead and pause now until that script is complete.

You can see that it's completed the scan. Let's look through some of these results first. We'll start at the top. It scanned for specific ports, and it started a service scan and gathered some information. It was looking for 20 specific services. It took about a minute to do that. Then it tried to detect the operating system and a variety of other services. It looks at the specific ports and tries to determine which programs are actually running. This server has DNS server. It's actually Microsoft's DNS server. Because of the types of queries that Nmap puts out, you can see the types of services that are actually running. We know that it's Microsoft DNS. We know Microsoft IIS, the web server, is running there, and we know the version of that web server and a variety of other services that are currently running.

Some remote procedure calls on certain ports that are open, and a variety of other information like the net BIOS names and the server versions. We can get quite a bit of detail using Nmap and the associated GUI. Let's click on 15. You can see that we have a summary of information for that. It's Windows, and it has the last boot time. It was back on May 9th. That's several months ago. Then we have the versions and other information. This is a great tool that you can use to quickly gather information about a network. It's easy to see why these tools make it so easy to attack and hack, or at least understand the composition of the machines within a network.

### Summary 04:33-04:47

All right, that's it for this demo--just a quick demo of Nmap and the associated Zenmap GUI and how you can do ping scans and port scans using this tool.

## 11.2.4 Reconnaissance

### Reconnaissance 00:00-00:29

Reconnaissance, which is also known as Footprinting, is the process of gathering information about a target before you begin an attack. There are two types of reconnaissance, passive and active. Passive reconnaissance is gathering information without directly interacting with users, and active reconnaissance is gathering information through direct interaction with users. In this lesson, we'll look at the tools associated with both types.

### Passive Reconnaissance 00:29-00:47

Before interacting with a target, a hacker should perform passive reconnaissance to gather as much information as possible without alerting the anyone. Gathering information through packet sniffing, eavesdropping, and Open-source intelligence, or OSINT, are the more common passive methods.

### Packet sniffing 00:47-01:16

Packet sniffing is capturing data packets and analyzing them for useful information. If you're in a public place, you can gather these data packets and use a tool like Wireshark to see if you can find anything useful. Because you're not sending any data, you're essentially a bystander, so this is a passive reconnaissance method.

You need to scan for open wireless networks before you can start sniffing packets. Two common scanning methods are war driving and war flying.

### War Driving and War Flying 01:16-01:29

War driving is driving or walking around with a wireless device to look for open vulnerable wireless networks. War flying is the doing the same thing using a drone or another unmanned aerial vehicle.

### Eavesdropping 01:29-01:54

Eavesdropping is another way you can passively gather information. It can include listening to employee conversations, shoulder surfing, and dumpster diving. People often throw out documents with sensitive information and don't realize it. Holding your nose and sifting through dirty garbage doesn't require any special skills or tools. It's a really easy way for any hacker to get get really valuable information.

### Open-source intelligence (OSINT) 01:54-02:20

Open-source intelligence, or OSINT, is any data collected from publicly available sources. This includes doing web searches on search engines like Google, social media sites such as LinkedIn, and other sources to gather personal identifiable information, or PII.

After a hacker has gained as much information as possible using passive reconnaissance, they'll move on to active reconnaissance.

### Active Reconnaissance 02:20-03:20

Active reconnaissance is the process of gathering information by interacting with the target. Because you are directly interacting with the target, you can be discovered.

During this phase, hackers gather additional information that they couldn't get with passive reconnaissance. This includes network information such as IP addresses, sub-domains, and DNS information. They'll also gather system information such as operating systems, users and passwords, locations of servers, and organizational information that wasn't gathered during passive reconnaissance.

Doing all of this reconnaissance provides a wealth of knowledge on the target. The goal is to understand the target's security, narrow focus for potential attacks, identify vulnerabilities, and create a network map.

Sometimes the line between passive and active reconnaissance can get blurry. Just always remember that and any amount of direct interaction means you're using an active method.

### Reconnaissance Tools 03:20-03:27

There's a wealth of tools and resources hackers and penetration tester can use to gather all of this information.

### OSINT Framework 03:27-03:46

One of the first tools a security professional should use in reconnaissance is the OSINT framework. This framework is a collection of resources and tools that are separated by common categories to easily gather all sorts of online information, making the initial reconnaissance process much easier.

### theHarvester 03:46-04:04

theHarvester is a great passive reconnaissance tool that can gather lots of information from public sources, such as search engines, social media sites, and Shodan. There are some options in the program to brute force DNS information, which is active reconnaissance.

### Shodan 04:04-04:19

Shodan is a very popular search engine for internet-connected devices. Users can search for specific types of devices and locations. You can use this information to see if a target has any online devices without proper security and gather more information about them.

### dnsenum 04:19-04:39

Dnsenum is a program that finds all DNS servers and entries for an organization. This helps you find information such as usernames, computer names, IP addresses, and more. Depending on the settings used, dnsenum can be either passive or active.

### Curl and wget 04:39-04:57

Curl and wget are two programs that let you download and upload files. You can use them in the active reconnaissance phase to download an entire website and view its code and resources offline. Because you're actively interacting with the target, these are active reconnaissance tools.

### Scanless 04:57-05:15

Scanless is a really cool tool for port scanning. It uses exploitation websites to perform port scans on your behalf. This means that you can scan your target anonymously. Even though you're not directly interacting with the target, this's still considered active reconnaissance.

### Sn1per 05:15-05:31

Sn1per is a scanning tool that combines many tools into one program. You can use Sn1per to find all sorts of information, such as DNS, open ports, services, and vulnerabilities. This is definitely an active reconnaissance program.

### Nessus 05:31-06:09

Finally, we have Nessus. Nessus is a proprietary vulnerability scanner developed by Tenable. You can use Nessus to scan your target for known vulnerabilities that you can exploit to gain access to the target. Nessus has many different options available for scanning, which allows you to narrow your focus.

Using these tools allows you to gather all the information you could want about a person or organization. Network defenders can also use these same tools to discover what information is available to others and take necessary steps to remove or hide anything that shouldn't be accessed.

### Summary 06:09-06:32

And that wraps up this lesson. In this video, we compared passive and active reconnaissance techniques. Passive means there is no direct interaction with users, and active means there is direct interaction. We also reviewed some the common tools used in the reconnaissance phase.

## 11.2.5 Performing Reconnaissance

### Performing Reconnaissance 00:00-00:08

In this demo, we'll look at some tactics that an attacker can use to perform reconnaissance.

### Gather Information 00:08-00:58

Of course, the more information the attacker can gather before actually attacking, the better. An attacker will often go out to the corporate website of the organization that they would like to attack and gather some information from there. It's amazing the vast amount of information that you might find--phone numbers, email addresses, press releases. You can learn quite a bit from a company's website.

I have gone out to a medium-sized company called Vivint, and you'll see there's a vast amount of information about the products they offer, sometimes even the platforms they run on, etc. Down here at the bottom, you can see some of the key people within the organization. Further, you can read some of their bios, find out where they have been in the past, and what their current role is. Of course, this type of information could be especially useful if you're going to launch a social engineering attack. The more information you can gather, the better, and company websites are a nice source of information.

### WHOIS lookup 00:58-02:25

Another resource that can be used is a WHOIS lookup. There's a variety of different websites that offer this; I often go to the ICANN site. Let's go ahead and try just typing in vivint.com here. We'll go ahead and look that up, and you can see some information that's returned to us--of course, after putting in your CAPTCHA. You can see some contact information for some of the technical folks within Vivint. You can see the mailing address. You can see an email address. You can see that they registered through godaddy.com. Further, you can see information about where they're hosting their name servers. And down here, as you look at the raw WHOIS record, you can see a variety of information that may be useful in formulating the attacks.

Let's go ahead and enter another address. Here you can see that the company has chosen to, rather than expose a certain individual's name and contact information, they've actually just organized around a network team that's responsible for registering the information. So here we don't get quite as much information, but we still get to see where they're hosting their DNS servers, what vulnerabilities exist there, and then we can also see where they've registered--it looks like they got it at namecheap.com--and some of the other information, contact information, their address, phone numbers, etc.

WHOIS doesn't always provide accurate information because many registrars now allow you to use a proxy, as far as the contact information. So, for instance, if you look up redroostersoftware.com, you'll notice that all that information has been obfuscated. Sometimes you can get some useful information from WHOIS, but it's not always a reliable source.

### job postings 02:25-03:41

Now another thing you can do is go and look for job postings that are associated with the company. Particularly if you specify some technical terms, often you'll get results where they post jobs that are available in the specific technologies they're looking for; i.e., they're probably using those technologies within the organization. So, I've come out here, and I've looked for Vivint software, and I see they have a software engineer down here. I'll go ahead and click on that, and I can see some of the skills that they're looking for, and hence some of the technologies that they're interested in. So, distributed systems and p2p, that's generic; but if you get down here, it looks like they're using, probably, Go, Python, C/C++; and they're looking for other things.

But as you can see, this isn't super detailed, but you get a sense of the technologies they're using. I've seen posts where they will list the specific operating system, the platform--including version numbers. Those are especially helpful to attackers, because then they know which vulnerabilities exist in that infrastructure, and they're able to target their attacks to them, all because of public information. If we do a similar search for Qualtrics, you can see here, by clicking on software development engineer, some of the technologies that they use: Java, Scala, C++, Go, JavaScript, Angular, etc. Again, a great source of information for attackers.

### IP addresses 03:41-04:14

Another tool that is used as attackers do reconnaissance is looking at who owns the IP addresses. For instance, if you come here to the ARIN site, you can type in an IP address and see who that belongs to. So, I've queried the Vivint site, and found out this is one of their IP addresses for a Web server. I go ahead and do search on that. What you'll see here is that Amazon actually owns this range of IP addresses. Of course, if this IP address were associated with a particular company, maybe if their hostname were in their datacenter, then the network range here would provide an attacker with a knowledge of which other IP addresses they might attack.

### historical information 04:14-05:27

Another great source of information is gathering historical information about a company by using sites like archive.org. You can simply put in the URL, and then you can see all the different versions that this website has captured over time. It's been said, if you publish it on the internet, it exists forever. Here's a site that captures those snapshots over time. Of course, they won't be interactive like the current website, but you get a sense of how they've changed over time.

For instance, we can come back here to 2013, pick a date, let's say March 14—¦they have a snapshot, and then we have to wait for a little bit. Once it loads--sometimes the CSS doesn't load appropriately--you can see the information or see the site as it was back on a date, in this case, several years ago. Of course, you can get information that may not be currently available: different support numbers, people that were involved, pricing structures, products, and other things that might be helpful as an attacker generates an attack plan.

Doing that same thing with Qualtrics, we can look at the site several years ago. And, interestingly, they tell us on their front page, back at that time, some of the technology they use in order to build their product. The point here is that there's a tremendous amount of information, and if it's once been published, it's likely been archived and you can get at that information.

### Google's Advanced Search 05:27-07:08

Another super useful tool when individuals do reconnaissance is Google's Advanced Search functionality. Most of us just go to Google and we type in a variety of keywords. But if you know what you're doing, you can narrow down the results significantly and find some pretty interesting information. One of the keywords that you might want to know is intitle. That basically says that I need to find the title of these keywords associated with that result. You can see here, for instance, if we just did intitle index of MP3, a bunch of software has been created to create an index of mp3 files. And so here you can go see that there is a whole list of Queen songs, and if we clicked on that, indeed they actually work.

Well, we're not looking for pirated music here, but this keyword is super useful when you're searching for other things in the title. For instance, maybe you're looking for a Nessus scan report. You can type in those words, and you'll find that there are sample reports. But if you scan down here a little bit, you'll actually find real reports. If a report exists for a company that an attacker is going after, this can be super valuable information. For instance, here, we can see the address of a host, and we can see that ssh is running. Or, that a specific port was opened on a specific machine.

Let's just scroll down and choose another one. We can see different ports that are open on different sites. Now just because a port is open doesn't mean it's bad, but it's that much more information that the attacker can use in order to gain access and exploit certain hosts and the vulnerabilities that they might have. So keywords like intitle index of, file type, in URL, cache, etc., become super helpful as individuals do reconnaissance. Of course, other large search engines also have great advanced searching capabilities, as well.

### privacy 07:08-07:26

One thing to be aware of is that large search engines often capture your searches to present, personalize, or customize results. There are search engines out there like duckduckgo that don't do that, that hold your privacy in the highest regard, and as such don't personalize or customize the results for you, hence, focusing on your privacy.

### Probing Packages 07:26-08:22

Before I end this demo, let me show you one other thing. There are a lot of different individual command line tools to be used to probe machines. However, there are packages of software that take those individual command line utilities and put them together with a nice interface.

There is one that existed for years called samspade.org, and they had an associated desktop application. This is one that I've used several times: Essential NetTools. It provides nice access to all kinds of tools, in one spot. We could ping google.com and you can see the replies. We can do a traceroute. We could do port scan on a specific machine, and other things. We can look at DNS records with nslookup, instead of having to know the specific commands and how we pass the parameters.

Again, I encourage you to understand each of those individual tools, but here we have a tool that brings those all together in nice little package. Often this is used during reconnaissance to say, —Is that machine really out? What ports are actually open?—, etc.

### Summary 08:22-09:11

So, to summarize, there are a lot of different ways you can do reconnaissance on an organization. You can check the organization's website or maybe an archived version of it. You can see what domains they've registered, and contact information for those that have registered the domains. You can see associated IP addresses and ranges for those domains. You can use advanced search functionality built into many search engines. And you can use a variety of commandline tools, like ping or traceroute or nslookup, to verify if a machine is actually up and running or where it's located. These reconnaissance tools come packaged up often in neat little programs like Essential NetTools. All that information is essentially public information, and then the information can be used to determine what to do next, as far as an attack strategy.

## 11.2.6 Perform Reconnaissance with Nmap

### Perform Reconnaissance with Nmap 00:00-00:35

One of the very first things you do as a penetration tester or ethical hacker is gather information. There are a lot of tools that can help you to do this. Most ethical hackers start with some very basic command line tools. In this demo, we're going to perform some reconnaissance using some of these basic tools. Our target is a domain set up by the Nmap Security Scanner Project and insecure.org. They've set up scanme.nmap.org to help people learn about Nmap and other tools. They authorize students to do scans as long as they're done within reason. Let's close the web browser.

### Perform Basic Reconnaissance 00:35-01:47

To get started, we're going to go through some reconnaissance steps. First, I just want to make sure that the site is live, so let's ping it. I'll just type, 'ping scanme.nmap.org', press Enter, and I get a response. I'll hit Ctrl+C to stop the ping, and I can confirm that the site is live.

Now let's find the path to our target by performing a traceroute. On Windows, you do that by typing tracert. But we're on our Kali Linux system, so we need to type in 'traceroute scanme.nmap.org' and then Enter. I get over a dozen hops between me and the target. These, down here, aren't responding to the request, but my traceroute still continues. This is normal behavior. Let's clear our screen.

Now, I'm interested in finding the name server information for our target. I'm going to type in 'nslookup scanme.nmap.org' and press Enter. I get the IP addresses for both IP version 4 and version 6 along with the server names.

You can perform a whois search from the command line in Linux. To do that, I'll type in 'whois nmap.org' and press Enter. I'll scroll up, and here, I can see all the information about nmap that's available from whois. I'll clear the screen again.

### Perform Basic Reconnaissance 01:47-02:40

Next, let's see what happens if we try to make a connection with the target. I know that port 80 is open because we were just at the website. Let's use Netcat to see if we can make a connection to the site on port 80. For that, I'll type in 'nc -v scanme.nmap.org 80' and press Enter. I get a response back, and it looks like I'm connected. Typically, if you want to make sure you're connected, you can type 'help', and you'll get a response. I do get a response. Not only that, I get some information about what sort of server they're running and even the version.

Let's try another. I'll use my up arrow to get back to our last command. I'll change the 80 to a 22 and press Enter. I get a connection again and see that they're running SSH, and I get the version number along with some other information. All right, let's move on. I have to press Ctrl+C to get out of this, and I'll also clear the screen.

Perform Basic Reconnaissance with Network Mapper 02:40-03:54
You'll get a lot of use out of Nmap as a penetration tester and ethical hacker. We were just using Netcat to make connections to ports. But with 65,535 possible ports, that would take all day. We can use Nmap to do a scan to see what ports are open. To do a port scan, I'll type, 'nmap -sS scanme.nmap.org' and press Enter. The -sS parameter scans the 1,000 most common ports. I get some results back. I know what ports are open. I know the state of the port and what service is running. Now, if I want to continue working with Netcat, I have a list of ports I know are open.

Earlier, we did a ping to see if the target was alive. Let's repeat that now to get the IP address. I'll type 'ping scanme.nmap.org' and press Enter. I'll press Ctrl+C to stop the ping. Now, I want to do a ping sweep to see what other IPs might be associated with scanme.nmap.org. To do a ping sweep, I'll type in 'nmap -sn 45.33.32.1-255' and press Enter. Now I can go through this list and see which other IPs might be associated with scanme.nmap.org.

### Summary 03:54-04:14

That's it for this demo. In this demo, we did some basic reconnaissance. First, we used some command line tools to find information about our target. Then we used Netcat to connect to open ports. Finally, we used nmap to perform a basic port scan and a ping sweep.

## 11.2.7 Perform Reconnaissance with the Harvester

### Perform Reconnaissance with theHarvester 00:00-00:38

During reconnaissance, a penetration tester needs to understand the customer's footprint on the internet. This means gathering emails, domains, subdomains, hosts, employee names, open ports, and banners from public sources like search engines, PGP key servers, and the SHODAN computer database. One tool that does part of this process is theHarvester. It's a good idea to check your own website to see what's out there because you want to know what an attacker can see about your organization. The program is pre-installed on Kali Linux, and you can read more about theHarvester at the kali.org website. Now let's see how theHarvester works and what we can find.

### theHarvester Program and Usage Options 00:38-01:58

We're on our Kali Linux system. I have a terminal open. The first thing I'm going to do is type in 'theharvester' and press Enter.

I'll scroll up, and you can see we have theHarvester, and we're using version 3. We see the person who coded it, so thank you to him and anyone that helped him with the project.

We're looking for the usage options, which are right here.

The first one that I want to look at is the -d option. This specifies the domain or company name. That's pretty self-explanatory.

The next one is the -b option. This is specifying the data source. So, if we want to search any of these sources, we just type -b followed by one of these.

Now I want to jump down to -l. This will limit the number of results to work with. This can help our searches go faster if we want to limit things a bit.

-h will use the SHODAN database to query hosts. Remember, SHODAN is a search engine for the Internet of Things.

Next let's come down here and look at these examples. This first one starts with theHarvester and -d for domain, and that domain is microsoft.com. -l 500 means limit the results to 500. They're using -b google to specify Google as the source. The example ends with -h, which is the SHODAN database query. It ends with myresults.html, which writes the results to an html file.

So, what happens when you run it?

### Search with theHarvester 01:58-03:44

I'm going to highlight this search query, copy it down here, and press Enter. It takes a second to run, and then we get some results. I'll scroll up a bit. I only see one email address, but we found 10 domains. Down a bit, you can see the Shodan database search results.

Let's try another search. I'll clear the screen. I'll use my up arrow to get back to our last search, and I'm going to modify it a little. This time, let's search google.com with bing as the source. That might be interesting. I'll press Enter and wait for it to finish. Here's our results. We found no emails and four domains.

Now let's swap those searches around. This time, I'll put bing.com here and then use Google as the search source. I'll press Enter and wait for my search to complete again. We found one email and eight domains and subdomains.

So far, we're having limited success. Let's make our search a little more aggressive. I'll use my up arrow key to bring up our last search, and I'll modify it a bit.

This time, I'm going to search illinois.gov. I'm bumping this number up to 1000, and I'm going to use the -b all argument to use all the data sources available wile gathering information on a target. This one takes several minutes to complete. I'll press Enter. While this is running, I'll pause the recording.

Okay, the scan is done. I'll scroll up. It only found a couple of emails, but it looks like it found over 1,000 domains and subdomains. I'll scroll back down to the bottom and look at something. During a penetration test, you might find some domains that were set up for testing at one time and then forgotten about. Over here, there's some domains that say beta in them. I would guess those were set up to test various web applications at one time.

I'll clear the screen and use my up arrow to bring up the previous search.

### Search Social Media 03:44-04:30

Before we end this demo, I want to talk about searching social media. theHarvester can search both Twitter and LinkedIn. For example, on LinkedIn, users voluntarily and publicly submit information about themselves, such as their personal data, professional work history, education, contact information, interests, hobbies, and so on. All of this information is searchable with theHarvester.

Twitter allows penetration testers to gather additional clues. We can use social media profiling to gain additional information about our target employees, such as phone numbers, email addresses, photos, and locations. Using theHarvester, we can also gather specific Twitter usernames.

I'm not going to run those searches to avoid bringing up personal information about others, but social media exploitation is an important risk that you should account for.

### Summary 04:30-04:52

That's it for this demo. In this demo, we used theHarvester to perform reconnaissance. We explained some of the different parameters that are available and how to use them. We explained how theHarvester can use different data sources such as Google, Bing, Linkedin, and Twitter. And we did a few searches that had varied results.

## 11.2.8 Reconnaissance Facts

Reconnaissance, also known as footprinting, is the process of gathering as much information about a target before beginning any penetration test or security audit. The more information we know about the target, the more prepared we can be for anything that may come up.

This lesson covers the following topics:

<ul>
   <li>
    Passive reconnaissance
   </li>
   <li>
    Active reconnaissance
   </li>
   <li>
    Reconnaissance tools
   </li>
</ul>

### Passive Reconnaissance

Passive reconnaissance involves gathering information on the target with no direct interaction with that target. Valuable information can be gathered using passive reconnaissance. The following table shows some of the common passive reconnaissance methods:

<table>
    <thead>
    <tr>
        <th class_="firstTableHeader" scope="col" class="fw-bold">
        Passive Reconnaissance Method
        </th>
        <td>Description</td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>Packet sniffing</td>
        <td>
        Packet sniffing is the process of capturing data packets that are
        flowing across the network and analyzing them for important
        information. Modern networks should have good protection against
        network sniffing attacks, but there are occasional circumstances
        that allow an attacker to gather sensitive information from the data
        packets.
        <br />
        <br />
        Packet sniffing is most easily performed on open wireless networks.
        Because the attacker is not sending data or actively interacting
        with the target, this is considered passive reconnaissance.
        <br />
        <br />
        Scanning for open wireless networks needs to be done before packets
        can be sniffed. Two common methods are war driving and war flying:
        <ul>
            <li>
            War driving is driving around with a wireless device looking for
            open, vulnerable wireless networks.
            </li>
            <li>
            War flying uses drones or unmanned aerial vehicles to find open
            wireless networks.
            </li>
        </ul>
        </td>
    </tr>
    <tr>
        <td>Eavesdropping</td>
        <td>
        Eavesdropping is the act of covertly listening in on a communication
        between other people. This can include:
        <br />
        <ul>
            <li>
            Listening to employees conversations without them knowing.
            </li>
            <li>
            Shoulder surfing, which is an eavesdropping technique where the
            listener obtains passwords or other confidential information by
            looking over the shoulder of the target as the target logs on or
            types information.
            </li>
            <li>
            Dumpster diving, which is also considered eavesdropping. When
            dumpster diving, the attacker goes through the trash to find
            important information that may have accidentally been thrown
            away.
            </li>
        </ul>
        </td>
    </tr>
    <tr>
        <td>Open-source intelligence (OSINT)</td>
        <td>
        Open-source intelligence is any data that is collected from publicly
        available sources. The goal is to gather as much personal
        identifiable information (PII) as possible. This includes
        information found from resources such as:
        <br />
        <ul>
            <li>Search engines (Google, Bing)</li>
            <li>Social media (Facebook, LinkedIn)</li>
            <li>
            Company websites (About sections of websites, company
            directories)
            </li>
            <li>Media sources (news sites, interviews, articles)</li>
            <li>
            Public government sources (property appraisal sites, public
            records)
            </li>
        </ul>
        </td>
    </tr>
    </tbody>
</table>

### Active Reconnaissance

After an attacker has gained as much information as possible through passive reconnaissance, the next step is the active reconnaissance phase.

Active reconnaissance is the process of gathering information by interacting with the target in some manner. Because there is direct interaction with the target, there is also a risk of exposure.

There are many different methods to perform active reconnaissance, but the goal is to gather additional information on the target, including:

<ul>
   <li>
    Network information
    <ul>
     <li>
      IP configurations
     </li>
     <li>
      Domains and sub-domains
     </li>
     <li>
      DNS information
     </li>
    </ul>
   </li>
   <li>
    System information
    <ul>
     <li>
      Operating systems
     </li>
     <li>
      Software versions
     </li>
     <li>
      Usernames and passwords
     </li>
     <li>
      Physical server locations
     </li>
     <li>
      Additional organizational information
     </li>
    </ul>
   </li>
</ul>

Performing reconnaissance provides the attacker with the information needed to perform a successful attack on the target. The goal is to know and understand the following information about the target:

<ul>
   <li>
    Security posture (this includes both network and physical security)
   </li>
   <li>
    How to narrow the focus for attack
   </li>
   <li>
    Potential vulnerabilities
   </li>
   <li>
    How to best create a network map
   </li>
</ul>

### Reconnaissance Tools

There are many tools and resources available to assist in the reconnaissance phase. The below table covers some of the popular tools used:

<table>
    <thead>
    <tr>
        <th class_="firstTableHeader" scope="col" class="fw-bold">
        Reconnaissance Tool
        </th>
        <td>Description</td>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
        OSINT framework
        <br />
        </td>
        <td>
        The OSINT framework is a collection of resources and tools that are separated by common categories. The OSINT Framework makes it easy to gather all sorts of information, making the initial reconnaissance process much more efficient. Documentation can be found at
        <a href="https://osintframework.com/" target="_blank">https://osintframework.com/</a>
        </td>
    </tr>
    <tr>
        <td>
        theHarvester
        <br />
        </td>
        <td>
        theHarvester is a passive reconnaissance tool that is used to gather information from a variety of public sources. The tool gathers emails, names, subdomains, IPs, and URLs using multiple public data sources. These sources include search engines, social media sites, and Shodan.
        <br />
        <br />
        theHarvester does have some options, such as brute-forcing DNS and taking screenshots, that would fall under active reconnaissance.
        <br />
        </td>
    </tr>
    <tr>
        <td>Shodan</td>
        <td>
        Shodan is a popular search engines for internet-connected devices. Users are able to search for specific types of devices and locations. This information can be used to see if a target has any online devices without proper security.
        </td>
    </tr>
    <tr>
        <td>Dnsenum</td>
        <td>
        Dnsenum is a program that performs DNS enumeration and can find the DNS servers and entries for an organization. This information can help find other information such as usernames, computer names, IP
        addresses, and more.
        </td>
    </tr>
    <tr>
        <td>Curl and wget</td>
        <td>
        Curl and wget are two common command line programs that can be used to download or upload files. An example of using these tools is to download an entire website for offline analysis.
        <br />
        <br />
        Because these tools actively engage with the target, they are considered active reconnaissance tools.
        </td>
    </tr>
    <tr>
        <td>scanless</td>
        <td>
        scanless is used for port scanning. Instead of scanning ports from the hacker machine, scanless uses exploitation websites to perform port scans. This means the attacker is able to maintain anonymity while scanning the target.
        </td>
    </tr>
    <tr>
        <td>Sn1per</td>
        <td>
        Sn1per is a automated scanner that can be used to enumerate and scan for vulnerabilities. Sn1per combines the functions of many tools and can be used to find information such as DNS information, open ports, running services, and more.
        </td>
    </tr>
    <tr>
        <td>Nessus</td>
        <td>
        Nessus is a proprietary vulnerability scanner that is developed by Tenable. Nessus can be used to scan the target for any known vulnerabilities, which can be exploited to gain access to the target.
        </td>
    </tr>
    </tbody>
</table>

Selecting the right tool allows the attacker to gain the necessary information on the target. Network defenders can also use these tools to discover what information is out there and take the necessary steps to remove or hide anything that should not be available.
