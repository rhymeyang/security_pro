---
lang: zh-CN
title: Section 12.8 Backup and Restore
description: some description
---

As you study this section, answer the following questions:

<ul>
    <li>
     Why are there different backup types?
    </li>
    <li>
     How often should you run a full backup?
    </li>
    <li>
     How do incremental and differential backups differ?
    </li>
    <li>
     How can you implement the 3-2-1 rule?
    </li>
    <li>
     What are the differences between network attached storage (NAS) and storage attached network (SAN)?
    </li>
</ul>

In this section, you will learn to:

<ul>
    <li>
     Back up files with file history.
    </li>
    <li>
     Recover a file from file history.
    </li>
    <li>
     Backup a domain controller.
    </li>
</ul>

Key terms for this section include the following:

<table class="terms">
   <thead>
    <tr><th class_="firstTableHeader" scope="col" class="fw-bold">
     Term
    </th>
    <th scope="col" class="fw-bold">
     Definition
    </th>
   </tr></thead>
   <tbody><tr>
    <td>
     Full backup
    </td>
    <td>
     A back up that captures all of the data on a machine. A full backup is always the first backup you should run.
    </td>
   </tr>
   <tr>
    <td>
     Incremental backup
    </td>
    <td>
     A backup that contains all changes since the last incremental backup.
    </td>
   </tr>
   <tr>
    <td>
     Differential backup
    </td>
    <td>
     A backup that contains all changes since the last full backup.
    </td>
   </tr>
   <tr>
    <td>
     Snapshot
    </td>
    <td>
     An instant copy of an individual computer. Snapshots are normally used on virtual machines (VMs) when changes may need to be
        reverted.
    </td>
   </tr>
   <tr>
    <td>
     NAS
    </td>
    <td>
     A network storage appliance often used to store backups or other files.
    </td>
   </tr>
   <tr>
    <td>
     SAN
    </td>
    <td>
     A network of fast storage appliances. A SAN stores file shares and other data that needs to be accessed
        quickly.
    </td>
   </tr>
   <tr>
    <td>
     Offsite storage
    </td>
    <td>
     A location where files are stored that is away from the physical office space where the data is created. Offsite storage is part of 3-2-1 rule.
    </td>
   </tr>
   <tr>
    <td>
     Scalability
    </td>
    <td>
     The ability to increase or decrease data storage space.
    </td>
   </tr>
   <tr>
    <td>
     Restoration order
    </td>
    <td>
     Pre-planned order in which servers will be restored following a disastrous event. The order is determined by the
        server's importance to the company's operation.
    </td>
   </tr>
</tbody></table>

This section helps you prepare for the following certification exam objectives:

<table class="objectives">
   <thead>
    <tr><th class_="firstTableHeader" scope="col" class="fw-bold">
     Exam
    </th>
    <th scope="col" class="fw-bold">
     Objective
    </th>
   </tr></thead>
   <tbody><tr>
    <td>
     TestOut Security Pro
    </td>
    <td>
     4.0 Data Security
     <p>
      4.1 Protect and Maintain Data files
     </p>
    </td>
   </tr>
   <tr>
    <td>
     CompTIA Security+ SY0-601
    </td>
    <td>
     2.1.2. Data sovereignty
     <ul>
      <li>
       2.5.4. Backup types
       <ul>
        <li>
         Full
        </li>
        <li>
         Incremental
        </li>
        <li>
         Snapshot
        </li>
        <li>
         Differentia
        </li>
        <li>
         Tape
        </li>
        <li>
         Disk
        </li>
        <li>
         Copy
        </li>
       </ul>
      </li>
      <li>
       2.5.4 Backup Storage Options
       <ul>
        <li>
         Network attached storage (NAS)
        </li>
        <li>
         SAN
        </li>
        <li>
         Image
        </li>
        <li>
         Online vs. offline
        </li>
        <li>
         Offsite storage
         <ul>
          <li>
           Distance considerations
          </li>
         </ul>
        </li>
       </ul>
      </li>
      <li>
       2.5.5. Non-persistence
       <ul>
        <li>
         Revert to known state
        </li>
        <li>
         Last known good configuration
        </li>
        <li>
         Live boot media
        </li>
       </ul>
      </li>
      <li>
       2.5.6. High availability
       <ul>
        <li>
         Scalability
        </li>
       </ul>
      </li>
      <li>
       2.5.7. Restoration order
      </li>
      <li>
       2.5.8. Diversity
       <ul>
        <li>
         Technologies
        </li>
        <li>
         Vendors
        </li>
        <li>
         Crypto
        </li>
        <li>
         Controls
        </li>
       </ul>
      </li>
     </ul>
    </td>
   </tr>
</tbody></table>

## 12.8.1 Backup Types

### Backup and Restore 00:00-00:37

In this lesson, we'll discuss backing up data.

Backing up your data is absolutely critical. It must be done consistently, and strategically. It's also essential to verify backups to ensure that they actually work and you can restore your data.

You need to know three different types of backups. The first is the full backup, the second is the incremental backup, and the last is the differential backup. But before we dive into these, let's quickly talk about a key component used with backups called the archive bit.

### Archive Bit 00:37-01:01

The archive bit is a file attribute that is either on or off. It's used by backup systems to determine if the file has been archived—"that is, has been backed up. Also, archive bit identifies if a file has been modified since the last backup. This is important when used with certain types of backups.

With that, let's explore the different types of backups.

### Full Backup 01:01-01:53

Let's first discuss a full backup. A full backup backs up everything. It doesn't matter whether the archive bit is set or not on any file. However, as it backs up each file, it clears the archive bit to indicate that the file is backing up.

In this way, you can determine if a file has been modified at a later point in time. If you were to modify a file that has been backed up, the archive bit would be reset, indicating to the backup software that this file has been modified since the last time it was backed up.

If a file is not modified after the full backup, the archive bit is left in a cleared state. This is important because other types of backups, such as incremental, take into consideration if this archive bit has been cleared when deciding whether it should back up a file or not.

### Incremental Backup 01:53-05:04

An incremental backup backs up everything since the last full backup or since the last incremental backup. To determine whether or not a file has been modified since the last full or incremental backup, it looks at the archive bit. If the archive bit is turned on, that tells the backup software that the file has been modified since the last full or incremental backup, and needs to be backed up again. Once it's backed up the file, the archive bit is cleared.

Let's run through an example. Suppose you perform a full backup of the entire file system on Monday. As a result, every file in the file system has been backed up, and the archive bit on each file is cleared. Then, on Tuesday, you perform an incremental backup. Because the incremental backup only backs up files with the archived bit set, it will only backup files that have changed since Monday. Accordingly, the incremental backup you made on Tuesday will be relatively small because it will only contain one day's worth of changes. After backing up the changed files, the incremental backup will clear the archive bit again on the files that were backed up.

If you perform another incremental backup on Wednesday, it will once again look for any files with enabled archive bits, indicating that they've been modified since either the last full backup on Monday or since the last incremental backup on Tuesday. Therefore, Wednesday's incremental backup also only contains one day's worth of changes. Likewise, if you run another incremental backup on Thursday, then only the changes that have been made since Wednesday will be backed up. The same is true on Friday.

The advantage of this strategy is that the daily incremental backups finish relatively quickly because we're only backing up one day's worth of changes. The full backup still takes some time to complete because all files are being backed up. For this reason, the full backup is usually executed over the weekend when the system is not heavily used. The incremental backups can occur each weekday. Because they don't take much time to complete, they typically don't interfere with day-to-day work.

Incremental backups have one significant drawback. The incremental backup strategy is the slowest type of backup for restoring data. For example, suppose we ran a full backup on Monday and then ran an incremental on Tuesday, Wednesday, Thursday, and Friday. Then the server crashes on Saturday, and we need to restore all the data back to the server after we've recovered from the crash.

The first thing that you must do is restore the first full backup from Monday. Then you must restore every incremental backup in the order they were created. First, you must restore Monday's incremental backup, followed by Tuesday's backup, then Wednesday, Thursday, and Friday's backups. Each backup must be restored in the proper sequence to return the system to where it was before the crash. This can take hours or even days to complete, depending how much data is involved.

### Differential Backup 05:04-07:16

Another option is to use differential backups instead of incremental. A differential backup looks for files that have been modified since the last full backup. It does this by evaluating if the archive bit has been set on the files. If the archive bit is clear, it will not back up the file because it assumes that it has not been changed since the last full backup. If the archive bit is set, the differential backup assumes the file has been modified and needs to be backed up.

The key difference is that a differential backup does not clear the archive bit after backing up a file. Therefore, it backs up everything modified since the last full backup, but not since the last differential backup. This has advantages and disadvantages.

Suppose you perform a full backup on Monday just as with the incremental backup strategy. This clears all archive bits on all files. Then, we perform a differential backup on Tuesday and Wednesday. Because the differential backup on Tuesday does not clear any archive bits, Wednesday's differential backs up all the files that have been modified since Monday. Thursday's differential backup includes all the changes made on Monday, Tuesday, and Wednesday. Friday's differential backup includes all the changes made on Monday, Tuesday, Wednesday, and Thursday.

As you progress through the backup schedule, each differential backup takes progressively longer because it's backing up more data each time. The first differential backup completes in the same amount of time as an incremental would because we're only backing up one day's worth of data. However, each subsequent differential takes longer.

The advantage of differential backups is the speed of restoring data. With differentials, all we do is restore the full backup followed by the last differential backup. For example, if a server were to crash on Saturday, we would restore the full backup from Monday and then the last differential backup from Friday. That's all we do because the last differential backup contains a backup of every single file that has been changed since the last full backup.

### Mixing Backup Types 07:16-08:05

You should never mix differential and incremental backups together with a full backup. If you mix full backups with incremental and differential backups, you're going to have problems because of the way these different types of backups handle the archive bit. As a result, files that should have been backed up will be missed.

Another alternative for backing up data is to create a system image. Imaging programs create a bit-level mirror of a particular hard disk or partition.

Newer versions of Windows, and all versions of Linux, include this functionality. Typically, a system image is created on a defined schedule. Because a system image backs up the entire hard disk or partition, they are rather slow to create. However, they are very fast to restore.

### System Images 08:05-08:51

All you do is restore the image to the same hardware, or even to a new piece of hardware if you have a major hardware malfunction, and the system is back and available again in exactly the state it was when the image was created. This can be very useful in the event of a malware infection. Most of the time it's easier to re-image a machine that's been infected with malware rather than try to get rid of the malware.

There are other types of data to back up. For example, if you're managing a domain controller in a Windows network, then you need to backup not only the files on the server but all your active directory information as well. To do this, you can create a special type of backup on the domain controller called a system state backup.

System State Backup on a Domain Controller 08:51-09:24
If you are backing up sensitive information, such as your security logs, then you might want to consider the location of the backup. Instead of backing that data up to a device that can be modified in some way, find a more secure option. For example, it could be problematic if you were to back up sensitive information to a network share or perhaps a USB flash drive because of the potential of tampering. Instead, you should back up confidential information to a write-once type of media, such as a recordable DVD.

### Backup Integrity Tests 09:24-09:39

A backup is worthless unless you can successfully restore data from it. You should run periodic tests and restore from your backups in a lab environment, just to make sure that everything works should a crisis occur.

### Summary 09:39-10:16

That's it for this lesson. In this lesson, we talked about backup and restore. We first discussed the importance of backing up your data. We then examined the three backup strategies: full, incremental, and differential. We then mentioned using a system image to backup data. We talked about backing up the system state on the domain controller. We discussed backing up sensitive information to write-once medium. Then we emphasized the importance of verifying backups to make sure that they actually work.

## 12.8.2 Backup Storage Options

### Backup Storage Options 00:00-00:12

Backing up data is vital to network operations. We're going to talk about the different ways backups can be stored and the 3-2-1 rule of backups.

### 3-2-1 Rule For Backups 00:12-00:26

The 3-2-1 rule is simple, but very important. It goes like this: always have three copies of each complete back up. Two are kept on site on two different appliances. One is kept off site. 3-2-1.

### Backup Storage Options 00:26-00:42

Selecting the best storage solution for your backups is as important as the backups themselves. There are several options, including Network attached storage, or NAS; SAN, or Storage Area Network; Cloud; Online vs. offline; and off-site storage. Let's look at each of them.

### Network Attached Storage 00:42-01:02

Network-attached storage is an appliance used to store data in file structures, such as NTFS. It also uses file share protocols like SMB. The appliance allows multiple users to access data simultaneously. This storage option is relatively inexpensive, and it's easy to use for backup copies.

### Storage Area Network 01:02-01:27

A storage area network, or SAN, is another appliance storage option, but it's normally found in larger companies because of cost. A SAN uses Fibre Channel protocols, making access to backup data much faster. It stores data at the block level and provides redundancy. The appliance connects to the network via fibre cable. It also can manage several SAN appliances at one time, making it like a mini-network.

### Cloud Backup 01:27-01:50

Cloud backup as a storage option is relatively new. Cloud storage lets a company use a different company's physical resources. The backups are transferred over the internet and stored on remote servers. When the backup data is needed, it's downloaded from the cloud provider. This option can be easy to use, but it's expensive since cloud providers charge by upload and download sizes.

### Online vs. Offline 01:50-02:26

Let's talk about online storage versus offline storage. Online storage is accessible through your private, internal network. This means that if you need to access your backups quickly, you can do that from any location that has access to the network.

Offline is the opposite; the backups are inaccessible through any network. This means that an IT admin needs to attach the backup to the network to access it. This is done for security and redundancy issues. If your network is compromised, offline backup storage will not be affected—saving your data from complete integrity compromise. Both techniques should be utilized for redundancy and security.

### Offsite 02:26-03:02

Offsite backup storage is an integral part of any business continuity plan and disaster recovery plan. This concept means that a copy of your backups are stored away from your office. This could be in a safe deposit box at a bank or even in the cloud.

You must determine your risk appetite or risk tolerance. How much data can you lose and still recover? A week's worth of data? Two weeks? A day? This decision determines how often you'll rotate your off-site backups. These backups can be stored on removable media--tapes, external hard drives, CDs—whatever's appropriate for the size of your company.

### Summary 03:02-03:23

That's it for this lesson. We talked about several options for storing backups, including network appliances, cloud options, and backup accessibility. We discussed risk appetite and the 3-2-1 rule of backups. We also talked about storing a copy of your backup off site for disaster recovery.

## 12.8.3 Configure Network Attached Storage

### Configure a NAS 00:00-01:21

In this demonstration, we're going to configure a network attached storage device, or a NAS device. I haven't done a whole lot with this device yet. I've booted it up, I've plugged it into the network, and I've performed some basic configuration. I've assigned it an IP address of 192.168.0.102. I've set the subnet mask. I've configured the address of the default router. I've also set the address of the DNS server. But I really haven't done anything more than that. The NAS I'm working with is a Linux distribution and can be downloaded for free. There are many commercial NAS devices, and they all have the same sort of setup.

This device actually has three separate hard disk drives installed in it. One of those drives is a small one, and it's only used to host the NAS operating system itself. On many of the commercial NAS devices, the operating system is installed on a ROM chip. You can also install the OS on a USB drive, but we are just going to use a small hard disk. The other drives on this NAS are used for storage. However, at this point, they're blank. There's nothing on them. We need to configure it. This particular NAS appliance uses a web-based interface to configure it, so what we need to do is switch over to a client workstation, access the web-based interface, and then go through the initial configuration process.

### Basic NAS Configuration 01:21-02:28

The first thing I need to do is open up a web browser so I can access the web-based configuration interface for the NAS device, which I've already done. I've entered the IP address for the NAS device up here in the URL, which is '192.168.0.102'. When we do that, I'm taken to the NAS device's web-based interface. I do have to log in before I'm allowed to configure it. This appliance is based on Linux, so the administrative user name is root. I've entered that in here along with the root user's password.

Because this is the first time this NAS device has been accessed, the first thing I want to do is to launch the initial configuration wizard, which is really nice because it walks you through the configuration process step by step and gets the system up and running. Once you've gone through the initial configuration wizard, you can customize the way the NAS device is going to work. By going through the initial configuration wizard, we get a basic system up and running.

The first thing we need to do is configure our language and time zone. The language is correct, but the time zone is not. We need to click on this drop-down list and select the 'America--Boise' time zone.

### Storage Pool Creation 02:28-03:37

We'll click Next. The next thing we need to do is take all of the storage devices in this system and group them together in a storage pool. Within this pool, we can define one or more storage volumes. And on those volumes, we can define individual shares that users can actually access over the network.

Let's go ahead and enter a name for this storage pool. Let's call it StoragePool. Once that is done, then we have to specify how we want all of these storage devices grouped together in this pool. To do this, the system will group them together into a RAID array. There are many different types of RAID that you can use. The implementation that you want to use this NAS appliance for will, to an extent, dictate how that RAID array needs to be configured. For example, if you're going to use this storage device to host virtual machines, then you'll probably want to select the virtualization option. If you're going to use this NAS appliance for network backups or as a storage location for network backups, then you'd want to use the backup option. If this device is going to store streaming media, then we'd want to use the media option. At the bottom, we have an option for Logs. Let's go ahead and click Automatic, Let's go to the Directory tab up here.

### Active Directory Integration 03:37-04:13

In this screen, we have the option of integrating this NAS device into an existing network structure. For example, if we had Microsoft servers deployed in this network that are running Active Directory, then we could integrate this device and join it to our Active Directory domain, which would be really nice because that would allow us to use our existing Active Directory user accounts to control access to the shares on this system. This also supports LDAP, if we wanted to use that. On this tiny network, I am not going to use Active Directory or LDAP. But on a large network, you would certainly want to.

### Create Groups and Users 04:13-04:59

The next thing I want to do is to create a group and a user. We will go up to Account. We have groups, let's add a group. I'm going to call it Students. I have a few options here. Permit Sudo--I don't want this group to have that. I also have the option to allow repeated GIDs. I'll leave that unchecked, too. Let's click OK. My Students account is created. It's not a built-in account; it's one that I added.

Now let's add a user account. Add user. Put in 'dfellows'. Add the user to my Students group. Use the full name of 'Dana'. Finally, enter my password here and confirm it. I'm going to leave everything else as it is, scroll down, and click OK.

### Configure Storage 04:59-05:32

The next thing I want to do is to configure our storage. I'll go up here and select the Storage tab, and then Volume Manager. I'm going to give it the name 'Volume1'. I'll go down here under Available disks and click the plus sign. It shows I have two disks. I want to mirror these two disks. The total capacity is going to be 6 gigabytes (which is not a whole lot, but for this demo, it's fine). I'll come down here, select Add Volume, and wait for the Volume Manager to apply the changes. Okay. Now that we have a volume, configured I can create a share.

### Create a Share 05:32-06:06

Let's go up to the Sharing tab and select it. I want to create a Windows share. Click down here on Windows Share. It wants to know the path where that share will be located, so let's browse. I'm going to go to Volume1. For a share name, I'll just keep is simple and use 'dfellows'. I have other options. Let's look at Advanced Mode. I can allow guest access, deny guest access, tell it which hosts are allowed and which Hosts to deny. We are going to leave everything set to the default and click OK to create the share.

### Enable the Service 06:06-07:24

Now it ask me if I want to enable this service. I'm going to select Yes. Now we can scroll down and see that our SMB service is up and running.

At this point, I have the NAS configured with some basic settings. Let's go ahead and map a network drive to the NAS device. Let's open up File Explorer and select it. We will select This PC, right-click, and select Map Network Drive. For the drive letter that we're going to map, let's select Z. Let's type in '\\192.168.0.102', which is the IP of the NAS. Now we'll go over here and click Browse to find the exact share that we created. I'll expand out the NAS, select my dfellows share that is here, and click OK. I now have that path in here. I have not set up my NAS in my DNS, so my DNS is not aware of this device. That's why I'm using the IP address instead of finding it by the DNS name. I'm going to select Reconnect at sign-in, and I'm going to select Connect using different credentials. I'll put in the credentials, the ones for the NAS device. I don't want to have to enter these every single time, so I'll check Remember my credential. Click OK. We have mapped Drive Z to the Shared Files share on the NAS device. We can copy files back and forth to the share and create new files in the share.

### Summary 07:24-07:46

That's it for this demonstration. In this demo, we looked at configuring a network attached storage device. We created a user account and a group, configured storage, and configured a shared folder on the device. We connected to that share from a Windows 10 workstation over the network.

## 12.8.4 Backup Types and Storage Facts

Backing up all data on a network is absolutely necessary. However, each company has different needs to access backups and the speed that backups can be deployed.

This lesson covers the topic of backup storage options.

### Backup Storage Options

Backup storage options vary depending on a company's mission and compliance requirements. Regardless of the option selected, a backup strategy should always take into account the 3-2-1 rule. The rule specifies there should be three copies of every backup. Two copies are kept on premise on separate storage devices and one copy is stored offsite.

<table>
   <thead>
    <tr><th class_="firstTableHeader" scope="col" class="fw-bold">
     Storage options
    </th>
    <th scope="col" class="fw-bold">
     Description
    </th>
   </tr></thead>
   <tbody><tr>
    <td>
     Network Attached Storage (NAS)
    </td>
    <td>
     Network Attached Storage is an appliance used to store data in file structures, such as NTFS. NAS also uses file share protocols like SMB. The appliance allows multiple users to access data simultaneously. This storage option is relatively inexpensive and is easy to use for backup copies.
    </td>
   </tr>
   <tr>
    <td>
     Storage Area Network (SAN)
    </td>
    <td>
     Storage Area Network is another appliance storage option. This option is normally found in larger companies because of cost. A SAN uses Fibre Channel protocols that make accessing the backup data much faster. It stores data at the block level. The appliance connects to the network via fibre cable. It also can manage several SAN appliances at one time, making it like a mini-network.
    </td>
   </tr>
   <tr>
    <td>
     Cloud
    </td>
    <td>
     Cloud backup as a storage option is relatively new. Cloud backup uses the physical resources of another company as a storage device for the backup. The backups are transferred over the internet and stored on remote servers. When the backup data is needed, it is downloaded from the cloud provider. This option can be easy to use but is expensive since cloud providers charge by the amount of data uploaded and downloaded.
    </td>
   </tr>
   <tr>
    <td>
     Online vs Offline
    </td>
    <td>
     Let’s talk about online vs offline storage. Online refers to storage that is accessible through your private, internal network. This means that if you need to access your backups quickly it can be done from any location that has access to the network.
     <p>
      Offline is the opposite; the backups are inaccessible through the network. This means that an IT admin must attach the backup to the network before it can be accessed. This is done for security and redundancy issues. If your network is compromised, offline backup storage will not be affected. This means your data is safe from integrity compromise. Both techniques should be used for redundancy and security.
     </p>
    </td>
   </tr>
   <tr>
    <td>
     Offsite storage
    </td>
    <td>
     Offsite backup storage is an integral part of business continuity plans and disaster recovery plans. This concept means that a copy of your backups are stored away from your office. The backups could be in a safe, safe deposit box at a bank, or even in the cloud. You must determine your risk tolerance, also referred to as risk appetite.
     <p>
      How much data can you lose and still recover? A weeks’ worth of data? Two weeks? A day? The answer determines how often you should rotate your offsite backups. These backups can be stored on removable media (tapes, external hard drives, CDs, etc.) whatever is appropriate for the size of your company.
     </p>
    </td>
   </tr>
</tbody></table>

## 12.8.5 Implementing File Backups

### Backing Up Workstations 00:00-00:24

In this demonstration, we're going to take a look at two different ways to back up your Windows Workstation. One we're going to look at is a new way of backing up your files called File History. It's available on Windows 10. The second way an older version of a backup using Windows Backup Utility. This feature was first created for Windows 7, and it's still available on Windows 10.

### Set Up File History 00:24-01:31

First, let's set up File History. We're going to go to our Windows button and click Start. We're going to go to Settings. Now we're going to Update and Security. Let's go to Backup.

The first thing we're going to do is add a drive. Click Add a drive. You can see I have a backup drive here, so let's click my F drive. This automatically backs up our files. It gives you a very simple way of going into your hard drive and your backup and retrieving those files.

We can click on more options here to delve a little deeper in. You can tell it when to back up. You can tell it to back up right now, at this moment. You can tell it how often to back up and when to keep your backups. You can even tell it to select these specific folders or to exclude folders.

Currently, it's already added all these folders. If there's a folder missing that I want to add, I can put it here. Let's say I don't really care for my Saved Games folder; I could very easily just add it and exclude it from my backup. That's pretty simple. If you ever want to turn it off, you can just tell it to stop using the drive.

### Legacy Backup 01:31-03:33

Now, let's switch to another machine, and we'll show you how to do the Legacy version of Windows Backup using Windows Backup Utility. This method provides more than just a backup file history; it can also be used to back up the entire image of the computer. But it requires a little more effort and maintenance than the File History method.

Let's go to Control Panel. We're going to go to System and Security and Backup and Restore. The first thing we need to do is set up a backup. The first time you use the Backup and Restore tool, you need to click Set up backup. Keep in mind that you can't have more than one backup job on the system at a time.

The first thing it wants us to do is select a drive. I have this backup drive, drive F, which I've already set up, so I'm going to use it. Click Next. Now it gives you an option to let Windows choose for you and decide what to back up, or to decide that yourself. I'm going to determine that myself, and I suggest you do the same when you set up backups.

Whichever choice you've made, you have the option to back up an image of your entire system. You can select the C drive or the whole local disk and the system reserve partition. They're backed up and put into a VHD file that you can use for a bare metal recovery or a complete recovery. That way, if your system dies, you have an image of it, so you can easily restore it back to its state when you made the system image backup.

I'm going to select the C drive and keep the system image. Click Next. You can also choose your system libraries as well. Now we see a summary of items included in the backup. You can also change the backup schedule here if you want. By default, once we create the backup, it'll automatically follow that same schedule. We can change the schedule whenever we like. We're being warned here that we might need a system repair disk if we want to use the system image file. We could also boot it from a Windows PE Utility CD or a Windows 10 media disc. We're going to save these settings and run a backup. The backup is in progress.

### Create an Image 03:33-06:50

Now the backup has completed. There's another thing we can do here, in the left-hand pane. You can see some options. We can actually change the schedule for backups if we click here or go to Change settings for schedule. Our schedule is currently set to Sunday at 7:00 p.m. We can also create a system image from here without backing up the system.

Under Location, we have options for managing space. If we click on this, it'll show you how much space your backups are taking. It can also show you all of your previous backups. You can go in and delete those if you wish. You can change your system image settings as well.

Now that we've backed up our system, we want to see files in the backup. Let's go to the backup drive we set up. We're going to go to the F drive backup. You can see that there'll be a couple files backed up onto the drive. This file, this Windows image backup, is our actual backup folder. Let's open up this folder and allow access.

This is the first time we've actually opened it. We're going to the computer name and this file right here, this backup with a date. This will show us several files, but there's two files that we want to focus on, our VHD files or our hard disc image.

Let me expand this a little bit. In our hard disc image files, you can see that this file is much smaller than this other. This hard disc image file or VHD file is actually a backup of our BitLocker section. This is our actual backup. We can mount this VHD file through our Computer Management settings.

Let's right-click on Start and go to Computer Management. I'm going to go to Disc management. We can see all of our hard disc information here. We want to attach a VHD. Let's go to `Action > Attach VHD`. Then we can browse to the location. I'll have to browse to that external hard drive or that backup drive we set up. Let's go under our file, and we want to make sure that we choose the file that's larger than the other. Click Open. OK.

Now, if we scroll down, we can see that the drive color's a little different. It's trying to show you that that's the VHD. If we right-click on the drive, go to Change drive letter and Path, we can add a path. We have to give it a drive letter, so let's just make this our E drive for now. Click OK. That successfully mounts the drive as the E drive.

This VHD file is mounted now, so if we go into our file system and go here, we can see the E drive. Now we can open this up and what you'll see, which is pretty familiar, is our actual Windows system folders. If we open up another File Explorer for this PC and go to the Local disc, you can see that these are the same folders. The backup VHD is pretty much just a copy of the exact same thing we're seeing on our C drive. That's perfect.

Now we don't need the VHD on here anymore. We're going to detach it. You don't actually want to right-click it and hit Delete. Otherwise, you could actually delete the VHD file, and we don't want to do that for our backup. Let's go ahead and close our management window.

### Windows 10 Backup File 06:50-07:22

The other file that exists on our backup drive right here is a Windows 10 backup file in a compressed format. If we right-click and we click Open > Continue, we can go in and see the contents. You'll see these are all zipped files of our backups. It's a file-based backup, so it's very easy to restore files without having to choose a backup location.

As you can see, we can take advantage of the Backup and Restore tool to back up files and folders on our computer. We can also create a complete system image of our machine in case of a disaster.

### Summary 07:22-07:42

And that's the end of this demo. In this demonstration, we covered two different methods for backing up your workstations. The first is to use the File History feature introduced in Windows 10, which only restores files. The second is to use the Windows Backup Utility.

## 12.8.7 Demo Recovering Files

### Restoring Workstation Data from Backup 00:00-00:22

In this demonstration, we're going to look at two different ways to restore your files in your backup. The first method we're going to look at is using the File History function in Windows 10.The second method is a little more robust: we're going to look at the Backup and Restore tool that was introduced in Windows 7 and is still current on Windows 10.

### File History 00:22-01:24

Using the Windows 10 File History for backing up your computer or your workstation only backs up your files. It won't back up anything else. You can't create a system image or anything like that.

Let's go to the Search bar. We're going to type in ‘Restore', and you can see right here, Restore your file with File History. Okay. We can see that our File History is actively backing up all of our files. We're going to go to Desktop. Let's say you deleted a file, so I had this file that was here at 2:46 p.m., but it's not on my desktop anymore.

Let's say I deleted it by accident or somebody else used my computer and didn't realize that I needed it and they deleted it. You can go to the File History, select the file you want to restore, and click this Restore button, and it'll put the file back to its original position. Now, I can actually access and reopen this file and use it however I like. Because of the settings I set up prior, Windows will continue to back up all my documents and files on my system unless I tell it to stop or I change the settings.

### Backup and Restore 01:24-03:22

Now we're going to take a look at using the Windows backup utility. The second way we're going to restore files is through Windows Backup and Restore. First, we're going to go to our Control Panel again. Here we go. We're going to go to Backup and Restore under System and Security. Okay. Now, from here, we're going to click Restore my files. As you can see, our backup is already complete.

Now, we're going to click Search and look for a file called ‘Goodbye.' You can see it found this file in our backup under Users/Testout/Documents folder. We're going to click OK.

Now we're going to click Next. We can say we want to put it in its original location, or we can choose and select another location. We want to put it on our desktop. Click OK and Restore. That has successfully restored that file to our desktop. Now we can open and use the file.

All right. We can also browse or force files through the backup as well. If we go back to Restore my files and click Browse for files, we can actually go through our backup and browse the file system on the backup for any files we're looking for.

It takes us to this basic Windows backup on the backup drive that we've mounted, and we can view the items. We can restore a favorite from our Favorites, we can browse, and we can restore folders. When we have items to restore in our restore batch, we can click Next, and we can select in the original location, or we can overwrite other files in the same location. It's really just pretty simple to use. Just go back and click Cancel.

In addition to doing direct restorations, we can also select other backups if we want to restore our files. If we select another backup to restore files from, we could click here, and we can see our backup, but we could browse the network for another data file if we have another one somewhere saved up on a network share. Say we have an external drive with a backup on it, and we plug it in. We could then map it from here and restore any data from that backup.

### Summary 03:22-03:37

That's it for this demonstration. We discussed how to restore files via the File History restore setup in Window 10. We also covered how to use Backup and Restore to restore your files.

## 12.8.9 Backup a Domain Controller

### Backing Up a Domain Controller 00:00-00:44

In this demo we are going to do a backup of our domain controller on a Windows Server. To start, you need to install the Windows backup feature. The first thing we need to do is go to Manage, click Add Rolls and Features.

Now we're going to just select Default, Next, Next, past everything until we get to features. Then we're going to scroll down and go to Windows Server Backup. Select it, click next. On the confirm window I can click Install. Then that's going to go ahead and install and that may take a few minutes.

### Windows Server Backup 00:44-02:51

Once that's installed, we can go to our tools all the way down, scroll down to Windows Server Backup. Using Windows Server Backup you can schedule regular server backups, or you can schedule a single backup.

In this case, we're going to just choose Backup Once. However, a good disaster recovery program would do regular backups. We'll click backup once since were not scheduling a backup. Since we have not created any scheduled backups before, you must click different options.

We're going to go ahead and select Next, to backup Active Directory and this is full, you can backup only the systems state. Let's go ahead and click Custom. Click Next, we're going to click add items and we're going to select the System State.

Bare Metal Recovery, will backup all the critical volumes on the computer. It will backup the operating system and all the data volumes if you are doing a bare metal recovery, also sometimes known as an all critical backup, the backup can't be saved on any of the volumes that are being backed up. As well with the system state backup, we can't save the backup on the C drive because that's where the system state exists.

So the system state includes the registry key files, Active Directory and the SYS file. We need to have some other place to store this backup. I've actually connected an external drive to this system currently, so I'm going to click OK.

Click next and you actually also have the ability to save things to remote share folders. If you have some shared storage on your network you could actually go save your backup there.

We're going to select a local drive since it's a drive I have plugged into this local machine. It's my F drive labeled Backup. We're going to click Next, and Backup. Okay, so once this backup finishes, which it will take a while, we'll have a good backup of our active directory and the sys file.

If we need to restore we can come back to this backup later to restore the main domain controller.

### Summary 02:51-03:04

In this demonstration we showed you how to install Windows server backup on your Windows Server and then we used it to backup our domain controller.

## 12.8.11 Restoring Server Data from Backup

### Restore Server Data from Backup 00:00-00:08

In this demonstration, we'll look at how to recover user data on a server.

### Use Windows Server Backup 00:08-02:10

In our File Explorer window, let's go to the Desktop. There, we see we have the Shares folder that we created.

We'll delete this folder; so now it's gone. Let's say we find out later that we need it back. We'll have to restore it from a backup. We'll go to `Tools > Windows Server Backup`.

In the Messages Box the backup we want to use is listed. Let's click it. You can see the information for it. Click OK. Next, we'll click Recover and then click Next.

We can select it and verify here that it's the backup we want to use. Since it's the only one we have available, let's click Next.

Notice that we can recover files or folders. If this were a Hyper-V Server, we could recover a virtual machine if we wanted to. We can recover entire volumes as well.

Applications recovery is interesting. If you backup a server that has applications installed such as, Exchange or SharePoint, you can recover the entire application without having to install the application again.

You have to recover only the data, however. You can use it to recover that application to another server. That means you can transfer the application from server-to-server using the backup.

The last option is to recover files and folders. Select Next.

So, we'll click here. We're going to drill down a little bit and go to the folder that we're missing.

Now, we'll select it. We'll click Next. Then, we'll choose to put it in the original location. We can save it somewhere else if we want to, but we want it in the original location.

Now we'll create copies of both versions just in case. There are a few reasons why you don't want to overwrite existing versions.

### Recover Files 02:10-02:21

If you're restoring a file that somebody said they're missing and they give you the wrong filename, you could possibly overwrite a file that they want to keep. This could cause problems in the future.

### Create Copies 02:21-02:46

It's a good practice to create copies so you don't lose or override something. In that case, you have to go back and recover even more data. Let's go ahead and select, Next, and Recover.

All right, now it states that it is complete. Let's close and minimize the windows. Now, you can see the folder is back in its place.

### Summary 02:46-02:57

In this demonstration, we showed you how to use Windows Restore Data using Windows Server 2019 Backup.
