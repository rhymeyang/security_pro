---
lang: zh-CN
title: Section 5.1 Security Appliances
description: some description
---

As you study this section, answer the following questions:

<ul>
    <li>
     What are the benefits and risks of using proxy servers?
    </li>
    <li>
     What is the purpose of a content filtering server?
    </li>
    <li>
     How can network access controls (NACs) improve a network's security?
    </li>
    <li>
     What is the difference between the intranet and the internet?
    </li>
    <li>
     What are the uses of a demilitarized zone (DMZ)?
    </li>
    <li>
     Why is a honeynet useful?
    </li>
    <li>
     What are the features of an all-in-one security appliance?
    </li>
    <li>
     What size organization should employ a all-in-one security appliance?
    </li>
   </ul>

In this section, you will learn to:

<ul>
    <li>
     Install a security appliance.
    </li>
    <li>
     Configure a security appliance.
    </li>
    <li>
     Configure network security appliance access.
    </li>
    <li>
     Configure Quality of Service (QoS) or traffic shaping.
    </li>
   </ul>

The key terms for this section include:

<table class="terms">
   <thead>
    <tr><th class_="firstTableHeader" scope="col" class="fw-bold">
     Term
    </th>
    <th scope="col" class="fw-bold">
     Definition
    </th>
   </tr></thead>
   <tbody><tr>
    <td>
     Security zone
    </td>
    <td>
     Portions of the network or system that have specific security concerns or requirements.
    </td>
   </tr>
   <tr>
    <td>
     Wireless network
    </td>
    <td>
     A network that does not require a physical connection.
    </td>
   </tr>
   <tr>
    <td>
     Guest network
    </td>
    <td>
     A network that grants internet access only to guest users. A guest network has a firewall to regulate
        guest user access.
    </td>
   </tr>
   <tr>
    <td>
     Honeynet
    </td>
    <td>
     A special zone or network created to trap potential attackers.
    </td>
   </tr>
   <tr>
    <td>
     Ad hoc
    </td>
    <td>
     A decentralized network that allows connections without a traditional base station or router. It allows
        users to connect two or more devices directly to each other for a specific purpose.
    </td>
   </tr>
   <tr>
    <td>
     Intranet zone
    </td>
    <td>
     A private network that employs internet information services for internal use only.
    </td>
   </tr>
   <tr>
    <td>
     Internet
    </td>
    <td>
     A public network that includes all publicly available web servers, FTP servers, and other
        services.
    </td>
   </tr>
   <tr>
    <td>
     Extranet
    </td>
    <td>
     A privately-controlled network distinct from but located between the internet and a private LAN.
    </td>
   </tr>
   <tr>
    <td>
     Demilitarized zone
    </td>
    <td>
     A network that contains publicly accessible resources and is located between the private network and an
        untrusted network, such as the internet. It is protected by a firewall.
    </td>
   </tr>
   <tr>
    <td>
     Proxy server
    </td>
    <td>
     A type of firewall that stands as an intermediary between clients requesting resources from other
        servers.
    </td>
   </tr>
   <tr>
    <td>
     Internet content filter
    </td>
    <td>
     Software used to monitor and restrict content delivered across the web to an end user.
    </td>
   </tr>
   <tr>
    <td>
     Network access
     <br>
     control
    </td>
    <td>
     Software that controls access to the network by not allowing computers to access network resources
        unless they meet certain predefined security requirements.
    </td>
   </tr>
   <tr>
    <td>
     All-in-one
     <br>
     security appliance
    </td>
    <td>
     An appliance that combines many security functions into a single device.
    </td>
   </tr>
   <tr>
    <td>
     Application-aware devices
    </td>
    <td>
     A device that has the ability to analyze and manage network traffic based on the application-layer
        protocol.
    </td>
   </tr>
  </tbody></table>

This section helps you prepare for the following certification exam objectives:

<table class="objectives">
   <thead>
    <tr><th class_="firstTableHeader" scope="col" class="fw-bold">
     Exam
    </th>
    <th scope="col" class="fw-bold">
     Objective
    </th>
   </tr></thead>
   <tbody><tr>
    <td>
     TestOut Security Pro
    </td>
    <td>
     2.1 Harden Physical Access
     <blockquote>
      2.1.2 Install and Configure a Security Appliance
      <br>
      2.1.4 Create and Configure a Demilitarized Zone (DMZ)
     </blockquote>
    </td>
   </tr>
   <tr>
    <td>
     CompTIA Security+ SY0-601
    </td>
    <td>
     3.3 Given a scenario, implement secure network designs.
     <ul>
      <li>
       Network segmentation
       <ul>
        <li>
         DMZ
        </li>
        <li>
         Extranet
        </li>
        <li>
         Intranet
        </li>
       </ul>
      </li>
      <li>
       Network access control (NAC)
      </li>
      <li>
       Network appliances
       <ul>
        <li>
         Proxy servers
         <ul>
          <li>
           Forward
          </li>
          <li>
           Reverse
          </li>
         </ul>
        </li>
       </ul>
      </li>
     </ul>
     4.4 Given an incident, apply mitigation techniques or controls to secure an environment.
     <ul>
      <li>
       Configuration changes
       <ul>
        <li>
         Content filter/URL filter
        </li>
       </ul>
      </li>
     </ul>
    </td>
   </tr>
  </tbody></table>

## 5.1.1 Security Solutions

### Security Solutions 00:00-00:18

There are several aspects of a network system that have their own security concerns. In this lesson, we'll discuss security issue for proxy servers, content filtering devices, and network access control, or NACs.

### Proxy Servers 00:18-03:07

Proxy servers have several uses. They often act as a middle-man between clients and servers. They restrict pass-through traffic based on rules configured on the proxy server, allowing traffic to pass if the conditions are met.

Network administrators also use proxy servers to restrict internet access by implementing blacklists (disallowed sites) or whitelists (allowed sites). In addition to site restrictions, a proxy server can also be configured to restrict protocols. These restrictions can be placed on individual users or on groups of users.

Proxies also have the ability to anonymize users. This obscures a user's identity that may be intercepted by a hacker to gain access and appear as a legitimate user. Many proxy servers also provide web caching, which can speed up internet browsing substantially by servicing web queries locally.

Proxy servers are also used to control internet access. For example, client computers can be configured to use the proxy server when they're traversing the network and requesting internet resources. The proxy server is then configured to intercept all web-based traffic and determine whether to allow it or deny it. It works on behalf of the user, so it provides anonymity if the traffic is intercepted by an attacker.

In many instances, the proxy server also caches information from sites on the internet. When a client computer requests an allowed website, it directs the traffic to the site and caches a copy of it. Then, when the second and subsequent requests for that website are made, rather than go out to the internet to get that site's information, the proxy server provides the content to those systems. This eliminates duplication and speeds up internet queries. At configured intervals, the proxy server re-caches website information so the cache doesn't become stale.

It's also possible to use proxy servers for malicious purposes. For example, attackers can place a proxy server in a network to steal information and provide malware to users. When this is done, it's possible for users to unknowingly give away credential information when they think they're communicating with a valid website. Spammers could also install a malicious proxy server via email attachments.

Now, in addition to attacks from without your company, you also need to protect your network from your employees. A nefarious employee could install a proxy server to circumvent network security, mask nefarious activity on the network, and bypass security controls. As such, network administrators must take precautions and block unauthorized proxy servers.

### Content Filtering Server 03:07-04:32

Now let's look at content filtering servers. A content filtering server can deny or allow users access to certain websites. Content filtering servers typically have one of two configurations. Either you allow all content except for what you decide to ban, or you block all content except for what you decide to allow. These controls are implemented through security levels, whitelists, blacklists, and category levels.

A content filter is designed to give network administrators and management the ability to block unwanted or inappropriate website browsing. For example, several organizations have guidelines stating that users can't visit adult sites, gambling, or shopping sites while at work. A content filter can be put in place, and the network administrator can configure the filter to prevent users from visiting these types of sites.

Most often, the content filter allows everything except sites and categories that are blocked via a blacklist. For additional flexibility, security groups can be configured to allow or prevent site access by group.

New websites are created every day, so the filters must be updated regularly, like virus definitions. Most content filtering servers have an online subscription service to update websites and website categories at certain intervals, usually daily or weekly.

### Network Access Control 04:32-05:57

Our last security concern involves network access control, which attempts to unify endpoint security. The simplest form of control is often used with 802.1X, an authentication protocol for port-based security. Full network access control provides much more.

Network Access Control gives security administrators the ability to define the security measures that must be in place for a computer to access the network. With these in place, end devices can't access the network unless they meet predefined requirements.

There are several components to consider when defining a policy that, when met, will allow an end device access to the network. They include making sure that antivirus or anti-malware software is installed and that you have up-to-date antivirus definitions. You should also ensure that you have an active firewall and that the latest operating system patches and updates are installed.

If a client passes the required health check, they're allowed on the network. If not, the client receives restricted access to a remediation network so that remediation servers can get the client up to date. Once the client meets all criteria, it's granted access to the production network. Several vendors provide network access control solutions, include Cisco and Microsoft.

### Summary 05:57-06:23

And that's it for this lesson. We reviewed the use of proxy servers, and how they can be abused. We discussed content filtering servers, which restrict access to certain types of websites. We ended with a review of network access controls and how they determine whether an end device is allowed access to a production network based on its health.

## 5.1.2 Security Zones

### Security Zones 00:00-00:38

In this lesson, we're going to discuss security zones. Security zones are portions of the network that have specific security concerns or requirements. All devices within the same zone have the same security access and security protection needs. These zones are often separated by a traffic control device, such as a firewall or a router, that filters incoming and outbound traffic.

For example, you can define a zone that includes all hosts on your private network that need to be protected from the internet. You can also define a zone within your network for controlled access to specific servers that hold sensitive information.

### DMZ 00:38-01:46

There are several types of security zones that can be implemented. Let's start with a security zone known as a demilitarized zone, or DMZ.

The DMZ is used as a public-facing accessible network. It acts as a buffer and a barrier to your internal production network, which is accessible from the internet. A DMZ can be configured using either one or two firewalls and acts as the middleman between the internet and your internal network.

For example, a DMZ is often used to allow employees access to critical network components, such as email servers, VPN connections, and internal web servers, from outside the company. DMZs are also used to provide customer access to a company's products, such as software.

To do this, the firewall allows traffic from the internet into the DMZ and enables those resources to access resources on the production network. The servers placed in the DMZ are typically configured as a bastion host. A bastion host is a server that's specifically designed and configured to withstand attacks. In general, they're specific-purpose systems that host a single application and are hardened to resist attacks.

### Extranet 01:46-02:40

Another type of security zone is an extranet zone.

An extranet can be set up to give a partner organization access to some of your internal resources. Whatever resources the partner has access to is considered the extranet. Think of it as an extra or separate part of your intranet. It's similar to a DMZ because you're allowing parties outside of your organization a zone to access to some of your systems or data.

Typically, the host provides access to the partner organization through a VPN connection and uses access control to manage their access. A WAN link could also be used.

Extranet access is controlled, restricted, and managed by system managers to provide only the services and resources required by the partner organization to provide goods and services to the hosting company. The resources made available through your extranet may include inventory levels, departmental email, and supply orders.

### Intranet 02:40-03:16

Another important zone to remember is the intranet. This term is often mistaken for the internet, but it's very different. The intranet is the internally facing part of an organization's network that's only accessible to internal users. It could be used to house all kinds of systems that you only want accessible from within the network or your organization's buildings.

Keep in mind that in some cases, the term intranet may only refer to an internal web server that provides links to resources for internal staff. It may be in the form of a website landing page or a portal.

The wireless network zone is a broadcasted network connection used within an organization where users don't need a physical connection to a network port to connect to the intranet or internal resources.

### Wireless Zone 03:16-03:42

Instead, they use a wireless connection on their device to connect to a wireless access point. For internal users, the effect is the same as if the user's device had a physical connection and provides access to internal resources.

### Guest Network 03:42-03:53

Several organizations also create a guest network that allows non-internal staff to access the internet. In some cases, guests may also be granted access to a few limited internal resources.

### HoneyNet 03:53-04:22

A honeynet contains servers designed to trap attackers. The servers, or honeypots, contain intentional vulnerabilities to lure attackers. Attackers believe they're accessing vulnerable systems, but they're really inside a trap. Honeypots are designed to mimic production servers that would be found in a typical organization. Of course, they contain no real company information, so there's little risk of exposure. The honeypots track attackers' attention, and they can generate extremely useful security information.

### Ad hoc Network 04:22-05:03

An ad hoc network is a decentralized network that allows connections without a traditional base station or router. It allows users to connect two or more devices directly to each other for a specific purpose. Ad hoc is a Latin term that translates to "for this," and ad hoc networks are usually temporary solutions for a specific task.

Ad hoc connections can be wired or wireless. If you're connecting two systems with an Ethernet cable, it must be a crossover cable. An ad hoc network can also be created using Wi-Fi. Of course, the Wi-Fi parameters and protocols must match and be compatible with each other, including the SSID, security, and encryption settings.

### Network Address Translation 05:03-05:45

Network Address Translation, or NAT, provides global IP address conversion for the entire network and is usually performed by your internet gateway, or NAT server. NAT allows network administrators to manage IP addresses within the internal network using whatever private IPs they want. When a user needs to access the internet, the NAT server then translates these internal private IP address to public IP addresses that the internet can recognize.

The organization's internet service provider can supply one or more internet routable IP addresses and assigns them to the organization.

When information returns, the internet gateway converts the public address back to the private address and sends it on to the private network and user.

### Summary 05:45-06:31

That's it for this lesson. In the video, we discussed several types of security zones. First, we discussed the demilitarized zone, where servers are placed for public access. Next, we discussed extranets and intranet zones, which are used for partner access and internal users.

We talked about wireless zones, which allow employees to access internal resources using Wi-Fi and provide guest networks that limit access. We talked about honeynets, which are used to trap attackers and gather information. And we ended this lesson by discussing Ad hoc networks, which are used for temporary connectivity between two or more devices, and NAT servers, which convert private IP addresses to public IP addresses.

## 5.1.3 Security Zone Facts

This lesson covers the following topics:

<ul>
   <li>
    Security zones
   </li>
   <li>
    Security zone networks
   </li>
   <li>
    Common security zones
   </li>
  </ul>

### Security Zones

Security zones are portions of the network or system that have specific security concerns or requirements. All devices with the same zone have the same security access and security protection needs. These zones are often separated by a traffic control device, such as a firewall or a router, that filters incoming and outbound traffic. For example, you can define a zone that includes all hosts on your private network protected from the internet. You can also define a zone within your network for controlled access to specific servers that hold sensitive information.

### Security Zone Networks

The following table lists types of networks found in your security zones:

<table>
   <thead>
    <tr><th class_="firstTableHeader" scope="col" class="fw-bold">
     Network Type
    </th>
    <th scope="col" class="fw-bold">
     Description
    </th>
   </tr></thead>
   <tbody><tr>
    <td>
     Wireless
    </td>
    <td>
     A wirelessly broadcasted network is used on most internal networks so that internal users do not require
      a physical connection to a router or switch.
    </td>
   </tr>
   <tr>
    <td>
     Guest
    </td>
    <td>
     A guest network at an organization often grants internet access 
		only for guest users, but it also has some
      type of firewall to regulate that access. There could be limited internal resources made available on a guest network.
      Normally, it is just a way for guests to access the internet without being allowed on the intranet or internal network.
    </td>
   </tr>
   <tr>
    <td>
     Honeynet
    </td>
    <td>
     A honeynet is a special network created to trap potential attackers. Honeynets have
      vulnerabilities that lure attacks so that you can track their actions and protect your real network. Honeynets can generate
      extremely useful security information.
    </td>
   </tr>
   <tr>
    <td>
     Ad hoc
    </td>
    <td>
     An ad hoc network is a decentralized network that allows connections without a traditional base
      station or router. It allows users to connect two or more devices directly to each other for a specific purpose.
    </td>
   </tr>
  </tbody></table>

### Common Security Zones

The following table lists common zones:

<table>
   <thead>
    <tr><th class_="firstTableHeader" scope="col" class="fw-bold">
     Zone
    </th>
    <th scope="col" class="fw-bold">
     Description
    </th>
   </tr></thead>
   <tbody><tr>
    <td>
     Intranet
    </td>
    <td>
     An intranet is a private network (LAN) that employs internet information services for internal use
      only. For example, your company network might include web servers and email servers that are used by company employees.
    </td>
   </tr>
   <tr>
    <td>
     Internet
    </td>
    <td>
     The internet is a public network that includes all publicly available web servers, FTP servers,
      and other services. The internet is public because access is largely open to everyone.
    </td>
   </tr>
   <tr>
    <td>
     Extranet
    </td>
    <td>
     An extranet is a privately controlled network distinct from the intranet but located between the
      internet and a private LAN. An extranet is often used to grant resource access to business partners, suppliers, and even
      customers outside of the organization.
    </td>
   </tr>
   <tr>
    <td>
     Wireless
    </td>
    <td>
     A wireless zone is a broadcasted network connection used within an organization. 
		Users
      don’t need a physical connection to a network port to connect to the intranet or internal resources. Instead they use a
      wireless connection on their device to connect to a wireless access point.
    </td>
   </tr>
   <tr>
    <td>
     Demilitarized zone
    </td>
    <td>
     A demilitarized zone (DMZ) is a network that contains publicly accessible resources. The DMZ is located between the
        private network and an untrusted network (such as the internet) and is protected by a firewall.
     <br>
     <p>
      A bastion host is a server that is exposed to attacks by untrusted networks. It can be placed inside the
        DMZ or exposed on the public network.
     </p>
    </td>
   </tr>
  </tbody></table>

## 5.1.4 All-In-One Security Appliances

### All-In-One Security Appliances 00:00-00:34

An all-in-one security appliance incorporates multiple security functions into a single piece of hardware. Unified Threat Management, or UTM, is the most common all-in-one appliance.

UTM puts several key security components into a single device that's usually managed using a web interface. A manufacturer subscription for updates may also be required. In this lesson, we'll identify and describe the functions UTM devices can provide.

### UTM Features 00:34-01:15

All-in-one security appliances are useful in several situations. For example, a small organization that doesn't have the budget to buy a separate firewall, spam filter, router, and switch can address all of these in one device, usually contained within a single box. This saves space, power consumption, and cooling requirements.

All-in-one devices also work well for remote offices. A remote office typically doesn't have room for multiple security components or a technical person to manage them. A security administrator will probably manage the site remotely, making it convenient to have one interface to access several functions.

### Integrated Security Features 01:15-02:20

Let's look at some of the functionality that's commonly implemented in all-in-one security devices.

One of the first features is URL filtering, which prevents users from accessing URL categories that are restricted by the organization. These often include pornographic, shopping, and gambling sites.

Another featured is content inspection. This helps to ensure that HTTP connections and content meet certain criteria. For example, many content filters actively monitor data streams by inspecting the packets in search of viruses, Trojans, worms, and other malicious code.

These devices also include a spam filter to reduce the chance that your users' mailboxes will fill up with junk email. The UTM will also probably include a firewall so you can set up rules and log traffic to and from the network. Many devices include an integrated intrusion detection or prevention system that alerts you if a network attack attempt is detected or prevented.

### Integrated Network Features 02:20-03:03

An all-in-one device typically contains networking features as well as UTM features. These network features include an integrated switch. For small and remote offices that only have a handful of systems, a small integrated switch provides all the connectivity required. As part of switching, the device may include a network router that allows you to connect to a network backbone using an uplink port.

The device may also support traffic shaping or QoS to prioritize one type of traffic over another. For example, if the organization is using voice over IP phones, the all-in-one appliance can give voice traffic priority over normal data traffic.

### Summary 03:03-04:14

So, the question is, "Are these all-in-one security appliances a good thing? Is it a good idea to implement them?" It depends.

All-in-one security appliances have their place. They provide unified threat management for small and remote offices. They generally host a full suite of security features in a single appliance. They often integrate networking features to complete the circle.

If you're dealing with a small office or a limited budget, they could be your best option because they do many things reasonably well. However, they don't do any one thing extremely well. If you need to have the best performance from an individual component--for example, a network switch, network router, spam filter, or firewall--you should consider implementing the individual security or network component designed and optimized for that function.

But as a whole, all-in-one appliances work fairly well. It's definitely better to have a network appliance that's doing all these functions reasonably well than to be missing certain components from your network strategy.

## 5.1.5 Security Solution Facts

This lesson covers network security solutions.

### Network Security Solutions

The following table lists additional network security solutions that can be configured to increase network security:

<table>
   <thead>
    <tr><th class_="firstTableHeader" scope="col" class="fw-bold">
     Device
    </th>
    <th scope="col" class="fw-bold">
     Description
    </th>
   </tr></thead>
   <tbody><tr>
    <td>
     Proxy server
    </td>
    <td>
     A proxy server is a type of firewall that stands as an intermediary between clients requesting resources from other
        servers. A proxy server is often called an application-level gateway because it performs filtering at the 
		Application
        layer. Proxies can be configured to:
     <ul>
      <li>
       Restrict users on the inside of a network from getting out to the internet.
      </li>
      <li>
       Restrict access by user or by specific website.
      </li>
      <li>
       Restrict users from using certain protocols.
      </li>
      <li>
       Use access controls to control inbound or outbound traffic.
      </li>
      <li>
       Shield or hide a private network to provide online anonymity and make it more difficult to track web surfing
          behavior.
      </li>
      <li>
       Cache heavily accessed web content to improve performance.
      </li>
     </ul>
     <p>
      Proxy servers can also be a security risk and can be used to circumvent network security and even attack a network.
     </p>
    </td>
   </tr>
   <tr>
    <td>
     Internet content filter
    </td>
    <td>
     An internet content filter is software used to monitor and restrict content delivered across the web to an end user.
        Companies, schools, libraries, and families commonly use content filters to restrict internet access, block specific
        websites, or block specific content.
     <ul>
      <li>
       Two types of configurations are commonly used, which are:
       <ul>
        <li>
         Allow all content except for the content you have identified as restricted.
        </li>
        <li>
         Block all content except for the content you have identified as permitted.
        </li>
       </ul>
      </li>
      <li>
       Allowed or blocked content is identified by the following:
       <ul>
        <li>
         Whitelists identify allowed sites or content.
        </li>
        <li>
         Blacklists identify disallowed or blocked content.
        </li>
        <li>
         Category levels use classification to block content based on content type.
        </li>
       </ul>
      </li>
      <li>
       Common methods for restricting content include:
       <ul>
        <li>
         Categorization of the content (such as sport sites, gambling sites, etc.)
        </li>
        <li>
         URLs
        </li>
        <li>
         DNS
        </li>
       </ul>
      </li>
      <li>
       Parental controls is content filtering software used by parents at home to monitor and restrict child web
          access.
      </li>
      <li>
       Content filtering software can be expanded to include email, instant messaging, and other applications in addition to
          web content.
      </li>
      <li>
       Most internet content filters can also block pop-ups and filter spam.
      </li>
      <li>
       Keyword filtering can be configured to block the results of searches on specific words.
      </li>
     </ul>
    </td>
   </tr>
   <tr>
    <td>
     Network Access Control
     <br>
     (NAC)
    </td>
    <td>
     Network Access Control (NAC) controls access to the network by not allowing computers to access network resources unless
        they meet certain predefined security requirements.
     <ul>
      <li>
       NAC attempts to unify endpoint security by defining the security measures that must be in place for a computer
          requesting access to the network.
      </li>
      <li>
       NAC requires a NAC agent (software to monitor the health of a machine) to be installed on each computer as part of
          the security requirements for computers attempting to gain access.
      </li>
      <li>
       A client determined healthy by the NAC agent is given access to the network.
      </li>
      <li>
       An unhealthy client (one that has not met all the checklist requirements) is either denied access or can be given
          restricted access to a remediation network. After this, remediation servers can help the client become compliant.
      </li>
      <li>
       NAC is often used with 802.1x as an authentication protocol for port-based security. In addition to meeting
          authentication requirements, the client must also meet health requirements before access 
			is granted through
          802.1x.
      </li>
      <li>
       Microsoft's version of the NAC security tool is Network Access Protection (NAP).
      </li>
     </ul>
    </td>
   </tr>
   <tr>
    <td>
     All-in-one security appliances
    </td>
    <td>
     All-in-one security appliances combine many security functions into a single device. All-in-one security appliances are
        also known as unified threat security devices or web security gateways
     <i class="fs-italicize">
      .
     </i>
     This type of device may be the best choice
        for:
     <ul>
      <li>
       A small company without the budget to buy individual components.
      </li>
      <li>
       A small office without the physical space for individual components.
      </li>
      <li>
       A remote office without a technician to manage the individual security components.
      </li>
     </ul>
     <p>
      Security functions in an all-in-one security appliance can include:
     </p>
     <ul>
      <li>
       Spam filters
      </li>
      <li>
       URL filters
      </li>
      <li>
       Web content filters
      </li>
      <li>
       Malware inspection
      </li>
      <li>
       Intrusion detection systems
      </li>
     </ul>
     <p>
      In addition to security functions, all-in-one security appliances can include:
     </p>
     <ul>
      <li>
       Network switches
      </li>
      <li>
       Routers
      </li>
      <li>
       Firewalls
      </li>
      <li>
       Tx uplink (integrated CSU/DSU)
      </li>
      <li>
       Bandwidth shaping
      </li>
     </ul>
    </td>
   </tr>
   <tr>
    <td>
     Application-aware devices
    </td>
    <td>
     An application-aware device has the ability to analyze and manage network traffic based on the 
		Application layer
        protocol that created it. Some of these devices can also apply quality of service (QoS) and traffic-shaping rules based on
        the application that created network traffic. Consider the following examples:
     <ul>
      <li>
       An application-aware firewall can enforce security rules based on the application that is generating network traffic
          instead of the traditional port and protocol.
      </li>
      <li>
       An application-aware IDS or IPS can analyze network packets to detect malicious payloads targeted at
          Application layer services (such as a web server).
      </li>
      <li>
       An application-aware proxy manages traffic based on the Application layer protocols they support, such as FTP or
          HTTP. This allows the proxy to perform two key functions:
       <ul>
        <li>
         Prevent the application client from performing undesirable actions. For example, an FTP proxy could be configured
              to allow FTP clients to perform downloads but inhibit uploads.
        </li>
        <li>
         Improve application performance. For example, an HTTP proxy can be configured to cache frequently accessed web
              pages.
        </li>
       </ul>
      </li>
     </ul>
    </td>
   </tr>
  </tbody></table>

## 5.1.6 Configuring Network Security Appliance Access

### Configuring Network Security Appliance Access 00:00-00:23

In this demonstration, we're going to secure access to our LAN and WAN interfaces and configure IP addresses to them. We're also going to work with user accounts on a network security appliance. We're using a pfSense security appliance, which has a graphical interface for configuration that's accessible through a web browser.

### Sign In 00:23-00:35

I'm here at the login screen, and I'll sign in with the default username of ‘admin'. For this pfSense device, the default password is ‘pfsense'. I'll click Sign In to log on.

### Configure LAN Interface 00:35-02:13

The first thing I want to do is configure the IP address on my WAN and my LAN. We'll start with the LAN settings. Go up to Interfaces > LAN, and that takes us to the LAN configuration page. If I look here, the IPv4 Configuration Type is set to Static IPv4. DHCP is the other option there. I need to change it to a different IP address. I want to change it to ‘10.10.10.1', so I'll do that now. Now I want to confirm that my subnet is set to the /24 subnet mask. That's all I need to do on this page. I'll scroll down and click Save.

The page refreshes and says that the LAN configuration has changed, and I need to click Apply Changes for it to take effect. It reminds me to change my DHCP server configuration if needed. Since my IP address is in the same subnet range as it was before, my DHCP configuration is still okay. Just make sure the IP you assigned is not in the scope of IPs you've configured to be leased. Click Apply Changes.

Now, if you look up at my address, you'll see that it says 10.10.10.254. When I log back in, I need to go to the new address that I configured. I've found that you sometimes get a token error if you just try to log back in, so I'm going to close my web browser and open it back up.

Now let's type in '10.10.10.1' to get back to our Sign In page. I'll put my credentials back in here and click Sign In. I'll go back to my LAN interface, and you can see that my changes are there.

### Configure WAN Interface 02:13-03:12

Now let's configure our WAN settings. Once again, I'll go to Interfaces. But this time, I'll select WAN from the list. Right now, I'm getting an IP for my WAN interface via DHCP. I want to configure this with a static IP, so I'll change that to Static IPv4 from our IPv4 configuration type.

Now, for an IP address, I'll give it ‘192.168.25.254'. Right away, you might be saying, "Hey, that's a Class C Private IP address." If so, you're absolutely correct. I'm on a test network that's connected to my regular network, which is using the 192.168 scheme. I need to set my subnet mask to /24 here. For this demo, I'm not going to configure DHCP version 6. I'm going to leave everything else set to the defaults and click Save to continue.

I get a few reminders, just like we did with the LAN configuration. I'll click Apply Changes.

### Configure WAN DNS 03:12-04:43

Now I want to configure the DNS that my WAN will use. A lot of devices will have those settings right here, with the WAN settings. But with this device, we need to go up to System > General Setup.

I'm going to add a few DNS servers here. But first, let's take a look at the current status of our WAN interface. To do that, I'll go to Status > Interfaces. Here, we see that my DNS server is using the home address of 127.0.0.1. IPv4 network standards reserve the entire address block 127.0.0.0/8 for loopback purposes, so this is normal. I want to change those to a different DNS, so let's go back to System > General Setup. Beneath DNS Server Settings, I'll put in the Google DNS IP of ‘8.8.8.8'. Now I'll click the Add DNS Server button, and this time, I'll put in the other Google DNS IP of ‘8.8.4.4'.

I'm going to check this box, Disable DNS Forwarder. For this demo, I don't want my local host, 127.0.0.1, to be used as my first DNS server. Checking the box will remove the local host DNS. I'm only doing this to demonstrate what happens when you check the box. I'll scroll down to save these settings.

Now let's look at the status of our interfaces. We can see our DNS settings are now set to the Google DNS servers.

That wraps up configuring IP interfaces.

### Add User 04:43-06:04

Now let's add an additional user to our pfSense appliance. To add a user, we need to go up to System > User Manager. You can see here that we have just one user, the admin user. It's good practice not to use the admin account for normal maintenance. You usually want to create a separate account for each person that might mange the device, collect logs, and so on. We can also track the logon and logoff events of the users in case something happens.

I'll add the user by going over and clicking the Add User button. I'll enter in a username of ‘Rachel McGaffey'. I'll give Rachel a password, and I'll put the password in a second time to confirm it. Now, under Full Name, I'll enter in ‘Rachel McGaffey'. That's really all that's required. But if I wanted to, I could check this box to customize the GUI for Rachel's account. Let's take a look at some of those options.

After I check the box, I get some more options. I can change the theme for her account from this dropdown list. We can change the top navigation of the page here. We can change how the hostname appears in the menu and change the amount of dashboard columns. If we want things like WAN and LAN to be sorted alphabetically, we can change that too. If we have groups set up, we can change the memberships here. But we won't make any changes to these right now. Let's come down and click Save.

### Session Timeout 06:04-06:40

One thing we don't want to happen with our security appliance is have someone logged in to it make configuration changes. If a user gets called away from his or her desk and doesn't sign out, anyone can sit down at their computer and start messing around. To mitigate this risk, we want to configure Session Timeout. I'll click on the Settings tab. Under Session Timeout, I'm going to change this to 10 minutes. That is actually a long time, and you might want to set this to a lower amount of time. Having no timeout is a huge security risk. You'll have to judge your circumstances and decide what session timeout settings are best.

### Change Default Admin Password 06:40-07:24

The last thing I want to do in this demo is change the default admin password. Default passwords for devices are easy to find with a simple web search. It's such a problem, some US states and other governments have forced many tech manufacturers to make the devices they produce have random passwords. Even if your device comes with a random password already configured, those passwords are often printed on the device somewhere, so it's always recommended that you change it—that should be the very first thing you do.

To change this password for the admin account, I'll click on the edit icon here. I'll type in my new password. Now I'll type it a second time to confirm it. Come down and click Save, and that's all there is to it.

### Summary 07:24-07:48

That's it for this demonstration. In this demo, we configured a network security appliance. We configured the LAN and WAN IP addresses. We changed the WAN DNS. We created a second account on the device. We configured a session timeout. We ended the demo by changing the default admin password to something more secure.

## 5.1.9 Configure QoS

### Configure QoS 00:00-00:34

In this demo, we're going to configure Quality of Service, or QoS. QoS is the technology that manages data traffic to help reduce packet loss, prevent latency, and minimize jitter on the network. With QoS, we can control and manage network resources by setting priorities for specific types of data on our network. Before we get started, be aware that pfSense refers to Quality of Service as Traffic Shaping, so I might use either term in the demo, but I'm talking about the same thing.

### Use the Wizard to Create 00:34-00:57

From our pfSense Dashboard, we want to go up to Firewall > Traffic Shaper, and we'll select the Wizard. Here, we have two choices, Multiple Lan/Wan and Dedicated Link. I'm going to choose Dedicated Link.

It says to enter the number of WAN connections. I only have one, and it's already set to the number 1, so I'll just leave it. Click Next.

### Connection Parameters 00:57-03:09

I want to configure traffic shaping on our Guest Wi-Fi for this demo. Under Local interface, I can pick the correct interface from the dropdown menu.

On the next dropdown, which is also called Local interface, we have three options. To cover what each of these do in detail would take more time than what we have in this demo, but I'll try to sum it up.

The first choice, PRIQ, or Priority Queueing, is the easiest to configure and the easiest to explain, so let's start there. PRIQ does traffic shaping by priority. Let's say we have high priority, default priority, and low priority. The high priority always gets to go first, no matter what. Pretend that our packets are lined up into three lines, one for each level of priority. The high priority line goes first. But just as it gets down to the last packet, here comes a bunch more. Before the other two lines get to go, all the high-priority traffic gets to keep going. Finally, the line for high priority is empty, and the default line gets to go. But after a handful of packets go, her come more high-priority packets. This can be constant, and in the low priority line, they never get to go. This is called starvation. You can see why PRIQ might not be the best choice.

Next, let's talk about CBQ, or Class-Based Queueing, because it's a little like PRIQ except that each line is assigned some bandwidth. So, in this case, we might say we'll allow ten packets from the high priority line to go, five from the default line, and then one from the low priority line. This prevents starvation of the lower-priority traffic.

Finally, HFSC, or Hierarchical Fair Service Curve, also allows all priorities to have a chance to pass through. You have the ability to tweak HFSC's performance, but it can be very complicated to set up. For this demo, we're going to keep is simple and go with PRIQ.

Let's move this demo along now. We're going to choose WAN for the WAN interface and, once again, choose PRIQ.

For the Upload, we're going to choose four megabits per second. And for our Download, we'll do 50 megabits per second. Click Next.

### VOIP Settings 03:09-03:25

This takes us to the Voice over IP page. Normally, by default, this box is not checked. I'm going to uncheck it because I'm not going to prioritize VOIP. This is a Guest Wi-Fi, and I don't think this traffic will be on that segment of my network. Click Next.

### Penalty Box 03:25-04:20

If you have one or more hosts on your network that are using too much bandwidth, you can place them in a penalty box that will lower the priority of the traffic from their IP. If you need to list more than one host, you'll need to create an alias. When you put the host in the penalty box, that lowers the priority of their traffic from an IP or alias. If you have just one user, you just enter their IP address in here. If you have more than one, you create an alias and group those IPs together. Let's look at that for a minute. I have this other tab open. I got to Aliases by going to Firewall > Aliases. From here, you fill in the name and give it a description and type. This is where you would start to put in the IP addresses of the hosts that you want in the penalty box. Click Add Host to keep putting in IPs.

All right. Let's go back to our Traffic Shaper page and click Next.

### Peer-to-Peer Networking 04:20-05:02

Now we have the Peer-to-Peer Network dialog. Checking this box lowers the priority of peer-to-peer networking.

Right below this is an interesting option, p2p Catch All, or Peer-to-Peer Catch All. If I check this box to enable it, the system will consider all traffic it can't identify as peer-to-peer. This might sound good, but if you suddenly have a new type of good traffic and pfSense doesn't know what it is, it'll becomes low priority, and that might be bad. I don't like using this option for that reason.

We already lowered Peer to Peer above. We could check all of these, but for the sake of time, I'll just enable BitTorrent here, scroll down, and click on Next.

### Network Games 05:02-05:14

Our next page is Network Games. Enabling this gives your games a higher priority than most traffic. You would then select the games you want. I'm just going to scroll down and click Next.

Raise or Lower Other Applications 05:14-06:48
Now we can decide if we want to raise or lower other applications. By default, this is not checked, so I'll go ahead and check it. It says, "This will help raise or lower the priority of other protocols higher than most traffic." For example, for Remote Desktop Protocol, I might want to have a higher priority. It's already set to that, so I'm good. I know this is my Guest Wi-Fi network, but if it was my LAN, that's what I would want. I set the others to a low priority previously.

Here, I have a variety of messengers that I can adjust.

For my VPN, I might want to give my IPSEC a high priority. I might use my VPN a lot and really depend on it, so I want it to have the highest priority.

For Multimedia and Streaming, we have RTSP, or Real Time Streaming Protocol. This is used for streaming video, such as from media servers or even IP cameras. You might want that to have high priority. Real Time Messaging Protocol is a protocol owned by Adobe for real-time streaming of video, audio, and data between a server and Flash player. Even though Flash is going away, the protocol is still popular.

Here, our regular HTTP traffic is set to default priority. I'll just leave the rest of these alone, scroll down, and click Next.

On the next page, we have our Finish button. When you click Finish, pfSense makes rules for all the things we selected in the Wizard, and this might take several minutes. I'll click Finish. Now I'll pause the demo until the page refreshes.

### Review the Settings and Rules 06:48-07:27

All right. All the rules are created, and it's brought me to this page. You can see that it created a hierarchical view for my Traffic Shaper. What it actually created are firewall rules, so let's look at those now. Go to Firewall > Rules and then go to the Floating tab. You can see all these rules that were created for us. Now, let's say we want to change one of the rules. For example, perhaps we use Remote Desktop Protocol, but use a custom port number instead of the default, 3389. We can edit the rule here. I'll scroll down, and I could change the port. I would then scroll down to the bottom of the page and save the settings.

### Summary 07:27-07:39

That's it for this demo. We configured Quality of Service, or Traffic Shaping, on our Guest Wi-Fi network.

## 5.1.11 Attack Deception

### Attack Deception 00:00-00:34

In this lesson we'll discuss attack deceptions. By now you should have a clear understanding of what an attack is and what it looks like. Threat agents are working hard to find weaknesses in your defenses. They will exploit any vulnerability to gather information from an organization's network system.

Knowing this, organizations can set up data or add devices to their networks that lures unsuspecting attackers into attacking devices. The attacking devices are designed to trap attackers and prevent them from exfiltrating any useful information.

### Honeypots 00:34-02:41

The first item we'll look at is the honeypot. As the name implies, if you look inside, you'll find will find something sweet. A honeypot is a network set up to fool an attacker into thinking he's attacking a network device critical to your company; however, it's simply a ruse. The attacker can attack the honeypot as long as he wants and get as deep as he wants; however, there is no prize or honey in the end.

A honeypot can be a host, a service on a host, a network device, a virtual entity, or even a single file set up to attract attackers to a secure area away from an organization's real network. Even better, while it's distracting the attacker, you can monitor the malicious activity to learn what the attacker is trying to do.

For example, if an attacker attempts an exploit or upload a rootkit or Trojan to a server, the honeypot environment will safely store those files for malware collection and analysis.

There are several types of honeypots that are designed to mimic and trap different types of attacks. Each honeypot falls into one of two categories: research or production. Research honeypots are typically used by research, military, or government organizations to gather information about the motives and tactics of the attackers. They are also used for educational purposes. Production honeypots are used, primarily by private and public organizations.

Let's look at a few examples of production honeypots.

First, you have the SSH honeypots. SSH honeypots are designed to trap brute force attacks that attempt to guess the password of a targeted device. Perhaps more importantly, this type of honeypot captures the complete shell history performed by the attacker. Next, we have HTTP honeypots. This type of honeypot is used to trap different types of web vulnerabilities such as SQL injections, file insertions, and web application attacks.

We also have WordPress honeypots which are designed to attract spam and adware attacks. An email honeypot is used to attract SMTP-based attacks such as open relay, DDoS, and spam attacks. And lastly, there are several types of honeypots designed for TCP/IP-based protocol attacks.

### Honeynets and Honeyfiles 02:41-05:08

To make things more enticing to the attackers, many companies will create a decoy network and fill it with one or more honeypots. This is known as a honeynet. The information gained from a honeynet attack serves to strengthen an organization's defense against future attack.

Similar in concept to a honeypot, a honeyfile is a single file setup to entice and trap attackers and to figure out what they're trying to do. These types of files are typically set up on a file server, and when accessed, an alarm is set off notifying that administrators of the attack. These types of alarms are often sent by email directly to the user, which can also be easily seen on a phone and almost instantly interpreted. Honeyfiles are named so the hacker will try and open or execute them. For example, files with names such as passwords.txt or IP Assignments.xls are prized targets for hackers to gain useful information about a user or system.

When it comes to honeyfiles, attackers are typically interested in four types of files. First, are the informational files. These are the types of files that contain information about access other systems, like a password.txt file, and security files like Microsoft word file named vpn_instructions. The second type are application or program files that an attacker may run, but the normal user wouldn't, such as a complier. Third, hackers love to attack files that contain evidence of an attack such as log files. The last type of file commonly targeted by attackers are files that might contain intellectual property such as a forecast, credit card numbers, and product roadmaps.

As you can see, honeyfiles protect a wide variety of files and systems including email and email attachments. Although we've pointed out the four major types of file that attack hackers, keep in mind that any file can be used as a honeyfile. Honeyfiles also work with network intrusion detection systems, or NIDS, and help to prevent false positives.

The other nice thing about honeyfiles is that if end users are properly trained, they can create their own honeyfiles and set up their own alarms and alerts. Enabling users makes the detection process easy and deployment effectiveness is high.

Since users create their own honeyfiles, they receive the alarm if they accidentally access one of their own monitored files. This virtually eliminates false positives that have be investigated. This saves time, effort, and energy for system management charged with keeping the network secure. Further, this process supports a defense-in-depth strategy.

### DNS Sinkhole 05:08-06:53

Now let's shift gears and discuss DNS sinkholes.

Simply put, a DNS sinkhole is used to provide false information for DNS queries. Although this may sound counterintuitive, providing false information can help to prevent a denial-of-service or distributed denial-of-service attack. DNS sinkholes are an effective measure that blocks malicious traffic and blocks bots from successfully taking a site down using a DDoS attack.

It's important to understand that a DNS sinkhole is not a product. Instead, it's a method used by system management to fool an attacker by providing bogus information. For example, suppose a bot attempts to use DNS to forward information. The DNS server returns fake information and the bot can't continue its malicious activity. As another example, supposed an attacker sends a malicious email to an unsuspecting user. Should the user click the link in the email, the DNS sinkhole would prevent the attack by resolving the DNS query to a false site.

Creating a DNS sinkhole is not without its limitations. To work correctly, the malware must use the organization's DNS server. If it uses a public DNS server or its own DNS server, this won't work. You can mitigate this by configuring firewalls to block DNS queries going outside the perimeter.

It's also important to understand that a sinkhole doesn't prevent malware and can't prevent malware execution or remove malware from the system. However, the DNS server will be configured with potential malware sites.

Creating a sinkhole can take time. Even if obtained from trusted internet sources, its possible legitimate sites are used to forward malicious content. This could result in restrictions to legitimate websites. Therefore, sinkholes should be internal only. If attackers can access the DNS server externally, they can change entries in the sinkhole and use it to their benefit.

### Fake Telemetry 06:53-08:05

While many threat agents are looking for open and available vulnerabilities, others are looking to infiltrate a network's defenses and either copy intellectual property or damage internal systems. It's truly a cat and mouse game played by attackers and network managers. Attackers are always trying new techniques to perform their reconnaissance and discover weakness they can exploit. One method used by system managers is the concept of fake telemetry.

Telemetry is defined as the collection of data at remote points and their automatic transmission to receiving equipment for monitoring. As such, organizations provide false data, meant to deceive the attacker. This type of fake information might include fake credentials or fake IP address information. It might be an internal report detailing vulnerable systems that require updates when, they are really honeypots designed to capture attacker information.

The primary reason for providing fake information is to get the attacker to act on the false information. Since the information is controlled by system managers, they can utilize alerts, alarms, and logs to track the techniques and tools used by an attacker. The tracked information allows system management to tune perimeter equipment such as firewalls, NIDS, NIPS and other protections.

### Summary 08:05-08:31

That's it for this lesson. In this video, we discussed deception techniques used by companies to protect themselves from attackers. We discussed such techniques as using honeypots, honeyfiles, and honeynets to lure attackers into fake areas. We also discussed the benefits of using DNS sinkholes. And we ended this lesson outlining the benefits of companies using fake telemetry.

## 5.1.12 Detect Malicious Network Traffic with a Honeypot

### Detect Malicious Network Traffic with a Honeypot 00:00-00:47

Reconnaissance tools like nmap can find vulnerable systems on the internet. These tools scan ranges of IP addresses for systems with interesting ports open, such as Telnet, Remote Desktop, SSH, and FTP. Many ethical hackers like to know who's gathering this kind of information, and there's a simple way to record reconnaissance attempts. In order to record these network scans, we need a computer whose sole purpose is to listen for connection attempts on interesting ports, then log the data about each attempt. This kind of system is called a honeypot. It looks appealing and hackable from the outside, but it's actually recording data about every remote user that attempts to connect. Today, we'll look at how to set up an extremely basic honeypot using a tool called Pentbox.

### Pentbox 00:47-03:02

Pentbox is available online, but many people upload copies of the original program. When downloading tools, especially hacking tools, you have to be certain of the tool's integrity so you don't download malicious software. I've already downloaded the tool and put it in a folder named pentbox, so let's open that now. From my Kali Linux machine, I'll open a terminal and navigate to 'cd pentbox/'. I'll list the folder's contents to make sure everything is there.

Pentbox is a Ruby script. Since Ruby is already installed on Kali, we just need to run the script. To do that, I'll type './pentbox.rb' and press Enter.

When it opens, we can see a variety of options. Pentbox does a lot of things. But right now, we're only interested in the honeypot utility, which is located under Network Tools. First, I'll select number 2, and then we'll select Honeypot, number 3.

After we've selected the Honeypot utility, we're presented with the option to use either fast or manual configuration. I'm going to select number 1, the Fast Autoconfiguration option, since the manual configuration only lets us change which port the tool listens on. It also lets us set the message to return to the requesting machine.

As soon as we press Enter, we're told that the honeypot has started running on port 80. Let's try connecting to it with Firefox to see what happens. I'll open Firefox and type 'localhost' in the address bar. We can see that the honeypot returns back a web page that tells us access has been denied. Interestingly, the autoconfiguration option returns a line with a date and time. This doesn't change; actually, it represents the time the tool was started. Now that we've connected to the page, let's see what Pentbox says.

Okay, I'm back on my Kali Linux system. It looks like the honeypot utility is telling us quite a bit of information. The first line of each entry shows that there was a connection attempt and tells us what the IP address of the connecting machine was, as well as the connection time. After that, the honeypot utility tells us the header information that was received when the connection was made. This information includes both the web browser that was used and information about the type of operating system that connected.

### Summary 03:02-03:24

So, there's a really simple overview of a honeypot's function. This is just a taste of what you can accomplish- there are many more robust tools available that can log information about connections on many different ports and protocols simultaneously, which is a goldmine of data that will help you keep your network safe.
