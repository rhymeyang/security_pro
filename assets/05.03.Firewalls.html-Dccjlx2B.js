import{_ as r,c as i,b as a,a as e,d as t,o}from"./app-DJA97a9c.js";const s={};function n(c,l){return o(),i("div",null,l[0]||(l[0]=[a("<p>As you study this section, answer the following questions:</p><ul><li> What is the difference between a network-based firewall and an application/host-based firewall? </li><li> When would you choose to implement a host-based firewall? </li><li> Which traffic characteristics can you specify in a filtering rule for a packet filtering firewall? </li><li> How does a packet filtering firewall differ from a circuit-level gateway? </li><li> Where should a network-based firewall be placed? </li></ul><p>In this section, you will learn to:</p><ul><li> Configure firewall rules. </li><li> Configure firewall schedules. </li><li> Configure a perimeter firewall. </li></ul><p>The key terms for this section include:</p>",5),e("table",{class:"terms"},[e("thead",null,[e("tr",null,[e("th",{class_:"firstTableHeader",scope:"col",class:"fw-bold"}," Term "),e("th",{scope:"col",class:"fw-bold"}," Definition ")])]),e("tbody",null,[e("tr",null,[e("td",null," Firewall "),e("td",null," A device, or software running on a device, that inspects network traffic and allows or blocks traffic based on a set of rules. ")]),e("tr",null,[e("td",null," Application firewall "),e("td",null," An application firewall is typically installed on a workstation and used to protect a single device. An application firewall is also known as a host-based firewall. ")]),e("tr",null,[e("td",null," Network firewall "),e("td",null," A firewall that is used to regulate traffic in and out of an entire network. ")]),e("tr",null,[e("td",null," Stateless firewall "),e("td",null," A firewall that allows or denies traffic by examining information in IP packet headers. ")]),e("tr",null,[e("td",null," Stateful firewall "),e("td",null," A firewall that allows or denies traffic based on virtual circuits of sessions. A stateful firewall is also known as a circuit-level proxy or circuit-level gateway. ")])])],-1),e("p",null,"This section helps you prepare for the following certification exam objectives:",-1),e("table",{class:"objectives"},[e("thead",null,[e("tr",null,[e("th",{class_:"firstTableHeader",scope:"col",class:"fw-bold"}," Exam "),e("th",{scope:"col",class:"fw-bold"}," Objective ")])]),e("tbody",null,[e("tr",null,[e("td",null," TestOut Security Pro "),e("td",null,[t(" 2.1 Harden Physical Access "),e("blockquote",null," 2.1.3 Install and Configure a Firewall ")])]),e("tr",null,[e("td",null," CompTIA Security+ SY0-601 "),e("td",null,[t(" 3.2 Given a scenario, implement host or application security solutions. "),e("ul",null,[e("li",null,[t(" Endpoint protection "),e("ul",null,[e("li",null," Host-based firewall ")])])]),e("p",null," 3.3 Given a scenario, implement secure network designs. "),e("ul",null,[e("li",null,[t(" Network appliances "),e("ul",null,[e("li",null,[t(" Firewalls "),e("ul",null,[e("li",null," Stateful "),e("li",null," Stateless "),e("li",null," Hardware vs. software ")])])])])])])])])],-1),a('<h2 id="_5-3-1-firewalls" tabindex="-1"><a class="header-anchor" href="#_5-3-1-firewalls"><span>5.3.1 Firewalls</span></a></h2><h3 id="firewalls-00-00-00-25" tabindex="-1"><a class="header-anchor" href="#firewalls-00-00-00-25"><span>Firewalls 00:00-00:25</span></a></h3><p>You can think of a firewall as a traffic cop. Based on its configuration, it allows or denies traffic in and out of a computer or network. There are several types of firewalls, and each has its own purpose. They often work together to layer protection for networks and individual systems, but their main function is to prevent network attacks.</p><h3 id="software-vs-hardware-firewalls-00-25-01-36" tabindex="-1"><a class="header-anchor" href="#software-vs-hardware-firewalls-00-25-01-36"><span>Software vs. Hardware Firewalls 00:25-01:36</span></a></h3><p>Firewalls fall into two main categories, host (or software-based) and hardware (or network-based). A software firewall is typically installed on a workstation and used to protect a single device. You can use a Windows or Linux firewall to block remote connections to a local machine. Software firewalls are usually configured using a graphical user interface or sometimes a command line utility, and each device must be configured independently to protect that individual device.</p><p>A hardware-based firewall is typically a dedicated hardware device and has more capabilities than software firewalls. Instead of only protecting an individual device, hardware-based firewalls are used to regulate traffic in and out of an entire network and can restrict data flow for all the workstations and systems on the network.</p><p>This means that when it comes time to filter traffic or services, it&#39;s much easier because you can apply the required rules to just one network firewall device instead of making the same configuration change to potentially hundreds of workstations individually. In this video, we&#39;ll focus on hardware firewalls.</p><h3 id="stateful-firewalls-01-36-02-23" tabindex="-1"><a class="header-anchor" href="#stateful-firewalls-01-36-02-23"><span>Stateful Firewalls 01:36-02:23</span></a></h3><p>Companies often implement several types of hardware firewalls. Two of the most common types of firewalls used to control traffic are stateful firewalls and stateless firewalls.</p><p>A stateful, or circuit-level, firewall analyzes and identifies the state of network connections.</p><p>In other words, stateful firewalls keep track of sessions and maintain that information in a session or state table database. This enables the firewall to store more data and use it to analyze and control traffic and, in turn, block potential attacks. It also enables the firewall to enforce encryption protocols on certain types of connections.</p><p>But there is a downside to this. Analyzing all this stored data is very resource-intensive and requires a lot of processing time and system resources.</p><h3 id="stateless-firewalls-02-23-04-01" tabindex="-1"><a class="header-anchor" href="#stateless-firewalls-02-23-04-01"><span>Stateless Firewalls 02:23-04:01</span></a></h3><p>The other type of firewall is the stateless firewall, which is what most companies use. These firewalls control traffic using access control lists, or ACLs. Instead of analyzing the state of network traffic, stateless firewalls inspect the information contained in IP packets and compare it to a static list of rules in the firewall&#39;s ACL. These rules define whether to accept or reject the IP packets based on the criteria defined in the ACL. This criteria can include IP addresses, port numbers or services, and traffic direction.</p><p>For example, let&#39;s say you have a rule in your ACL that blocks all incoming traffic on port 80, or HTTP. As the firewall inspects packets, it compares them to the rules in the ACL. Since a deny rule is defined, all incoming packets destined for port 80 on any system are blocked and discarded.</p><p>When using stateless firewalls, it&#39;s important to know that these types of firewalls have a built-in rule called an implicit deny rule. By default, the implicit deny rule blocks all traffic through the firewall unless the administrator explicitly creates a rule to allow a specific type of traffic. This is by far the most secure way to implement an ACL, but it&#39;s also very tedious.</p><p>An easy way to keep track of the differences between stateful and stateless firewalls is to remember that stateful firewalls make dynamic control decisions based on the state of the network connections, while stateless firewalls make static decisions based on IP packets.</p><h3 id="network-firewall-placement-04-01-05-15" tabindex="-1"><a class="header-anchor" href="#network-firewall-placement-04-01-05-15"><span>Network Firewall Placement 04:01-05:15</span></a></h3><p>When you&#39;re placing a firewall, its primary function tells you where it should be located. A good starting point is to ask yourself two questions: &quot;What is this firewall&#39;s purpose?&quot; and &quot;Will the firewall host a demilitarize zone?&quot;</p><p>In most circumstances, the firewall is placed at the end, or border, of your internal network. Often, a firewall can also act as a router, so it&#39;s the intermediate device sitting between the internet and your internal network. As we&#39;ve already discussed, it&#39;ll regulate traffic in and out of the network based on the rules it&#39;s configured with.</p><p>Another firewall placement option involves a DMZ. With a DMZ, an organization exposes some servers to the general public through the internet. In most cases, this involves a multi-homed firewall that has another connection that&#39;s separate from the internal network connection. These servers may allow internet email, web servers, or VPN servers. They can also provide extranet servers for trusted partners.</p><p>A third option places the DMZ server between two firewalls. This option requires more configuration, maintenance, and cost, but it&#39;s more secure and provides better protection.</p><h3 id="firewall-misconfigurations-05-15-08-08" tabindex="-1"><a class="header-anchor" href="#firewall-misconfigurations-05-15-08-08"><span>Firewall Misconfigurations 05:15-08:08</span></a></h3><p>Once you&#39;ve decided which type of firewall you&#39;re going to use and where to place it, it&#39;s time for configuration. This is a very important step that should be well thought out before you start. There are many choices available when you&#39;re making decisions about your firewall&#39;s configuration, and depending on the firewall manufacturer and model, the configuration steps may be different.</p><p>It&#39;s very important to become familiar with the steps, language, and meaning of the options before you set things up. Your firewall may be preconfigured. It could have a graphical interface, or it could require command-line configuration. Because of the number of manufacturers and models available, we won&#39;t discuss specific firewall configuration steps right now. We&#39;re going to focus on steps that will help you avoid misconfiguring any firewall.</p><p>First, change the default username and password. Hackers are aware of these names and passwords and will quickly make a mess of your system if you leave them. Ensure that your new password is complex. This means using capital letters, numbers, lowercase letters, and special characters such as a pound sign or ampersand.</p><p>Make sure that you&#39;re not creating an environment that&#39;s too restrictive. This can cripple a company by preventing common and normal systems operations. For example, if you block a critical system from accessing the internet, then users might not be able to complete their work. If you prevent the company&#39;s messaging service from receiving internet packets, you&#39;ve crippled your organization another way.</p><p>On the other hand, it&#39;s also possible to make the firewall too lenient. For example, you want to ensure that all internal systems can make outbound requests. But instead of using implicit deny, you decide it&#39;s easier to just allow all outbound traffic. Now, when one of the internal workstations gets infected with a keylogger, everything the user types goes directly to a remote attacker. Since the traffic is generated from the internal network, it&#39;ll be sent without restriction, as if the firewall weren&#39;t there at all. Lenient rules can also expose your network to external attacks and increase your network&#39;s attack surface.</p><p>Although security professionals are trained and competent professionals, they do make mistakes. Very often, a misconfiguration is only found when an attacker leverages it. This could be a small issue that&#39;s easily corrected, or it could make the entire infrastructure vulnerable.</p><p>For these reasons, firewall configuration is an ongoing process. It&#39;s important that you understand how to properly configure your network firewalls. Keep in mind, a firewall is an appliance that requires updates like any other device. It&#39;s important to ensure that the firewall contains the latest patches and firmware updates to keep it safe from attacks.</p><h3 id="summary-08-08-08-39" tabindex="-1"><a class="header-anchor" href="#summary-08-08-08-39"><span>Summary 08:08-08:39</span></a></h3><p>And that&#39;s it for this lesson. In this video, we discussed the differences between a host-based firewall and a network-based firewall. We talked about the difference between stateful and stateless firewalls. We reviewed how access control lists are used, and we talked about the effects of implicit deny and proper firewall placement. We ended this lesson by discussing common firewall misconfigurations.</p><h2 id="_5-3-2-firewall-facts" tabindex="-1"><a class="header-anchor" href="#_5-3-2-firewall-facts"><span>5.3.2 Firewall Facts</span></a></h2><p>This lesson covers the following topics:</p><ul><li> Firewall functions </li><li> Firewall types </li><li> Firewall security features </li><li> Firewall management practices </li></ul><h3 id="firewall-functions" tabindex="-1"><a class="header-anchor" href="#firewall-functions"><span>Firewall Functions</span></a></h3><p>A firewall is a device or software running on a device that inspects network traffic and allows or blocks traffic based on a set of rules.</p><ul><li> A network-based firewall inspects traffic as it flows between networks. For example, you can install a network-based firewall on the edge of your private network that connects to the internet to protect against attacks from internet hosts. Network-based firewalls are typically dedicated hardware devices. </li><li> A host-based or application-based firewall inspects traffic received by a host. Use a host-based firewall to protect against attacks when there is no network-based firewall, such as when you connect to the internet from a public location. Host-based firewalls are typically software programs. A host-based firewall can be configured to meet the security requirements of the specific host and add an additional layer of security even when a network firewall has been implemented. </li><li> Firewalls use filtering rules, sometimes called access control lists (ACLs), to identify allowed and blocked traffic. A rule identifies traffic characteristics, such as: <ul><li> The interface to which the rule applies </li><li> The direction of traffic (inbound or outbound) </li><li> Packet information, such as the source or destination IP address or port number </li><li> The action to take when the traffic matches the filter criteria </li></ul></li><li> Firewalls can protect against external attacks. </li><li> Firewalls don&#39;t offer protection against all attacks (for example, spoofed email messages). </li><li> A firewall can impede network availability because it adds processing to network traffic or might drop network traffic when overloaded. </li></ul><h3 id="firewall-types" tabindex="-1"><a class="header-anchor" href="#firewall-types"><span>Firewall Types</span></a></h3><p>The following table explains different firewall types:</p>',40),e("table",null,[e("thead",null,[e("tr",null,[e("th",{class_:"firstTableHeader",scope:"col",class:"fw-bold"}," Type "),e("th",{scope:"col",class:"fw-bold"}," Characteristics ")])]),e("tbody",null,[e("tr",null,[e("td",null,[t(" Packet filtering "),e("br"),t(" (stateless) ")]),e("td",null,[t(" A packet filtering firewall makes decisions about which network traffic to allow by examining information in the IP packet header, such as source and destination addresses, ports, and service protocols. A packet filtering firewall: "),e("ul",null,[e("li",null," Operates up to OSI Layer 3 (the Network layer) "),e("li",null," Uses access control lists (ACLs) or filter rules to control traffic "),e("li",null," Offers high performance because it only examines addressing information in the packet header "),e("li",null," Can be implemented using features that are included in most routers "),e("li",null," Is not very intelligent, so it is subject to DoS and buffer overflow attacks "),e("li",null," Is easy to implement and maintain, has a minimal impact on system performance, and is fairly inexpensive ")]),e("p",null," A packet filtering firewall is considered a stateless firewall because it examines each packet and uses rules to accept or reject each packet without considering whether the packet is part of a valid and active session. ")])]),e("tr",null,[e("td",null," Stateful "),e("td",null,[t(" The stateful inspection firewall (also known as circuit-level proxy or gateway) makes decisions about which traffic to allow based on virtual circuits or sessions. The firewall is considered stateful because it keeps track of the state of a session. A stateful inspection firewall: "),e("ul",null,[e("li",null," Operates up to OSI Layer 5 (the Session layer) "),e("li",null,[t(" Keeps track of known connections and sessions in a session ta "),e("i",{class:"fs-italicize"}," ble "),t(" (also referred to as a state table) ")]),e("li",null," Allows only valid packets within approved sessions "),e("li",null," Verifies that packets are properly sequenced "),e("li",null," Ensures that the TCP three-way handshake process occurs only when appropriate "),e("li",null," Can filter traffic that uses dynamic ports because the firewall matches the session information (not the port numbers) for filtering ")]),e("p",null," In general, stateful inspection firewalls are slower than packet filtering firewalls. If only the session state is being used for filtering, a stateful inspection firewall can be faster after the initial session table has been created. ")])]),e("tr",null,[e("td",null," Application "),e("td",null,[t(" An Application layer firewall (also referred to as an Application level gateway or proxy) makes security decisions based on information contained within the data portion of a packet. An Application level gateway: "),e("ul",null,[e("li",null," Operates up to OSI Layer 7 (the Application layer) "),e("li",null," Stops each packet at the firewall and inspects it, so there is no IP forwarding "),e("li",null," Inspects encrypted packets, such as in SSL inspection "),e("li",null," Examines the entire content (not just individual packets) "),e("li",null," Understands or interfaces with the Application layer protocol "),e("li",null," Can filter based on user, group, and data such as URLs within an HTTP request "),e("li",null," Is the slowest form of firewall because entire messages are reassembled at the Application layer ")]),e("p",null," A proxy server is a device that stands as an intermediary between a secure private network and the public and is a specific implementation of an Application level firewall. With a proxy, every packet is stopped and inspected at the firewall, which causes a break between the client and the source server. Proxies can be configured to: "),e("ul",null,[e("li",null," Control both inbound and outbound traffic "),e("li",null," Increase performance by caching heavily accessed content (content is retrieved from the proxy cache instead of the original server) "),e("li",null," Filter content "),e("li",null," Shield or hide a private network "),e("li",null," Restrict access by user or by specific websites "),e("li",null," Allows inspection of encrypted packets, such as SSL inspection ")])])])])],-1),e("h3",{id:"firewall-security-features",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#firewall-security-features"},[e("span",null,"Firewall Security Features")])],-1),e("p",null,"Most newer firewalls have flood guard protections built into their feature sets. A flood guard protects against denial-of-service (DoS) and distributed denial-of-service (DDoS) attacks. The main types of DoS attacks are flood attacks, SYN floods, ping floods, UDP floods, and port floods. The following table explains a few common firewall security features:",-1),e("table",null,[e("thead",null,[e("tr",null,[e("th",{class_:"firstTableHeader",scope:"col",class:"fw-bold"}," Feature "),e("th",{scope:"col",class:"fw-bold"}," Characteristics ")])]),e("tbody",null,[e("tr",null,[e("td",null," Block ping to WAN "),e("td",null," This feature helps prevent attackers from discovering your network through ICMP Echo (ping) requests. ")]),e("tr",null,[e("td",null," Stealth Mode "),e("td",null," This feature prevents the response to port scans from the WAN. This protects against port floods. ")]),e("tr",null,[e("td",null," TCP Flood "),e("td",null," This feature drops all invalid TCP packets. This protects your network from SYN flood attacks. ")]),e("tr",null,[e("td",null," UDP Flood "),e("td",null," This feature helps prevent UDP flood attacks by metering the number of simultaneous, active UDP connections from a single computer on the internal network. ")]),e("tr",null,[e("td",null," ICMP Notification "),e("td",null," This feature can silently block the sending of ICMP notifications. Some protocols may require these notifications. ")]),e("tr",null,[e("td",null," Fragmented Packets "),e("td",null," This feature blocks the sending of fragmented IP packets. ")]),e("tr",null,[e("td",null," SYN Flood Detect Rate "),e("td",null," To help prevent SYN floods, this feature monitors the rate of SYN packets during a configuration time period. Too many SYN packets cause the firewall to determine that a SYN flood is occurring and to trigger the appropriate response. ")]),e("tr",null,[e("td",null," Echo Storm Detect Rate "),e("td",null," To help prevent ping floods, this feature monitors the rate of echo pings during a configuration time period. Too many pings cause the firewall to determine that a ping flood is occurring and to trigger the appropriate response. ")]),e("tr",null,[e("td",null," ICMP Flood Detect Rate "),e("td",null," This feature monitors non-ping ICMP packets. Too many cause the firewall to determine that a ICMP flood is occurring and trigger the appropriate response. ")])])],-1),a('<h3 id="firewall-management-practices" tabindex="-1"><a class="header-anchor" href="#firewall-management-practices"><span>Firewall Management Practices</span></a></h3><p>Be aware of the following when managing firewalls:</p><ul><li> When designing firewall packet filters, a common practice is to close all ports. Open only those ports necessary for accessing the resources behind the firewall. </li><li> If a host cannot communicate on the network, or if specific types of traffic (such as ICMP or Remote Desktop connection) don&#39;t work on a host, check the host firewall settings to make sure that the traffic type is allowed. </li><li> Firewalls typically create log entries when packets are blocked by firewall rules. You can examine these logs to help troubleshoot communication problems or identify potential attacks (such as DoS attacks). </li></ul><h2 id="_5-3-3-configuring-firewall-rules" tabindex="-1"><a class="header-anchor" href="#_5-3-3-configuring-firewall-rules"><span>5.3.3 Configuring Firewall Rules</span></a></h2><h3 id="configuring-firewall-rules-00-00-00-30" tabindex="-1"><a class="header-anchor" href="#configuring-firewall-rules-00-00-00-30"><span>Configuring Firewall Rules 00:00-00:30</span></a></h3><p>In this demonstration, we&#39;re going to configure firewall rules on a pfSense security appliance. First, we&#39;re going to configure a firewall rule to allow both HTTP and HTTPS traffic from internet, or WAN, through the firewall and to our web server on our DMZ. The second thing we&#39;re going to do is configure a rule to allow all traffic coming from our LAN to get to our DMZ through the firewall.</p><h3 id="allow-http-and-https-00-30-04-40" tabindex="-1"><a class="header-anchor" href="#allow-http-and-https-00-30-04-40"><span>Allow HTTP and HTTPS 00:30-04:40</span></a></h3><p>I want to verify that I have my DMZ ready to go. I&#39;ll scroll down, and you can see I have my three interfaces here, and they have assigned IPs.</p><p>Let&#39;s create our rules. I&#39;ll go to Firewall &gt; Rules, and the first rules I&#39;ll configure are the ones from our WAN to our DMZ to allow HTTP and HTTPS to our web server. I want to go to our DMZ tab here, and down here, I have a few buttons. You&#39;ll notice there are two buttons that say Add. This one has the arrow pointing up, and if I pick that one, it&#39;ll add the rule to the top of my list. If I click on the one with the arrow pointing down, it&#39;ll add the rule to the bottom, so I&#39;ll click on that one.</p><p>For our rule, we want to choose to pass the traffic through the firewall. My other choices are to block it or reject it. If we choose Block, it will just drop the packets as if they never arrived If we choose Reject, the packets are returned to the sender, and the sender can see they were blocked. For security reasons, sometimes you don&#39;t want senders to know that your device is even there, and it&#39;s better to just block the packets. But if you&#39;re troubleshooting issues, reject can be more helpful. Either way, with block or reject, the packets won&#39;t reach the destination.</p><p>The interface that I want to configure is the DMZ. You can see that I have my LAN and WAN here as well. For Address Family, I&#39;ll leave it as IPv4. The other choices are IPv6 or both. For Protocol, we&#39;re allowing HTTP, which runs on TCP. If I click the dropdown list, you can see all the other protocols that we could choose if we were going to allow some other type of traffic.</p><p>Our source is going to be from our WAN network. I need to see more options, so I&#39;ll click on the Display Advanced button. The Source Port Range is going to be HTTP. I could put in a single port or a range, but we just want HTTP port 80. Since this is going to be my web server, I need to put in the IP address here. First, I&#39;ll pick Single host or alias, and now let&#39;s pop our diagram back up. Our web server&#39;s IP is right here, so let&#39;s go back and enter that in. Destination Address will be ‘172.16.1.5&#39;. We&#39;re using HTTP, and the rest of this looks good.</p><p>Down here, we could log packets handled by this rule. Since this is a web server, we probably don&#39;t want to do that since our log would be overwhelmed. If it was FTP, SSH, or other traffic like that, we probably would want to log traffic, but not for normal web requests. We do want to put a description in here because as you create more and more rules, you&#39;ll forget what they all do. For this, I&#39;ll type in ‘HTTP to DMZ from WAN&#39; and click Save. On our next page here, we have to click on Apply Changes for the changes to my firewall to take effect.</p><p>So, here are my rules so far. I have one that allows my DMZ out, and this second one is our HTTP rule from the WAN on port 80 the web server on our DMZ.</p><p>Now, you might be saying to yourself, &quot;Doesn&#39;t most web traffic use HTTPS these days?&quot; Well, that answer is certainly yes, so now we need an HTTPS rule.</p><p>Here&#39;s some good news: to save a bit of time and keep from making any errors, we can just copy this rule and change the HTTP port 80 to HTTPS port 443. I&#39;ll click here, which is the Copy icon. What this does creates a new rule with the exact settings. I&#39;ll scroll down and change my source from HTTP port 80 to HTTPS port 443. For the destination, I&#39;ll do the same. Scroll down change the description by just adding the letter ‘S&#39;. Click Save. On this page, Click Apply Changes. Down here, you now see our rules for both HTTP and HTTPS.</p><h3 id="allow-lan-traffic-to-wan-04-40-06-27" tabindex="-1"><a class="header-anchor" href="#allow-lan-traffic-to-wan-04-40-06-27"><span>Allow LAN Traffic to WAN 04:40-06:27</span></a></h3><p>Now let&#39;s look at our diagram again. This time, I want to create a rule that allows any traffic from my LAN to get to the DMZ. Let&#39;s go back to our firewall and configure that now. These rules are read from the top down. So, for example, if the first rule says block everything, none of the other rules would ever be seen because that&#39;s the very first rule. However, if we made a rule right now that said to block everything and put it at the bottom, our first three rules would still be fine, but everything else would be blocked. By default, everything is blocked with pfSense anyway unless you open it, so we wouldn&#39;t really need that sort of rule, but it doesn&#39;t hurt anything. So far, our rules don&#39;t affect one another, so it really doesn&#39;t matter where we put them, but keep all of this in mind when creating rules. We&#39;ll just click on Add and use the one that puts it at the bottom of the list.</p><p>Our Action will be to pass traffic. We&#39;ll leave the interface and address family alone. But for protocol, we&#39;re going to change this from TCP to Any. This might not be the best practice, but we&#39;re allowing any and all traffic from our LAN to reach our DMZ. Under Source, we&#39;ll choose our LAN network from the list. Our destination will be the DMZ from this list. We don&#39;t want to forget a description for this rule. I&#39;ll type ‘LAN to DMZ Any&#39;. Click Save. As always, Apply Changes.</p><p>Here&#39;s my latest rule. My source is from the LAN on any port to my DMZ on any port. By the way, the asterisk is wildcard, which means any. Over here, the green check mark means it&#39;s enabled.</p><h3 id="summary-06-27-06-50" tabindex="-1"><a class="header-anchor" href="#summary-06-27-06-50"><span>Summary 06:27-06:50</span></a></h3><p>That&#39;s it for this demo. In this demo, we created firewall rules on our firewall. First, we configured HTTP and HTTPS traffic from the WAN to a web server on our DMZ, and then we created a rule to allow any traffic from our LAN to get to our DMZ.</p><h2 id="_5-3-4-configure-firewall-schedules" tabindex="-1"><a class="header-anchor" href="#_5-3-4-configure-firewall-schedules"><span>5.3.4 Configure Firewall Schedules</span></a></h2><h3 id="configure-firewall-schedules-00-00-00-36" tabindex="-1"><a class="header-anchor" href="#configure-firewall-schedules-00-00-00-36"><span>Configure Firewall Schedules 00:00-00:36</span></a></h3><p>There may be times when you want to restrict certain groups of users&#39; access to the internet or other services. For example, you might allow SSH through the firewall to a Linux server, but the person who needs access to it only has it during work hours. Another example is a school that doesn&#39;t want normal users accessing the web after hours. There are many cases when you&#39;d want to configure restrictions. For our demo, we&#39;re going to use a scenario of blocking web traffic, or HTTP traffic, after business hours.</p><h3 id="set-a-schedule-00-36-01-46" tabindex="-1"><a class="header-anchor" href="#set-a-schedule-00-36-01-46"><span>Set a Schedule 00:36-01:46</span></a></h3><p>This is basically a three-part process. First, we&#39;ll create a time-restriction schedule. Then we&#39;re going to create a rule and apply that schedule to our users. The last thing we&#39;ll do is create a rule to override the restriction for members of our management group.</p><p>So, under Firewall &gt; Schedules, I go over to Add and click on it. I need to give it a Schedule Name. This can&#39;t have any spaces in it, so I&#39;ll use underscores and call it Allow_Web_Work _Hours. For our Description we can use anything. I&#39;ll call it Allow Web During Work Hours.</p><p>For the days, I&#39;ll click on the workdays of Monday through Friday to add all of them. For Time, I&#39;ll pick 7:00 a.m. from the dropdown list and jump over to Stop Hours. Here, I&#39;ll pick 17 and leave the minutes at 59. That makes our stop time 5:59 p.m. I&#39;ll click on Add Time, and you can see my Configured Range here, which is now Monday through Friday from 7:00 a.m. to 17:59. That looks good, so let&#39;s click Save. Now we&#39;re done with our schedule. Next, we need to configure our firewall rules.</p><h3 id="apply-schedule-to-firewall-rule-01-46-03-01" tabindex="-1"><a class="header-anchor" href="#apply-schedule-to-firewall-rule-01-46-03-01"><span>Apply Schedule to Firewall Rule 01:46-03:01</span></a></h3><p>We now need to go up to Firewall &gt; Rules and then click on our LAN tab to get to our LAN firewall rules. We have a few rules. One basically allows IPv4 out to anywhere and the same for IPv6.</p><p>We want to add our rule to the top of the list. So I&#39;ll pick Add with the arrow pointing up.</p><p>We want to select Block because we&#39;re going to block traffic based on the schedule. I&#39;ll scroll down.</p><p>We&#39;re going to block everything on our LAN network, so I&#39;ll pick LAN net from the dropdown list. I need to click on the Display Advanced button here. Now, for our Source Port Range we want to block HTTP port 80.</p><p>Let&#39;s scroll down a bit. Under Extra Options, click on Display Advance to see additional options. We need to come down and find where it says Schedule. From the list, we have all our schedules. And since we only created one, that&#39;s all we have. Let&#39;s pick that one. Go down and click on Save.</p><p>Now we see our new rule. The source is the LAN network on port 80. Over here, you can see that it refers to the schedule that we created. This all looks good, and so we go up and click Apply Changes.</p><h3 id="create-aliases-03-01-04-19" tabindex="-1"><a class="header-anchor" href="#create-aliases-03-01-04-19"><span>Create Aliases 03:01-04:19</span></a></h3><p>We have our schedule and we&#39;ve created a rule that applies that schedule to our users. But what about users that we want to have access to the internet no matter what time of day it is? We need to create another rule for that. But first we need to create an alias. An alias is a group of IPs that&#39;ll be grouped together. That alias will be added to a rule that allows internet access.</p><p>To do that, we go up to Firewall &gt; Aliases. When the page loads, we go down to the Add button. We need to give it a name that we&#39;ll use to identify this group of IP addresses. We&#39;ll just say that this group is our management. So, for the Name field that&#39;s what I&#39;ll put in. I&#39;ll do the same for Description.</p><p>Now I need to enter in the IP addresses of those devices that&#39;ll be part of this alias. I&#39;ll enter in a few and start with 10.10.10.1. That IP belongs to Dana. Click Add Host. Now let&#39;s enter 10.10.10.2; that&#39;ll be Jon&#39;s. Click Add Host and we&#39;ll add one more, which is 10.10.10.3. That&#39;ll be for Mary. Click Add Host one final time and then click Save. Apply the changes and we&#39;re ready to create our final rule.</p><h3 id="create-override-rule-04-19-05-53" tabindex="-1"><a class="header-anchor" href="#create-override-rule-04-19-05-53"><span>Create Override Rule 04:19-05:53</span></a></h3><p>Now that we have our alias, we need to create our rule to override the rule that blocks web access for all users. These rules will be from the top down. If our firewall reads the first rule that says to block all HTTP traffic during non-work hours, that rule is applied. The rule that says to allow management access will never be seen. So, we need to make sure that we tell our firewall that our management can have access before we tell it to block everyone else. We go to Firewall &gt; Rules &gt; LAN and then click the Add button with the up arrow.</p><p>All the settings here are fine. But down here, under Source, we need to change this to Single host or alias. Now, watch as I start to type in the address field. As soon as I start to type in Management, it auto-populates with our alias. We&#39;ll leave the destination set to Any. For Description, I&#39;ll type in Allow Management Web Access Anytime. Click on Save and the rule is created.</p><p>As a quick side note, this first rule is created automatically by pfSense. It&#39;s there to prevent you from creating any rule that might accidently block you from gaining access to the firewall. That&#39;s why it&#39;s first in this position. You can actually remove that rule, but that&#39;s not part of this lesson. Right below that is our rule. The rule we create for management will be applied before the block web access rule. The one right below it is applied.</p><h3 id="summary-05-53-06-11" tabindex="-1"><a class="header-anchor" href="#summary-05-53-06-11"><span>Summary 05:53-06:11</span></a></h3><p>That&#39;s it for this demo. In this demo, we created a schedule on our firewall to deny web access to our users. Then we created an alias for a group of users who are allowed to bypass that rule with a second rule.</p>',46)]))}const u=r(s,[["render",n],["__file","05.03.Firewalls.html.vue"]]),d=JSON.parse('{"path":"/05/05.03.Firewalls.html","title":"Section 5.3 Firewalls","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"Section 5.3 Firewalls","description":"some description"},"headers":[{"level":2,"title":"5.3.1 Firewalls","slug":"_5-3-1-firewalls","link":"#_5-3-1-firewalls","children":[{"level":3,"title":"Firewalls 00:00-00:25","slug":"firewalls-00-00-00-25","link":"#firewalls-00-00-00-25","children":[]},{"level":3,"title":"Software vs. Hardware Firewalls 00:25-01:36","slug":"software-vs-hardware-firewalls-00-25-01-36","link":"#software-vs-hardware-firewalls-00-25-01-36","children":[]},{"level":3,"title":"Stateful Firewalls 01:36-02:23","slug":"stateful-firewalls-01-36-02-23","link":"#stateful-firewalls-01-36-02-23","children":[]},{"level":3,"title":"Stateless Firewalls 02:23-04:01","slug":"stateless-firewalls-02-23-04-01","link":"#stateless-firewalls-02-23-04-01","children":[]},{"level":3,"title":"Network Firewall Placement 04:01-05:15","slug":"network-firewall-placement-04-01-05-15","link":"#network-firewall-placement-04-01-05-15","children":[]},{"level":3,"title":"Firewall Misconfigurations 05:15-08:08","slug":"firewall-misconfigurations-05-15-08-08","link":"#firewall-misconfigurations-05-15-08-08","children":[]},{"level":3,"title":"Summary 08:08-08:39","slug":"summary-08-08-08-39","link":"#summary-08-08-08-39","children":[]}]},{"level":2,"title":"5.3.2 Firewall Facts","slug":"_5-3-2-firewall-facts","link":"#_5-3-2-firewall-facts","children":[{"level":3,"title":"Firewall Functions","slug":"firewall-functions","link":"#firewall-functions","children":[]},{"level":3,"title":"Firewall Types","slug":"firewall-types","link":"#firewall-types","children":[]},{"level":3,"title":"Firewall Security Features","slug":"firewall-security-features","link":"#firewall-security-features","children":[]},{"level":3,"title":"Firewall Management Practices","slug":"firewall-management-practices","link":"#firewall-management-practices","children":[]}]},{"level":2,"title":"5.3.3 Configuring Firewall Rules","slug":"_5-3-3-configuring-firewall-rules","link":"#_5-3-3-configuring-firewall-rules","children":[{"level":3,"title":"Configuring Firewall Rules 00:00-00:30","slug":"configuring-firewall-rules-00-00-00-30","link":"#configuring-firewall-rules-00-00-00-30","children":[]},{"level":3,"title":"Allow HTTP and HTTPS 00:30-04:40","slug":"allow-http-and-https-00-30-04-40","link":"#allow-http-and-https-00-30-04-40","children":[]},{"level":3,"title":"Allow LAN Traffic to WAN 04:40-06:27","slug":"allow-lan-traffic-to-wan-04-40-06-27","link":"#allow-lan-traffic-to-wan-04-40-06-27","children":[]},{"level":3,"title":"Summary 06:27-06:50","slug":"summary-06-27-06-50","link":"#summary-06-27-06-50","children":[]}]},{"level":2,"title":"5.3.4 Configure Firewall Schedules","slug":"_5-3-4-configure-firewall-schedules","link":"#_5-3-4-configure-firewall-schedules","children":[{"level":3,"title":"Configure Firewall Schedules 00:00-00:36","slug":"configure-firewall-schedules-00-00-00-36","link":"#configure-firewall-schedules-00-00-00-36","children":[]},{"level":3,"title":"Set a Schedule 00:36-01:46","slug":"set-a-schedule-00-36-01-46","link":"#set-a-schedule-00-36-01-46","children":[]},{"level":3,"title":"Apply Schedule to Firewall Rule 01:46-03:01","slug":"apply-schedule-to-firewall-rule-01-46-03-01","link":"#apply-schedule-to-firewall-rule-01-46-03-01","children":[]},{"level":3,"title":"Create Aliases 03:01-04:19","slug":"create-aliases-03-01-04-19","link":"#create-aliases-03-01-04-19","children":[]},{"level":3,"title":"Create Override Rule 04:19-05:53","slug":"create-override-rule-04-19-05-53","link":"#create-override-rule-04-19-05-53","children":[]},{"level":3,"title":"Summary 05:53-06:11","slug":"summary-05-53-06-11","link":"#summary-05-53-06-11","children":[]}]}],"git":{"updatedTime":1735524110000},"filePathRelative":"05/05.03.Firewalls.md"}');export{u as comp,d as data};
