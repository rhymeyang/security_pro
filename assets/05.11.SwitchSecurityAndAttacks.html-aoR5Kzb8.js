import{_ as i,c as n,b as a,a as e,d as t,o}from"./app-B7eXnVer.js";const r={};function c(l,s){return o(),n("div",null,s[0]||(s[0]=[a("<p>As you study this section, answer the following questions:</p><ul><li> How are switches indirectly involved in Address Resolution Protocol (ARP) poisoning? </li><li> How does the attacker hide his identity when performing media access control (MAC) address spoofing? </li><li> What is the function of a trunk port? </li><li> What is required for devices to communicate between VLANs? </li><li> How is port security different from port filtering? </li></ul><p>In this section, you will learn to:</p><ul><li>Harden a switch.</li><li>Secure access to a switch.</li><li>Use best practices to ensure switch security.</li></ul><p>The key terms for this section include:</p>",5),e("table",{class:"terms"},[e("thead",null,[e("tr",null,[e("th",{class_:"firstTableHeader",scope:"col",class:"fw-bold"}," Term "),e("th",{scope:"col",class:"fw-bold"}," Definition ")])]),e("tbody",null,[e("tr",null,[e("td",null," Virtual LAN (VLAN) "),e("td",null," A logical grouping of computers based on switch port. ")]),e("tr",null,[e("td",null," MAC filtering/port security "),e("td",null," A switch feature that restricts connection to a given port based on the MAC address. ")]),e("tr",null,[e("td",null," Port authentication "),e("td",null," A switch feature that follows the 802.1x protocol to allow only authenticated devices to connect. ")]),e("tr",null,[e("td",null,[t(" Content-addressable "),e("br"),t(" memory (CAM) table ")]),e("td",null," A table maintained by a switch that contains MAC addresses and their corresponding port locations. ")]),e("tr",null,[e("td",null," Dynamic Host Configuration protocol (DHCP) snooping "),e("td",null," A security feature on some switches that filters out untrusted DHCP messages. ")]),e("tr",null,[e("td",null,[t(" Dynamic ARP "),e("br"),t(" Inspection (DAI) ")]),e("td",null," A security feature on some switches that verifies each ARP request has a valid IP to MAC binding. ")]),e("tr",null,[e("td",null," MAC flooding "),e("td",null," An attack that overloads a switch's MAC forwarding table to make the switch function like a hub. ")]),e("tr",null,[e("td",null," ARP spoofing "),e("td",null," An attack in which the attacker's MAC address is associated with the IP address of a target's device. ")]),e("tr",null,[e("td",null," VLAN hopping "),e("td",null," An attack in which the source MAC address is changed on frames sent by the attacker. ")]),e("tr",null,[e("td",null," Double tagging "),e("td",null," An attack in which the attacking host adds two VLAN tags instead of one to the header of the frames that it transmits. ")]),e("tr",null,[e("td",null," MAC spoofing "),e("td",null," An attack in which the source MAC address is changed in the header of a frame. ")]),e("tr",null,[e("td",null,[t(" Dynamic Trunking "),e("br"),t(" Protocol (DTP) ")]),e("td",null," An unsecure protocol that could allow unauthorized devices to modify a switch's configuration. ")])])],-1),e("p",null,"This section helps you prepare for the following certification exam objectives:",-1),e("table",{class:"objectives"},[e("thead",null,[e("tr",null,[e("th",{class_:"firstTableHeader",scope:"col",class:"fw-bold"}," Exam "),e("th",{scope:"col",class:"fw-bold"}," Objective ")])]),e("tbody",null,[e("tr",null,[e("td",null," TestOut Security Pro "),e("td",null,[t(" 2.2 Harden Network Devices "),e("blockquote",null," 2.2.7 Create and Connect to a Virtual Local Area Network (VLAN) ")])]),e("tr",null,[e("td",null," CompTIA Security+ SY0-601 "),e("td",null,[t(" 1.4 Given a scenario, analyze potential indicators associated with network attacks. "),e("ul",null,[e("li",null,[t(" Layer 2 attacks "),e("ul",null,[e("li",null," Address resolution "),e("li",null," protocol (ARP) poisoning "),e("li",null," Media access control (MAC) flooding "),e("li",null," MAC cloning ")])])]),e("p",null," 3.3 Given a scenario, implement secure network designs. "),e("ul",null,[e("li",null,[t(" Network segmentation "),e("ul",null,[e("li",null," Virtual local area network (VLAN) ")])]),e("li",null,[t(" Port security "),e("ul",null,[e("li",null," Broadcast storm prevention "),e("li",null," Bridge Protocol Data "),e("li",null," Unit (BPDU) guard "),e("li",null," Loop prevention "),e("li",null," Dynamic Host Configuration Protocol (DHCP) snooping "),e("li",null," Media access control (MAC) filtering ")])]),e("li",null,[t(" Network appliances "),e("ul",null,[e("li",null," Aggregators ")])]),e("li",null,[t(" Port spanning/port mirroring< "),e("ul",null,[e("li",null," Port taps ")])])])])])])],-1),a('<h2 id="_5-11-1-switch-features" tabindex="-1"><a class="header-anchor" href="#_5-11-1-switch-features"><span>5.11.1 Switch Features</span></a></h2><h3 id="switch-features-00-00-00-38" tabindex="-1"><a class="header-anchor" href="#switch-features-00-00-00-38"><span>Switch Features 00:00-00:38</span></a></h3><p>In this lesson, I&#39;m going to discuss switches and some of their features. This isn&#39;t meant to be an exhaustive discussion of switch configurations. Instead, I&#39;ll cover topics that can affect your network security. As you probably already know, a switch is a connectivity device that provides communication between different network devices. Switches often use a wired communication medium such as twisted pair and fiber optic to carry the signaling to and from their connected devices. Switches are full-duplex discretionary interconnects that send information only to the intended recipient. I&#39;ll explain all of this further in this lesson.</p><h3 id="how-a-switch-works-00-38-02-05" tabindex="-1"><a class="header-anchor" href="#how-a-switch-works-00-38-02-05"><span>How a Switch Works 00:38-02:05</span></a></h3><p>First, let&#39;s talk about how a switch works. Every device that connects to a network, whether wired or wireless, has a unique identifier called a Media Access Control address, or MAC address. The MAC address is a 48-bit number separated into six 2-byte numbers. The first 24 bits represent the device manufacturer. In this example, 18-66-DA represents Dell, Inc. The last 24 bits are a random sequential number assigned by the manufacturer to ensure that each device has a unique MAC address. When referencing the OSI model, a MAC address is a layer 2 address and the data that traverses the wire is called a frame. The switch keeps track of the MAC address to which it&#39;s connected. Inside every switch is a table of MAC addresses and the port the device is plugged into. This is called the MAC address table. As data traverses the switch, it builds this table based on the frames passing through it. This process continues until all devices connected to the switch are accounted for and the MAC address table is complete. When the MAC address table is complete, the switch can send data directly to the appropriate end device since the table defines which port each device is connected to.</p><p>It&#39;s also important to know that switches are full-duplex devices. This means they can send and receive data simultaneously. This, along with the data separation by port, means that the chance of an Ethernet collision happening is reduced significantly and speed and efficiency are increased.</p><h3 id="unmanaged-vs-managed-switches-02-05-03-29" tabindex="-1"><a class="header-anchor" href="#unmanaged-vs-managed-switches-02-05-03-29"><span>Unmanaged vs. Managed Switches 02:05-03:29</span></a></h3><p>Switches are classified as being either unmanaged or managed. An unmanaged switch is often found in homes and small office networks and provides the ability to connect all your devices. Unmanaged switches, on the other hand, aren&#39;t configurable. This is just fine for smaller networks that really don&#39;t have a need for much sophistication. But larger networks do need additional capabilities. This is where you&#39;ll require a managed switch. Managed switches usually have a web-based or command line interface that lets you configure how the switch functions.</p><p>For example, a switch&#39;s configuration tools let you create and manage virtual LANs, or VLANs. VLANs segment data into different zones. This segmentation might be required for such things as voice, surveillance, and storage. Or it could simply separate zone data for additional resiliency and privacy. Managed switches also support link aggregation, which provides the ability to combine multiple switch ports in parallel to increase total available bandwidth. This is often used when connecting to devices with multiple NICs that provide things like file and storage services. You can also configure a switch for port security. This lets you define things like which devices and how many can be attached to a single port. A managed switch has many additional benefits that go beyond the scope of this course. But the</p><p>basic takeaway here is most organizations use managed switches since they can be configured and provide better security.</p><h3 id="switch-aggregation-03-29-04-35" tabindex="-1"><a class="header-anchor" href="#switch-aggregation-03-29-04-35"><span>Switch Aggregation 03:29-04:35</span></a></h3><p>Another related topic is switch aggregation. Let&#39;s look at that a little closer. Often, when you create a switching solution, it&#39;s necessary to employ multiple switches throughout a building. There are several reasons for this. The most prevalent is the need to have close proximity to end devices. Ethernet specifications provide for a maximum length of 100 meters between a switch and an endpoint, assuming there are no breaks in the connection such as a wall plate or patch panel. Often, we place wiring closets throughout a building so the 100-meter limit isn&#39;t violated.</p><p>Normally, an access level switch is placed in the wiring closet to connect a system that&#39;s configured for VLANs, port security, and voice over IP. Depending on the number of connections you&#39;re dealing with, you might deploy multiple switches for this purpose. These switches are then connected to an upstream switch. The upstream switch is usually much faster and more efficient. Often, the connections between the upstream switch and the access switches are fiber optic, which doesn&#39;t have the same distance limitations as a twisted pair of Ethernet cables. In addition, fiber-optic connections are much faster than twisted-pair Ethernet connections.</p><h3 id="layer-2-vs-layer-3-04-35-05-40" tabindex="-1"><a class="header-anchor" href="#layer-2-vs-layer-3-04-35-05-40"><span>Layer 2 vs. Layer 3 04:35-05:40</span></a></h3><p>When you make your decision on the type of switch to purchase, you&#39;ll have to choose between a layer 2 and layer 3 switch. While you use both switches to connect end devices to a network, they each have different features.</p><p>For example, as the name implies, a layer 2 switch operates at the second layer of the OSI model, which is the Data Link layer. This means the switch understands the connected end devices&#39; physical or MAC addresses. At this level, data passing through switches are known as frames. The port used to send data to an end device is determined by that device&#39;s MAC address.</p><p>A layer 3 switch operates at the third layer of the OSI model, which is the Network layer. These types of switches can perform the same functions as layer 2 switches. But in addition, a layer 3 switch is aware of the end device&#39;s IP address. At the Network layer, the data passing through the switch is known as a packet. A layer 3 switch is also capable of limited IP routing, meaning that layer 3 routers are often used to route packets to and from different VLANs. In practice, Layer 3 switches aren&#39;t intended for connecting end devices. Instead, we typically use them for upstream switches.</p><h3 id="switch-security-issues-05-40-06-10" tabindex="-1"><a class="header-anchor" href="#switch-security-issues-05-40-06-10"><span>Switch Security Issues 05:40-06:10</span></a></h3><p>Now that you understand the basic functions of a switch, let&#39;s discuss switch security. Just like any network device, threat actors try to exploit any weakness they can. Switches are no exception. Attackers can use a variety of techniques to compromise switches to gain access to a system.</p><p>As such, it&#39;s important for system administrators to take precautions and disable switch functions that aren&#39;t in use and to monitor switch activity. Three security issues to look out for are MAC flooding, switch spoofing, and ARP poisoning. Let&#39;s look at each.</p><h3 id="mac-flooding-06-10-06-52" tabindex="-1"><a class="header-anchor" href="#mac-flooding-06-10-06-52"><span>MAC Flooding 06:10-06:52</span></a></h3><p>We went over how a switch maintains a table of MAC addresses and the ports to which they&#39;re connected. A switch maintains enough memory to store that data and not much more. Knowing this, an attacker might try to flood the switch with bogus MAC addresses. This pushes the legitimate MAC address out and fills up the switch&#39;s memory. In effect, this breaks the switch. When the memory is full, the switch reverts to an open state where data is sent to all connected devices. This means that any device connected to the switch is able to capture all data coming out of it. After launching a successful MAC flooding attack, a malicious user can use a packet analyzer to capture sensitive data being transmitted between computers. This wouldn&#39;t be possible were the switch operating normally.</p><h3 id="switch-spoofing-06-52-08-09" tabindex="-1"><a class="header-anchor" href="#switch-spoofing-06-52-08-09"><span>Switch Spoofing 06:52-08:09</span></a></h3><p>Now, let&#39;s look at switch spoofing. As we&#39;ve already discussed, VLANs are used in most organizations to segregate data. Basically, a single network can be broken into smaller chucks using VLAN segmentation. While this is a good practice, it can potentially lead to problems if not done correctly. An attacker could use a less secure segment to access a more secure one. We often configure switches to host multiple VLANs so that end devices that are connected to the right VLAN can communicate with other devices on their individual segment.</p><p>Switches eventually do need to communicate with other switches, though. To do this, the switches must be able to transfer information across all VLANs. Someone needs to configure a port as a trunk port, which is then connected to the receiving switch&#39;s trunk port. By default, trunk ports have access to all VLANs and pass traffic for multiple VLANs across the same physical link. The attacker takes advantage of this by using Dynamic Trunking Protocol messages, or DTP messages, to spoof itself as a switch. After they accomplish this, the attacker is able to capture all data for all the attached VLANs. One way to prevent a switch spoofing attack is for you to turn off trunking on all ports except the ones that require it. In addition, you should disable DTP on ports that do require trunking, and manually enable the trunking yourself.</p><h3 id="arp-poisoning-08-09-09-08" tabindex="-1"><a class="header-anchor" href="#arp-poisoning-08-09-09-08"><span>ARP Poisoning 08:09-09:08</span></a></h3><p>The last switch security issue we&#39;ll discuss is known as ARP poisoning. Address Resolution Protocol, or ARP, associates a device&#39;s MAC address with the IP address assigned to it. To aid in this process, an ARP table is created and stored in a switch&#39;s memory for easy lookup. Knowing this, attackers send commands to the switch to overwrite the switch&#39;s ARP table contents by replacing a good, known MAC address with the attacker&#39;s device&#39;s MAC address. As a result, data that was intended for the legitimate device is now sent to the attacker&#39;s device. In many cases, the attacker captures the data and sends it on to its rightful owner. This is known as a man-in-middle attack.</p><p>ARP poisoning attacks are difficult to mitigate. If an attacker has access to the internal network, there&#39;s little an administrator can do. Specialized training might be a good idea to help you avoid this type of attack. When you work over the internet, you should try to use virtual private networks, or VPNs. VPNs use an encrypted tunnel that largely blocks your activity from ARP spoofing.</p><h3 id="summary-09-08-09-31" tabindex="-1"><a class="header-anchor" href="#summary-09-08-09-31"><span>Summary 09:08-09:31</span></a></h3><p>That&#39;s it for this lesson. This lesson introduced many features we have available on modern switches. We discussed how a switch works, how you can aggregate switches, and the differences between a layer 2 and a layer 3 switch. We ended this lesson by discussing three potential security concerns, which are MAC flooding, switch spoofing, and ARP poisoning.</p><h2 id="_5-11-2-securing-network-switches" tabindex="-1"><a class="header-anchor" href="#_5-11-2-securing-network-switches"><span>5.11.2 Securing Network Switches</span></a></h2><h3 id="secure-network-switches-00-00-00-22" tabindex="-1"><a class="header-anchor" href="#secure-network-switches-00-00-00-22"><span>Secure Network Switches 00:00-00:22</span></a></h3><p>In this lesson, I&#39;ll discuss several of the best practices you can implement to help secure your network switches. I&#39;ll also cover additional topics that further lock down a switch and add additional controls to make it more secure and less susceptible to an attack. These topics include port security, DHCP snooping, and dynamic ARP inspection.</p><h3 id="best-practices-00-22-01-27" tabindex="-1"><a class="header-anchor" href="#best-practices-00-22-01-27"><span>Best Practices 00:22-01:27</span></a></h3><p>The first best practice in securing a switch is to change the switch&#39;s default credentials. When doing so, choose a username that&#39;s not too easy to guess and a complex password using lower and uppercase characters, numbers, and non-alphanumeric symbols.</p><p>You should enable secure shell, or SSH, for remote access and also disable telnet. Telnet uses cleartext for usernames and passwords, which isn&#39;t good. When it comes to securing a switch, Simple Network Management Protocol, or SNMP, is a powerful ally when you configure it correctly. When it&#39;s left unconfigured, though, it presents a security vulnerability that can simply be avoided by disabling it. In the unlikely event there are switch ports left open with no connection, ensure those ports are disabled to prevent unwanted connections.</p><p>In addition, you should add a warning banner that states that unauthorized switch configuration access is prohibited. The last best practice is to enable logging. This allows administrators to see any major or minor events a switch experiences. You can also use a logging server to store, archive, and consolidate logging for the enterprise.</p><h3 id="port-security-01-27-02-04" tabindex="-1"><a class="header-anchor" href="#port-security-01-27-02-04"><span>Port Security 01:27-02:04</span></a></h3><p>Now, let&#39;s shift gears to port security. It&#39;s up to the switch manufacturer to define how switch security is implemented and the command syntax that&#39;s used for setup and configuration. But you can use port security as more granular approach to switch security. Port security configurations can limit the number of devices allowed per port, limit hardware address connections, and define what happens when the port experiences a violation of these settings. For example, you could set it to shut down after a breach. An important note here is that on many switches, port security can&#39;t be configured on trunk, EtherChannel, or port analyzer ports.</p><h3 id="limit-devices-per-port-02-04-02-33" tabindex="-1"><a class="header-anchor" href="#limit-devices-per-port-02-04-02-33"><span>Limit Devices per Port 02:04-02:33</span></a></h3><p>Since organizations face constant battles with finding open switch connections in a growing workforce, one solution is to add an intermediate switch. In this case, a small switch is placed in a small office that allows several connections, and then that switch is connected to the upstream switch. If the number of devices is limited on the upstream switch and set to one, only the first device that tries to connect is allowed a connection. When the second device tries to connect, the switch denies the connection and the second device won&#39;t connect to the network</p><h3 id="secure-with-mac-address-02-33-03-12" tabindex="-1"><a class="header-anchor" href="#secure-with-mac-address-02-33-03-12"><span>Secure with MAC address 02:33-03:12</span></a></h3><p>You can also configure switch ports to only accept connections from specific MAC addresses.</p><p>For example, let&#39;s configure port 1 for the MAC address ending in BA, and port 2 for the MAC address ending in 45. Assuming the devices connected to those ports match the required MAC address, they&#39;re</p><p>allowed to connect. While this is a good defense, it&#39;s difficult to maintain and very simple to defeat if one device is swapped out for another. The port for that device will need to be reconfigured if a new computer is bought or the network card is changed. Likewise, it&#39;s very easy to spoof a MAC address on a given system, rendering MAC address security ineffective.</p><h3 id="port-security-violations-03-12-03-49" tabindex="-1"><a class="header-anchor" href="#port-security-violations-03-12-03-49"><span>Port Security Violations 03:12-03:49</span></a></h3><p>When a port security rule violation occurs, the switch may react differently depending on its configuration. This might be implemented differently by different switch manufacturers, but the actions are usually closely related. For the least restrictive action, the port simply drops frames from the offending device. The port or interface remains operational and nothing is reported in the logs.</p><p>Another setting tells the switch to not only drop the frame but send an alert and log the offending operation. The third, most restrictive violation disables the port when a violation is detected. This requires intervention to re-enable the port and is the default violation mode.</p><h3 id="additional-security-concerns-03-49-04-04" tabindex="-1"><a class="header-anchor" href="#additional-security-concerns-03-49-04-04"><span>Additional Security Concerns 03:49-04:04</span></a></h3><p>There are several additional measures you can take to protect network switches. Many are common sense precautions, such as physical security and the best practices listed earlier in this lesson. Let&#39;s discuss two additional security configurations you might consider.</p><h3 id="dhcp-snooping-04-04-05-28" tabindex="-1"><a class="header-anchor" href="#dhcp-snooping-04-04-05-28"><span>DHCP Snooping 04:04-05:28</span></a></h3><p>First, is DHCP snooping. DHCP, as a service, dynamically distributes network parameters, such as IP addresses and default gateways to network devices. For example, when you first start a workstation, it automatically requests and receives the IP information from a DHCP server. In this type of environment, the DHCP server is known as a trusted device, in the same way that routers, firewalls, and file servers are trusted. A trusted device simply means that it&#39;s managed by an administrator in your company.</p><p>Since most organizations use DHCP for dynamic IP address allocation, attackers often try to place a rogue DHCP server on the network in an attempt to provide end devices with forged IP address information to introduce vulnerabilities onto the network. DHCP snooping attempts to prevent this from occurring. But for DHCP snooping to work, it must be enabled on your devices. While the actual configuration for DHCP snooping is beyond the scope of this lesson, it&#39;s important to learn which process to use to enable and configure DHCP snooping in your infrastructure. Know that the configuration process will vary by manufacturer. Once configured, the DHCP snooping process detects, blocks, and drops DHCP packets when the DHCP information comes from an untrusted source. This information is also logged so further actions can be taken to locate and eradicate the rouge DHCP server.</p><h3 id="dynamic-arp-inspection-05-28-07-04" tabindex="-1"><a class="header-anchor" href="#dynamic-arp-inspection-05-28-07-04"><span>Dynamic ARP Inspection 05:28-07:04</span></a></h3><p>Another security feature available on many switches is called dynamic ARP inspection. This feature rejects invalid or malicious ARP packets, which can help prevent man-in-the-middle attacks.</p><p>A man-in-the-middle attack is when an attacker secretly relays or alters the communication between two parties who believe they&#39;re directly communicating with each other. So how does an attacker implement a man-in-the-middle attack?</p><p>In normal operations, ARP tables are used to identify end devices. Once identified, communications can flow between the devices.</p><p>So an attacker assumes the identity of both endpoints and inserts themself in the middle of the communication. Let&#39;s see how that works. First, they poison the ARP cache of end device B and tell B that he or she is A. Then they tell A that he or she is B. Once completed, the original connection between A and B is replaced with A sending information to M and M forwarding the information to B, and vice versa. At this point, M sees all the communication traffic between A and B. He or she can log the information or change it depending on the intent. Adding dynamic ARP inspection can help to prevent this type of attack.</p><p>To do this, first configure DHCP snooping on your switch as we just discussed. Next, you need to enable dynamic ARP inspection, or DAI. Once DAI is enabled and configured, only trusted sources can affect the ARP table. So now the switch drops the ARP packet when an untrusted source, in this case the attacker, tries to poison the ARP table. That&#39;s because the sender&#39;s MAC address and sender&#39;s IP address don&#39;t match an entry in the DHCP snooping database.</p><h3 id="summary-07-04-07-29" tabindex="-1"><a class="header-anchor" href="#summary-07-04-07-29"><span>Summary 07:04-07:29</span></a></h3><p>That&#39;s it for this lesson. In this lesson, we discussed several best practices to ensure switch security. Next, we talked about how port security can be used to prevent unauthorized access to a network. We also discussed how you can use DHCP snooping in conjunction with dynamic ARP inspection to thwart rogue DHCP servers and man-in-the-middle attacks.</p><h2 id="_5-11-3-switch-security-facts" tabindex="-1"><a class="header-anchor" href="#_5-11-3-switch-security-facts"><span>5.11.3 Switch Security Facts</span></a></h2><p>This lesson covers the following topics:</p><ul><li>Security switch features</li><li>Implement switch security</li><li>Spanning Tree Protocol</li></ul><h3 id="security-switch-features" tabindex="-1"><a class="header-anchor" href="#security-switch-features"><span>Security Switch Features</span></a></h3><p>The following table lists switch features that can be implemented to increase network security:</p>',66),e("table",null,[e("thead",null,[e("tr",null,[e("th",{class_:"firstTableHeader",scope:"col",class:"fw-bold"}," Feature "),e("th",{scope:"col",class:"fw-bold"}," Description ")])]),e("tbody",null,[e("tr",null,[e("td",null,[t(" Virtual LAN "),e("br"),t(" (VLAN) ")]),e("td",null,[t(" A virtual LAN (VLAN) is a logical grouping of computers based on switch ports. "),e("ul",null,[e("li",null," VLAN membership is configured by assigning a switch port to a VLAN. "),e("li",null," A switch can have multiple VLANs configured on it, but each switch port can only be a member of a single VLAN (see exception described below). "),e("li",null," VLANs can be defined on a single switch or configured on multiple interconnected switches. With multiple switches, each switch can be configured with the same VLANs, and devices on one switch can communicate with devices on other switches as long as they are members of the same VLAN. "),e("li",null,[t(" A trunk port is used to connect two switches together. "),e("ul",null,[e("li",null," Typically, Gigabit Ethernet ports are used for trunk ports, although any port can be a trunk port. "),e("li",null," A trunk port is a member of all VLANs defined on a switch and carries traffic between the switches. "),e("li",null," When trunking is used, frames that are sent over a trunk port are tagged by the first switch with the VLAN ID so that the receiving switch knows to which VLAN the frame belongs. "),e("li",null," The Trunking Protocol describes the format that switches use for frame tagging with the VLAN ID. "),e("li",null," Because end devices do not understand the VLAN tags, the tag is removed from the frame by the switch before the frame is forwarded to the destination device. "),e("li",null," VLAN tagging is only used for frames that travel between switches on the trunk ports. ")])]),e("li",null," Using VLANs, the switch can be used to create multiple IP broadcast domains. Each VLAN is in its own broadcast domain, and broadcast traffic is sent only to members of the same VLAN. "),e("li",null," In a typical configuration with multiple VLANs, workstations in one VLAN can not communicate with workstations in other VLANs. To enable inter-VLAN communication, you need to use a router (or an OSI Layer 3 switch). ")])])]),e("tr",null,[e("td",null," MAC filtering/port security "),e("td",null,[t(" With switch port security, the devices that can connect to a switch through the port are restricted. "),e("ul",null,[e("li",null," Port security uses the MAC address to identify allowed and denied devices. "),e("li",null," On the switch, MAC addresses are stored in RAM in a table and are associated with the port. The table can be manually configured, or learning devices can automatically build the table. "),e("li",null," You can specify that only a single MAC address is allowed per port, or you can configure the each port to allow multiple addresses. "),e("li",null," With automatic configuration, the next device or specified number of devices can connect to the port and additional devices are denied. "),e("li",null," A port violation occurs when an unauthorized device tries to connect. The switch configuration determines how the switch handles frames from an unauthorized device. The switch can either drop all frames from the unauthorized device or shut down the port, disabling all communications through that port. ")])])]),e("tr",null,[e("td",null," Port authentication (802.1x) "),e("td",null,[t(" Port authentication is provided by the 802.1x protocol and allows only authenticated devices to connect to the LAN through the switch. Authentication uses user names and passwords, smart cards, or other authentication methods. "),e("ul",null,[e("li",null," When a device first connects, the port is set to an unauthorized state. Ports in unauthorized states can be used only for 802.1x authentication traffic. "),e("li",null," The process begins by the switch sending an authentication request to the device. "),e("li",null," The device responds with authentication credentials, which are forwarded by the switch to the authentication device (such as a RADIUS server). "),e("li",null," After the server authenticates the device or the user, the switch port is placed in an authorized state, and access to other LAN devices is allowed. When a device disconnects, the switch places the port in the unauthorized state. ")])])])])],-1),a('<h3 id="implement-switch-security" tabindex="-1"><a class="header-anchor" href="#implement-switch-security"><span>Implement Switch Security</span></a></h3><p>Be aware of the following when implementing switch security:</p><ul><li style="list-style:none;"> Creating VLANs with switches offers many administrative benefits. For example, you can: <ul><li> Create virtual LANs based on criteria such as workgroup, protocol, or service </li><li> Simplify device moves (devices are moved to new VLANs by modifying the port assignment) </li><li> Control broadcast traffic based on logical criteria (only devices in the same VLAN receive broadcast traffic) </li><li> Control security (isolate traffic within a VLAN) </li></ul></li><li> When you use switches to create VLANs, you still need routers to: <ul><li> Route data between VLANs </li><li> Provide port filtering. Port filtering filters network packets in and out of devices based on their application type or port number. </li><li> Route data into and out of the local area network </li></ul></li><li> VLANs are commonly used with voice over IP (IP (VoIP) to distinguish voice traffic from data traffic. Traffic on the voice VLAN can be given a higher priority to ensure timely delivery. </li><li> MAC filtering uses the MAC address of a device to drop or forward frames through the switch. Port authentication requires that the user or device authenticates before frames are forwarded through the switch. </li><li> In general, all switch ports are enabled by default. To increase the security of the switch and network, you should disable individual ports that are not in use. </li></ul><h3 id="spanning-tree-protocol" tabindex="-1"><a class="header-anchor" href="#spanning-tree-protocol"><span>Spanning Tree Protocol</span></a></h3><p>To provide fault tolerance, many networks implement redundant paths between devices using multiple switches. However, providing redundant paths between segments causes packets to be passed between the redundant paths endlessly. This condition is known as a switching loop. Switching loops lead to incorrect entries in a MAC address table, making a device appear to be connected to the wrong port and causing unicast traffic to be circulated in a loop between switches. The Spanning Tree Protocol runs on switches to prevent switching loops by making only a single path between switches active at a single time.</p><p>The Spanning Tree Protocol also:</p><ul><li> Provides redundant paths between devices </li><li> Recovers automatically from a topology change or device failure by unblocking redundant paths </li><li> Identifies the optimal path between any two network devices </li><li> Calculates the best loop-free path through a network by assigning a role to each bridge or switch and by assigning roles to the ports of each bridge or switch </li></ul><p>The type of ports used by the Spanning Tree Protocol are:</p><ul><li> Root ports, which are configured to communicate directly to the root switch. </li><li> Designated ports, which forward frames to and from attached hosts. </li><li> Blocked ports, which form a loop and are used for redundancy. </li></ul><p>Ports in the Spanning Tree Protocol exist in one of five states:</p><ul><li> Blocking </li><li> Listening </li><li> Learning </li><li> Forwarding </li><li> Disabled </li></ul><h2 id="_5-11-4-switch-attacks" tabindex="-1"><a class="header-anchor" href="#_5-11-4-switch-attacks"><span>5.11.4 Switch Attacks</span></a></h2><h3 id="switch-attacks-00-00-00-31" tabindex="-1"><a class="header-anchor" href="#switch-attacks-00-00-00-31"><span>Switch Attacks 00:00-00:31</span></a></h3><p>Threat actors look for any opening they can find, and network switches are no exception. Inside attacks take advantage of anything accessible, and attackers can exploit switches to gain valuable information. It&#39;s important for you to know that all network information flows through switches and routers, including such things as authentication information and data. Attackers can use a variety of switch attacks methods to gather valuable information that they can use later to exploit the network.</p><h3 id="common-switch-attacks-00-31-00-47" tabindex="-1"><a class="header-anchor" href="#common-switch-attacks-00-31-00-47"><span>Common Switch Attacks 00:31-00:47</span></a></h3><p>In this lesson, we&#39;ll go over the following attack methods: MAC flooding, ARP spoofing, VLAN hopping, STP manipulation, double tagging, and MAC spoofing in regard to Layer 2 switches. Remember, Layer 2 switches understand Ethernet frames at the OSI Data Link layer.</p><h3 id="mac-flooding-00-47-02-05" tabindex="-1"><a class="header-anchor" href="#mac-flooding-00-47-02-05"><span>MAC Flooding 00:47-02:05</span></a></h3><p>The first attack to examine is MAC flooding. Switches maintain MAC address tables, sometimes called Content Access Memory tables, or CAM tables, to track workstations&#39; and ports&#39; associations. Switches learn which workstation is connected to each port, and that information is stored in the MAC address table and used when switches forward information.</p><p>For example, let&#39;s say that Workstation A wants to send information to Workstation D. The frame has a source address ending in As, and the destination address is the address ending with Ds. When A sends the information, the switch examines the destination address and sends the data out port 1 to its destination. Workstations B and C aren&#39;t involved, so they never see the information.</p><p>Suppose an attacker wants to see all data passing through this switch. Considering that a switch&#39;s normal operation only sends data to the intended recipient, the attacker would only be able see data destined for his or her workstation, which is very unlikely. But the attacker can flood the switch with fake MAC address information and fill up the MAC address table. Once the switch can no longer store any more MAC addresses, the switch enters a fail-open mode and behaves the same as a network hub or Layer 1 device. This means that any packet coming in now go out to all switch ports.</p><h3 id="arp-spoofing-02-05-03-00" tabindex="-1"><a class="header-anchor" href="#arp-spoofing-02-05-03-00"><span>ARP Spoofing 02:05-03:00</span></a></h3><p>The next switch attack is called ARP spoofing, also known as ARP poisoning. But let&#39;s first talk about Address Resolution Protocol, or ARP, which works similarly to DNS. DNS resolves a fully qualified domain name into an IP address, while ARP associates a device&#39;s MAC address with the IP address assigned to that same device. To aid in this process, a switch creates and stores an ARP table in memory for easy lookup.</p><p>Knowing this, an attacker sends commands to the switch to overwrite the contents of its ARP table by replacing a good, known MAC address in the table with the MAC address of the attacker&#39;s device. This is the ARP spoofing or ARP poisoning. As a result, data that was intended for the legitimate device is now sent to the attacker&#39;s device. In many cases, the attacker captures the data and sends it on to its rightful owner. This is known as a man-in-middle attack.</p><h3 id="vlan-hopping-03-00-03-26" tabindex="-1"><a class="header-anchor" href="#vlan-hopping-03-00-03-26"><span>VLAN Hopping 03:00-03:26</span></a></h3><p>Another attack method you should know about is VLAN hopping. VLANs are used to separate traffic into sections that function like networks. This is often done to all the different VLANS that carry different types of traffic, such as data, voice, or surveillance information. Since each VLAN is its own network, a device on one VLAN can&#39;t communicate with a device on another VLAN without a router. There are a couple of techniques attackers can use to take advantage of this VLAN separation.</p><h3 id="vlan-spoofing-03-26-05-11" tabindex="-1"><a class="header-anchor" href="#vlan-spoofing-03-26-05-11"><span>VLAN Spoofing 03:26-05:11</span></a></h3><p>The first is VLAN spoofing. VLAN spoofing takes advantage of a switch that&#39;s using its default settings, which allows for dynamic trunk negotiation. Depending on the switch, this default setting is known as dynamic auto or dynamic desirable. This means that if you have a switch connected to the original switch, the ports connecting the two are automatically configured as a trunk connection.</p><p>A trunk connection allows data from one switch to pass to another. A spoofing attach takes advantage of this by fooling the switch into thinking the attacker is connected using a trunk line. Although there are several ways to carry out a spoofing attach, such as adding a new switch, we&#39;ll look at how someone could accomplish a spoofing attach with just one switch.</p><p>Our switch here is configured with two VLANs—VLAN 10 and VLAN 20—with both having several computers connected to it. Our attacker, a disgruntled employee, is connected to VLAN 10 and wants to steal sensitive information from the company&#39;s chief executive officer. But as mentioned, VLAN 10 is a separate network from VLAN 20. So as-is, the attacker can&#39;t access the CEO&#39;s computer.</p><p>By using a tool like Yersinia, our disgruntled employee can send the switch a packet that tells the switch the port he or she is using is really connected to another network switch. This is done using a Dynamic Trunking Protocol frame, or DTP frame. Since the switch is configured to auto-negotiate for a trunk line, it assumes the attacker really is a switch and opens his or her port as a trunk line. With the attacker&#39;s port now configured this way, he or she can easily capture packets from the CEO&#39;s computer. Keep in mind that the best way to protect your network from this type of attack is to disable the switch&#39;s auto-negotiation setting for all ports except those to which an authorized switch is attached.</p><h3 id="double-tagging-05-11-06-40" tabindex="-1"><a class="header-anchor" href="#double-tagging-05-11-06-40"><span>Double Tagging 05:11-06:40</span></a></h3><p>Another method attackers use is called double tagging. This VLAN hopping technique is used when the attacker&#39;s computer is on one VLAN switch, and the target computer is on a VLAN attached to a separate switch. In addition, the switches must be configured to use what&#39;s called native VLANs.</p><p>When a packet is sent to a switch, it includes what&#39;s known as a VLAN tag. This tag&#39;s purpose is to indicate which switch should process the frame. For example, you&#39;ll notice that both users are on VLAN 10. If User A wants to send data to User B, the frame would include the VLAN tag indicating that the frame was intended for VLAN 10. When the data reaches the switch, the VLAN tag is removed and the packet is sent to its rightful destination.</p><p>Double tagging is accomplished by manipulating the frame being sent to include two VLAN tags. So one for VLAN 10 and one for Switch 2, or VLAN 20. When this type of frame is received by VLAN 10&#39;s switch, the first VLAN tag is removed. But seeing that the second VLAN tag is referencing VLAN 20, the frame is forwarded to that switch.</p><p>Then, as it normally would, this switch strips off the second VLAN tag and sends the frame to the victim&#39;s VLAN, successfully hopping from one VLAN to another. To prevent double tagging, it&#39;s important to make sure that your switches aren&#39;t configured to use native VLANs. This is because trunk ports configured with a native VLAN won&#39;t apply their own VLAN tag when sending these frames, which lets the attacker&#39;s tagged frames to continue as I just described.</p><h3 id="stp-manipulation-06-40-08-59" tabindex="-1"><a class="header-anchor" href="#stp-manipulation-06-40-08-59"><span>STP Manipulation 06:40-08:59</span></a></h3><p>Another common switch attack is known as a Spanning Tree Protocol, or STP, manipulation attack. STP is normally configured on a network with several switches. The primary purpose is to prevent switching loops. Often, whether intentional or not, there are several paths data can take to get from its source to its destination. STP dynamically turns off certain switch ports to ensure that data can&#39;t get stuck hopping from switch to switch without ever reaching its intended target.</p><p>While STP configuration is beyond the scope of this lesson, it&#39;s important to understand that a single switch is designated as the root bridge. The root bridge is an optimized data path&#39;s primary source. This is necessary because some switches often connect to other switches to form redundant connections to ensure communications continue even if a switch or port fails. The root bridge is used to pass data from switch to switch since all switches that participate in the tree know where the root bridge is located.</p><p>So the root bridge is responsible for calculating the spanning tree from topology changes advertised by non-root bridges. If an attacker can become the root bridge, he or she is then able to see a variety of frames that they normally wouldn&#39;t see. To perpetrate this attack, the attacker inserts their switch into the tree and manipulates it to appoint his or her switch as the root bridge. By doing this, he or she can use a sniffer to collect data traversing the network. An attacker accomplishes this manipulation by sending bridge ID frames, or BID frames, with a lower ID than that currently being used by the legitimate root bridge.</p><p>There are several step you can take to mitigate this type of attack. First, make sure that attackers can&#39;t easily guess which bridge ID number is being used by the legitimate root bridge. Most switches have a default root bridge ID, ensuring that your bridge ID is considerably lower than the default one. If your switch supports it, a second option is to set up Bridge Protocol Data Units Guard, or BPDU Guard. This feature allows an interface to put itself into blocking state when it receives a BPDU packet meant to change the root bridge switch. Your third option is to enable Root Guard on the ports not being used as trunk lines. This keeps ports in their assigned roles. If one of these ports receives a BPDU frame, a sys error is logged and that port is blocked, thwarting the attacker&#39;s attempt to change the root bridge.</p><h3 id="mac-spoofing-08-59-10-55" tabindex="-1"><a class="header-anchor" href="#mac-spoofing-08-59-10-55"><span>MAC Spoofing 08:59-10:55</span></a></h3><p>The last common switch attack to discuss is known as MAC spoofing. MAC spoofing is the process of sending out data from a computer using a MAC address that&#39;s different from the MAC address physically hard-coded on a network interface card, or NIC. Although you can&#39;t physically change your MAC address, there are tools like Windows Network and Sharing Center in Control Panel, SMAC for Windows, and others that can make an operating system believe that the NIC has a different MAC address. There are several reasons attackers may use this method to attack a network, such as to defeat switch port security.</p><p>For example, in some networks, part of a switch&#39;s security is the creation of a whitelist of MAC addresses. Only devices with a MAC address in the whitelist can be processed through that switch. If an attacker can use a network sniffer to find a MAC address that&#39;s being used by a legitimate host attached to the switch, he or she can change their MAC address to a valid one on the whitelist. Then they&#39;ve successfully gained access to the switch and any data being transmitted through it.</p><p>An attacker could use MAC spoofing to change their MAC address to mimic a targeted system as well. For example, once an attacker has assumed a valid computer&#39;s MAC address, he or she could send the switch a MAC update command, changing the MAC address table. Now, the switch sends any data that was destined for the target system to the attacker&#39;s system. The important thing to know here is that since it&#39;s controlled on the attacker&#39;s computer, there really isn&#39;t a way to prevent MAC spoofing. If this becomes an issue, you&#39;ll need to use techniques at the Application level of the OSI model.</p><p>As we end this lesson, you&#39;ve probably noticed that for any of these attacks to work, the attacker must have physical network access. So physical security is a must! One thing to keep in mind is that for every offense, there&#39;s a defense. Administrators can make configuration settings that help to avoid some of these attacks or, at least, notify them something strange is going on.</p><h3 id="summary-10-55-11-16" tabindex="-1"><a class="header-anchor" href="#summary-10-55-11-16"><span>Summary 10:55-11:16</span></a></h3><p>That&#39;s it for this lesson. In this lesson, we examined several methods attackers utilize to exploit switch configuration weaknesses, such as the ones shown here. With each of these attacks, one of the primary goals is to collect information that can be used to exploit vulnerabilities at a later time.</p><h2 id="_5-11-5-use-smac-to-spoof-mac-addresses" tabindex="-1"><a class="header-anchor" href="#_5-11-5-use-smac-to-spoof-mac-addresses"><span>5.11.5 Use SMAC to Spoof MAC Addresses</span></a></h2><h3 id="use-smac-to-spoof-mac-00-00-00-45" tabindex="-1"><a class="header-anchor" href="#use-smac-to-spoof-mac-00-00-00-45"><span>Use SMAC to Spoof MAC 00:00-00:45</span></a></h3><p>There may be times you want to change the MAC address on a network interface or device. Changing the assigned address might allow you to bypass the access control lists on servers or routers on a network. It also allows a device to pretend to be a different device. MAC spoofing can help you do these things.</p><p>MAC spoofing is a technique for changing the factory-assigned Media Access Control address of a network interface on a networked device. We know that the MAC address is hard-coded on a network interface controller, and typically, you can&#39;t change it. However, there are tools that can make an operating system believe that the NIC has a different MAC. In this demo, we&#39;re going to use a tool to do just that.</p><h3 id="get-smac-running-00-45-01-14" tabindex="-1"><a class="header-anchor" href="#get-smac-running-00-45-01-14"><span>Get SMAC Running 00:45-01:14</span></a></h3><p>We&#39;re going to spoof addresses with the help of a program called SMAC. I&#39;ve already downloaded SMAC onto this Windows 10 system. It installs like most other Window programs. You do have to run the program as an administrator, since it has to have access to the system&#39;s registry. That&#39;s probably the only special instruction you need to get it going. So, to open, I&#39;ll right-click and select Run as administrator. I&#39;ll say Yes to the User Account Control. I don&#39;t have a registered version, so I&#39;ll just click Proceed to get stared.</p><h3 id="use-smac-01-14-02-20" tabindex="-1"><a class="header-anchor" href="#use-smac-01-14-02-20"><span>Use SMAC 01:14-02:20</span></a></h3><p>All right. The program is running. This main window shows me the active network interfaces. Over to the right, I can see the IP and the associated MAC address for each NIC. I only have one NIC in this system. It&#39;s selected by default. Down here, I can enter a spoofed MAC address. I can do this manually, or I can come over here and select Random.</p><p>Another thing I can do is go over to MAC List. When I do that, I get a list of MAC addresses that are in a list. Why is that handy? Well, let&#39;s say you&#39;re only allowed to connect to a network based on a certain MAC address, and you suddenly have a different system that you want to use to connect. You can get the MAC from the old system and spoof it on the new system.</p><p>Here&#39;s an example of misusing MAC spoofing: one of the subject matter experts for this course worked for a school system. Students often violated the acceptable use agreement for the school&#39;s network. As a solution, our expert banned their MAC addresses from obtaining IP addresses. The very tech-savvy students figured this out and spoofed their MAC addresses to get around this barrier and get an IP from the DHCP server.</p><h3 id="change-the-mac-02-20-03-11" tabindex="-1"><a class="header-anchor" href="#change-the-mac-02-20-03-11"><span>Change the MAC 02:20-03:11</span></a></h3><p>Anyway, over here, I can pick a manufacturer to use for the spoofed MAC. Why would I do that? Well, as you&#39;ve learned in other courses, the first half of a MAC address is assigned by the manufacturer. So, if I&#39;m spoofing on a network with all Dell computers, an address with a 3COM MAC address might stick out a bit. It&#39;s just another option to consider.</p><p>Okay. I&#39;m just going to pick Random from over here and use that MAC address. Now, I&#39;ll go up here and pick Update MAC. When I do, I get a dialog box that says it can only change the MAC to this address because this is an evaluation copy of the program. If it was a full version, I wouldn&#39;t see this. I&#39;ll select No for now.</p><p>At this point, you would typically disable the NIC, change the MAC address, and then enable the NIC. When you&#39;re done, you can remove the spoofed MAC by clicking the Remove MAC button.</p><h3 id="verify-the-new-mac-03-11-03-25" tabindex="-1"><a class="header-anchor" href="#verify-the-new-mac-03-11-03-25"><span>Verify the New MAC 03:11-03:25</span></a></h3><p>When that&#39;s done, you can check your settings by clicking IPConfig. When you do, you essentially get the same information you would get from doing an IPConfig from the command prompt. Here, you can see the IP address, and also the physical, or MAC, address for this device.</p><h3 id="summary-03-25-03-46" tabindex="-1"><a class="header-anchor" href="#summary-03-25-03-46"><span>Summary 03:25-03:46</span></a></h3><p>That&#39;s it for this demo. In this demo, we discussed what MAC spoofing is, and we talked about a few of its uses. Then we used SMAC to change our MAC address on a Windows 10 system. Finally, we looked at IPConfig to verify the MAC address and the rest of the IP address configuration.</p><h2 id="_5-11-7-switch-attack-facts" tabindex="-1"><a class="header-anchor" href="#_5-11-7-switch-attack-facts"><span>5.11.7 Switch Attack Facts</span></a></h2><p>This lesson covers common switch attacks.</p><h3 id="common-switch-attacks" tabindex="-1"><a class="header-anchor" href="#common-switch-attacks"><span>Common Switch Attacks</span></a></h3><p>The following table describes common attacks that are perpetrated against switches.</p>',69),e("table",null,[e("thead",null,[e("tr",null,[e("th",{class_:"firstTableHeader",scope:"col",class:"fw-bold"}," Attack "),e("th",{scope:"col",class:"fw-bold"}," Description ")])]),e("tbody",null,[e("tr",null,[e("td",null," MAC flooding "),e("td",null,[e("i",{class:"fs-italicize"}," MAC flooding "),t(" overloads the switch's MAC forwarding table to make the switch function like a hub. MAC flooding is performed using the following method: "),e("ol",null,[e("li",null," The attacker floods the switch with packets, each containing a different source MAC address. "),e("li",null,[t(" The flood of packets fills up the forwarding table and consumes so much of the memory in the switch that it causes the switch to enter a state called "),e("i",{class:"fs-italicize"}," fail open mode "),t(" . In fail open mode, all incoming packets are broadcast out to all ports (as with a hub), instead of to the designated port (as a switch normally does). ")]),e("li",null," The attacker then captures all the traffic with a protocol analyzer/sniffer. ")])])]),e("tr",null,[e("td",null," ARP spoofing/poisoning "),e("td",null,[e("i",{class:"fs-italicize"}," ARP spoofing/poisoning "),t(" associates the attacker's MAC address with the IP address of victim's device. "),e("ul",null,[e("li",null," When computers send an ARP request for the MAC address of a known IP address, the attacker's system responds with its MAC address. "),e("li",null," The source device sends frames to the attacker's MAC address instead of the correct device. "),e("li",null," Switches are indirectly involved in the attack because they do not verify the MAC address/IP address association. "),e("li",null," A default gateway is a prime target because local traffic goes through a default gateway to get to non-local destinations such as the internet. "),e("li",null," When the attacker's system MAC address receives packets intended for the default gateway, the attacker can: "),e("ul",null,[e("li",null,[t(" Forward the packets to the actual default gateway ( "),e("i",{class:"fs-italicize"}," passive sniffing "),t(" ). ")]),e("li",null,[t(" Modify data in the packets before forwarding it ( "),e("i",{class:"fs-italicize"}," man-in-the-middle) "),t(" . ")])])])])]),e("tr",null,[e("td",null," MAC spoofing "),e("td",null,[e("i",{class:"fs-italicize"}," MAC spoofing "),t(" is changing the source MAC address on frames. The attacker's system sends frames with the spoofed MAC address. The switch reads the source address contained in the frames and associates the MAC address with the port where the attacker is connected. MAC spoofing can be used to: "),e("ul",null,[e("li",null," Bypass 802.1x port-based security. "),e("li",null," Bypass wireless MAC filtering. "),e("li",null," Hide the identity of the attacker's computer or to impersonate another device on the network. "),e("li",null," Impersonate a device on the network to capture frames addressed to that device. "),e("li",null," Impersonate a valid device on the network to gain network access. For example, to gain access when the switch is using the MAC address to allow or deny a network connection. ")])])]),e("tr",null,[e("td",null,[t(" Dynamic Trunking Protocol "),e("br"),t(" (DTP) ")]),e("td",null," Switches have the ability to automatically detect trunk ports and negotiate the trunking protocol used between devices. The Dynamic Trunking Protocol is not secure and allows unauthorized devices to possibly modify configuration information. You should disable the DTP services on the switch's end user (access) ports before implementing the switch configuration into the network. ")])])],-1),a('<h2 id="_5-11-8-hardening-a-switch" tabindex="-1"><a class="header-anchor" href="#_5-11-8-hardening-a-switch"><span>5.11.8 Hardening a Switch</span></a></h2><h3 id="hardening-a-switch-00-00-00-27" tabindex="-1"><a class="header-anchor" href="#hardening-a-switch-00-00-00-27"><span>Hardening a Switch 00:00-00:27</span></a></h3><p>In this demonstration we&#39;ll look at various methods to harden a managed switch. In this case we&#39;re using a Cisco Small Business Managed Switch and are logged into the management interface using Internet Explorer. We&#39;re authenticated as the Admin User so we can make changes. In this demonstration we&#39;ll look at port security, management access, and access control using access control lists, ACLs.</p><h3 id="configure-port-settings-00-27-02-07" tabindex="-1"><a class="header-anchor" href="#configure-port-settings-00-27-02-07"><span>Configure Port Settings 00:27-02:07</span></a></h3><p>To begin, let&#39;s look at port security. When hardening a switch, one of the first things we want to do is shut down any unused ports. Click on Configure Port Settings, which will take us directly to the Port Settings page under Port Management.</p><p>On this page we can select one of the unused ports. You&#39;ll notice we have several ports here that are either down and unused, or up and used. The ones that are unused are currently down. We want to make sure they&#39;re administratively down, meaning they have to be turned on before they can be used. Let&#39;s take a look at Port Two. It&#39;s down.</p><p>Let&#39;s scroll to the bottom of the page and click Edit. On this page you&#39;ll notice that the Administrative Status of this port is actually up, even though it&#39;s operationally down. This means there&#39;s nothing plugged into it. To make sure that this port remains down and is not used without permission, we&#39;ll set the Administrative Status as Down. Click Apply, Close.</p><p>To set all other unused ports as Administratively Down, we&#39;ll select Port Two then click Copy Settings. In the Copy Settings window we can list all the ports that we want to be down. In this case, we&#39;ll type Three, Six, and Eight through 28. Go ahead and click Apply. All of those ports are now administratively down.</p><p>Let&#39;s look at Port Three for confirmation. Select Port Three and click Edit. You&#39;ll notice on this page that the status Administratively Down. So, the status that we copied from Port Two went to the rest of the ports. Click Close.</p><p>By setting the ports that we&#39;re not using to Administratively Down, those ports will come up at a down state each time the switch starts up. At the end we&#39;ll make sure that we save our Configuration File to the Startup Configuration.</p><h3 id="enable-port-security-02-07-04-13" tabindex="-1"><a class="header-anchor" href="#enable-port-security-02-07-04-13"><span>Enable Port Security 02:07-04:13</span></a></h3><p>Next, we also want to enable port security. To do that, we&#39;ll open the Security Tab and click on Port Security. Under this tab we can configure locking mechanism for each of these ports. We&#39;ll click on Port One and select Edit.</p><p>On this page you&#39;ll notice that we can lock the port, meaning we&#39;re going to only allow certain MAC addresses to pass traffic through this port. A Classic Lock means that the first device you connect to that port will be remembered and allowed to pass traffic through this port. You can also select Limited Dynamic Lock, which gives you a variable number from one to 256. Let&#39;s change this to four.</p><p>Now, if you connect a hub to a specific port on the switch and connect four devices to that, you can allow all four of those devices to talk through that port. No additional devices would be allowed to pass traffic.</p><p>We&#39;ll go ahead and select the Classic Lock. That will give us one device, and the device will be locked in. If you try to connect a device that is not supposed to be on that port, the Action on Violation determines what happens. The default is to discard the packet. If you connect any other device to the port, the traffic will be ignored.</p><p>You can also forward the traffic, or you can shut down the port. That&#39;s a little drastic for our purposes. However, if you&#39;re extremely cautious about your security and you don&#39;t want anybody connecting a device you don&#39;t know about, being able to shut down the port is one of the most secure things that you can do.</p><p>We&#39;ll go ahead and select Discard if it&#39;s a device that we aren&#39;t sure about. If somebody plugs in a device that&#39;s not locked in you can also trap the MAC addresses of the offending device. We&#39;ve enabled locking for Port One, as well as the classic lock. We&#39;re going to discard the frames of any other devices that come onto that port. We&#39;ll go ahead and click Apply, Close.</p><p>Once again, we can take the settings that we&#39;ve created for Port One and apply them to the rest of the ports. Scroll down to the bottom and select Copy Settings. In this case, we&#39;ll select all of the ports, or Two through 28, and click Apply. You&#39;ll see that the settings that we&#39;ve created for port security now apply to all 28 ports.</p><h3 id="management-access-04-13-06-17" tabindex="-1"><a class="header-anchor" href="#management-access-04-13-06-17"><span>Management Access 04:13-06:17</span></a></h3><p>The next piece that we would like to cover is management access. We&#39;ll go to Management Access Method and click Access Profiles. In this case, the only profile that&#39;s on the machine is the Console Profile, which is the default.</p><p>We&#39;re going to add a new access profile, so click Add. We&#39;ll call this access profile Management. In this Management Profile the very first rule, or Rule One that we want to have will deny all management. We&#39;ll go ahead and select Deny and specify all different management methods, and apply it to all interfaces. That will be our first and main rule. We&#39;ll go ahead and click Apply, Close.</p><p>Now that we&#39;ve created our Management Profile, we can select Profile Rules. It can seem a little confusing that you create a Management Profile then add a rule to it. We&#39;ll go ahead and select our Management Profile, and add another rule. It looks very similar to the page we just used.</p><p>For Rule Number Two, we want to allow HTTP access. We want to select all interfaces, but we also only want to allow traffic from a specific workstation or IP address. We&#39;ll specify that 192.168.1.200 will be the only workstation allowed to access this port. We&#39;ll also input the network mask by typing 255.255.255.0. Alternatively, we can use the prefix length and use the prefix instead. We&#39;ll go ahead and click Apply, Close.</p><p>We now have a management access rule that denies all traffic, and one access rule which allows us to access the HTTP interface from one specific workstation. But, we&#39;re not done yet.</p><p>We need to go back to Access Profiles and set the Active Profile. Right now, we don&#39;t have an active management profile. Go ahead and select Management. This denies all types of management interfaces with this switch, except for the HTTP access from the one workstation that we have selected.</p><p>We&#39;re not going to click Apply this time. If we do, we&#39;ll probably be locked out of the switch, and we want to make sure that we have access to complete this demo.</p><h3 id="firmware-updates-06-17-07-01" tabindex="-1"><a class="header-anchor" href="#firmware-updates-06-17-07-01"><span>Firmware Updates 06:17-07:01</span></a></h3><p>Let&#39;s go to the next section, and look at firmware updates. Under Administration, File Management we can select Upgrade, Backup Firmware. Part of hardening the device or a computer of any kind is to make sure you have the latest software and patches. You can use browse to select the latest firmware and download it.</p><p>In this particular switch, you have to select the Active Image once you&#39;ve loaded the firmware. You can select Image One or the new image, Image Two, and apply it. Next you&#39;ll need to reboot the switch. Once you do that the switch will come back with the latest and greatest software and the best enhancements. This allows you to have the best possible security for this switch. Upgrading firmware for the switch as well as applying patches to any computer is a key element to hardening the switch.</p><h3 id="access-control-using-acls-07-01-10-23" tabindex="-1"><a class="header-anchor" href="#access-control-using-acls-07-01-10-23"><span>Access Control using ACLs 07:01-10:23</span></a></h3><p>The last aspect of hardening the switch is access control using the ACLs. Let&#39;s select Access Control. On this switch, we have various methods of access control. We can use a MAC based ACL. We can use an IPV4 based ACL. And we can also use an IPV6 based ACL. We&#39;ll set up a MAC based ACL.</p><p>In this case, we don&#39;t have an access control list, so we&#39;ll go ahead and create one. We want to make sure that nobody can attach game consoles or connect any game to our switch. Type Games as the name of our ACL. Click Apply, Close.</p><p>We have the ACL, but to put access control entries, ACE, into this access control list, we need to click the MAC Based ACE Table. It has a slightly different interface, but let&#39;s click Add to add an entry to this page.</p><p>For our first access control entry, Entry One, we&#39;re going to select Deny. We&#39;ll select Any for the Destination MAC address. Under Source MAC Address, we&#39;re going to select User Defined and put in the address, one of the game consoles, or the prefix of the MAC address, which is used for all devices of the same manufacturer. We&#39;ll go ahead and enter 00041F followed by six ones. Under Source MAC Wildcard Mask we&#39;ll enter six zeroes followed by six ones.</p><p>This says that we only care about the first six digits of the MAC Address. This is preventing any device from the same manufacturer from being connected. We&#39;ll go ahead and click Apply.</p><p>That creates our first entry into the Access Control List Entry Table. We&#39;ll add one more just for demonstration purposes. We&#39;ll go ahead and create Priority Two.</p><p>Once again, we&#39;re going to select Deny, and specify the Destination MAC Address as Any. We&#39;re going to specify the Source MAC Address value as 005042 followed by six ones. We&#39;ll do the same Source MAC Wildcard Mask, or six zeroes followed by six ones. Click Apply, Close to create our access control entries.</p><p>We could add more for any of the game console types that are out there, or any other device that we want to prohibit from using our network.</p><p>We can also add anything we want to allow on the network. Now that we&#39;ve created the MAC Based ACL Table, and have created the entries in that table, we need to make sure that the ports have a binding to that table. We&#39;ll go ahead and click on ACL Binding. Select Port One, scroll down, and click Edit. We want to apply this MAC based ACL, so we&#39;ll select that and then select Games, which we just created. If there were additional ones, we could choose from them as well. We&#39;ll go ahead and click Apply, Close.</p><p>Just as we&#39;ve done in the previous portions of this demonstration, we&#39;ll select Port One. The GE One interface, and click on Copy Settings. We&#39;ll enter two through 28 and click Apply. That gave us a successful binding of the Games ACL to all of the ports in our interface.</p><p>One final thing that you will always want to do when you&#39;ve made configuration changes to your switch is to save the Running Configuration to the Startup Configuration. On this switch, simply click Save at the top. It will blink when there have been changes. Select Running Configuration as the Source File Name. And set the Destination File Name as Startup Configuration, then click Apply.</p><h3 id="summary-10-23-10-39" tabindex="-1"><a class="header-anchor" href="#summary-10-23-10-39"><span>Summary 10:23-10:39</span></a></h3><p>In this demonstration we&#39;ve examined the idea of port security. We&#39;ve looked at management access to our switch. And we&#39;ve also looked at restricting certain traffic to the switch using ACLs.</p>',43)]))}const d=i(r,[["render",c],["__file","05.11.SwitchSecurityAndAttacks.html.vue"]]),u=JSON.parse('{"path":"/05/05.11.SwitchSecurityAndAttacks.html","title":"Section 5.11 Switch Security and Attacks","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"Section 5.11 Switch Security and Attacks","description":"some description"},"headers":[{"level":2,"title":"5.11.1 Switch Features","slug":"_5-11-1-switch-features","link":"#_5-11-1-switch-features","children":[{"level":3,"title":"Switch Features 00:00-00:38","slug":"switch-features-00-00-00-38","link":"#switch-features-00-00-00-38","children":[]},{"level":3,"title":"How a Switch Works 00:38-02:05","slug":"how-a-switch-works-00-38-02-05","link":"#how-a-switch-works-00-38-02-05","children":[]},{"level":3,"title":"Unmanaged vs. Managed Switches 02:05-03:29","slug":"unmanaged-vs-managed-switches-02-05-03-29","link":"#unmanaged-vs-managed-switches-02-05-03-29","children":[]},{"level":3,"title":"Switch Aggregation 03:29-04:35","slug":"switch-aggregation-03-29-04-35","link":"#switch-aggregation-03-29-04-35","children":[]},{"level":3,"title":"Layer 2 vs. Layer 3 04:35-05:40","slug":"layer-2-vs-layer-3-04-35-05-40","link":"#layer-2-vs-layer-3-04-35-05-40","children":[]},{"level":3,"title":"Switch Security Issues 05:40-06:10","slug":"switch-security-issues-05-40-06-10","link":"#switch-security-issues-05-40-06-10","children":[]},{"level":3,"title":"MAC Flooding 06:10-06:52","slug":"mac-flooding-06-10-06-52","link":"#mac-flooding-06-10-06-52","children":[]},{"level":3,"title":"Switch Spoofing 06:52-08:09","slug":"switch-spoofing-06-52-08-09","link":"#switch-spoofing-06-52-08-09","children":[]},{"level":3,"title":"ARP Poisoning 08:09-09:08","slug":"arp-poisoning-08-09-09-08","link":"#arp-poisoning-08-09-09-08","children":[]},{"level":3,"title":"Summary 09:08-09:31","slug":"summary-09-08-09-31","link":"#summary-09-08-09-31","children":[]}]},{"level":2,"title":"5.11.2 Securing Network Switches","slug":"_5-11-2-securing-network-switches","link":"#_5-11-2-securing-network-switches","children":[{"level":3,"title":"Secure Network Switches 00:00-00:22","slug":"secure-network-switches-00-00-00-22","link":"#secure-network-switches-00-00-00-22","children":[]},{"level":3,"title":"Best Practices 00:22-01:27","slug":"best-practices-00-22-01-27","link":"#best-practices-00-22-01-27","children":[]},{"level":3,"title":"Port Security 01:27-02:04","slug":"port-security-01-27-02-04","link":"#port-security-01-27-02-04","children":[]},{"level":3,"title":"Limit Devices per Port 02:04-02:33","slug":"limit-devices-per-port-02-04-02-33","link":"#limit-devices-per-port-02-04-02-33","children":[]},{"level":3,"title":"Secure with MAC address 02:33-03:12","slug":"secure-with-mac-address-02-33-03-12","link":"#secure-with-mac-address-02-33-03-12","children":[]},{"level":3,"title":"Port Security Violations 03:12-03:49","slug":"port-security-violations-03-12-03-49","link":"#port-security-violations-03-12-03-49","children":[]},{"level":3,"title":"Additional Security Concerns 03:49-04:04","slug":"additional-security-concerns-03-49-04-04","link":"#additional-security-concerns-03-49-04-04","children":[]},{"level":3,"title":"DHCP Snooping 04:04-05:28","slug":"dhcp-snooping-04-04-05-28","link":"#dhcp-snooping-04-04-05-28","children":[]},{"level":3,"title":"Dynamic ARP Inspection 05:28-07:04","slug":"dynamic-arp-inspection-05-28-07-04","link":"#dynamic-arp-inspection-05-28-07-04","children":[]},{"level":3,"title":"Summary 07:04-07:29","slug":"summary-07-04-07-29","link":"#summary-07-04-07-29","children":[]}]},{"level":2,"title":"5.11.3 Switch Security Facts","slug":"_5-11-3-switch-security-facts","link":"#_5-11-3-switch-security-facts","children":[{"level":3,"title":"Security Switch Features","slug":"security-switch-features","link":"#security-switch-features","children":[]},{"level":3,"title":"Implement Switch Security","slug":"implement-switch-security","link":"#implement-switch-security","children":[]},{"level":3,"title":"Spanning Tree Protocol","slug":"spanning-tree-protocol","link":"#spanning-tree-protocol","children":[]}]},{"level":2,"title":"5.11.4 Switch Attacks","slug":"_5-11-4-switch-attacks","link":"#_5-11-4-switch-attacks","children":[{"level":3,"title":"Switch Attacks 00:00-00:31","slug":"switch-attacks-00-00-00-31","link":"#switch-attacks-00-00-00-31","children":[]},{"level":3,"title":"Common Switch Attacks 00:31-00:47","slug":"common-switch-attacks-00-31-00-47","link":"#common-switch-attacks-00-31-00-47","children":[]},{"level":3,"title":"MAC Flooding 00:47-02:05","slug":"mac-flooding-00-47-02-05","link":"#mac-flooding-00-47-02-05","children":[]},{"level":3,"title":"ARP Spoofing 02:05-03:00","slug":"arp-spoofing-02-05-03-00","link":"#arp-spoofing-02-05-03-00","children":[]},{"level":3,"title":"VLAN Hopping 03:00-03:26","slug":"vlan-hopping-03-00-03-26","link":"#vlan-hopping-03-00-03-26","children":[]},{"level":3,"title":"VLAN Spoofing 03:26-05:11","slug":"vlan-spoofing-03-26-05-11","link":"#vlan-spoofing-03-26-05-11","children":[]},{"level":3,"title":"Double Tagging 05:11-06:40","slug":"double-tagging-05-11-06-40","link":"#double-tagging-05-11-06-40","children":[]},{"level":3,"title":"STP Manipulation 06:40-08:59","slug":"stp-manipulation-06-40-08-59","link":"#stp-manipulation-06-40-08-59","children":[]},{"level":3,"title":"MAC Spoofing 08:59-10:55","slug":"mac-spoofing-08-59-10-55","link":"#mac-spoofing-08-59-10-55","children":[]},{"level":3,"title":"Summary 10:55-11:16","slug":"summary-10-55-11-16","link":"#summary-10-55-11-16","children":[]}]},{"level":2,"title":"5.11.5 Use SMAC to Spoof MAC Addresses","slug":"_5-11-5-use-smac-to-spoof-mac-addresses","link":"#_5-11-5-use-smac-to-spoof-mac-addresses","children":[{"level":3,"title":"Use SMAC to Spoof MAC 00:00-00:45","slug":"use-smac-to-spoof-mac-00-00-00-45","link":"#use-smac-to-spoof-mac-00-00-00-45","children":[]},{"level":3,"title":"Get SMAC Running 00:45-01:14","slug":"get-smac-running-00-45-01-14","link":"#get-smac-running-00-45-01-14","children":[]},{"level":3,"title":"Use SMAC 01:14-02:20","slug":"use-smac-01-14-02-20","link":"#use-smac-01-14-02-20","children":[]},{"level":3,"title":"Change the MAC 02:20-03:11","slug":"change-the-mac-02-20-03-11","link":"#change-the-mac-02-20-03-11","children":[]},{"level":3,"title":"Verify the New MAC 03:11-03:25","slug":"verify-the-new-mac-03-11-03-25","link":"#verify-the-new-mac-03-11-03-25","children":[]},{"level":3,"title":"Summary 03:25-03:46","slug":"summary-03-25-03-46","link":"#summary-03-25-03-46","children":[]}]},{"level":2,"title":"5.11.7 Switch Attack Facts","slug":"_5-11-7-switch-attack-facts","link":"#_5-11-7-switch-attack-facts","children":[{"level":3,"title":"Common Switch Attacks","slug":"common-switch-attacks","link":"#common-switch-attacks","children":[]}]},{"level":2,"title":"5.11.8 Hardening a Switch","slug":"_5-11-8-hardening-a-switch","link":"#_5-11-8-hardening-a-switch","children":[{"level":3,"title":"Hardening a Switch 00:00-00:27","slug":"hardening-a-switch-00-00-00-27","link":"#hardening-a-switch-00-00-00-27","children":[]},{"level":3,"title":"Configure Port Settings 00:27-02:07","slug":"configure-port-settings-00-27-02-07","link":"#configure-port-settings-00-27-02-07","children":[]},{"level":3,"title":"Enable Port Security 02:07-04:13","slug":"enable-port-security-02-07-04-13","link":"#enable-port-security-02-07-04-13","children":[]},{"level":3,"title":"Management Access 04:13-06:17","slug":"management-access-04-13-06-17","link":"#management-access-04-13-06-17","children":[]},{"level":3,"title":"Firmware Updates 06:17-07:01","slug":"firmware-updates-06-17-07-01","link":"#firmware-updates-06-17-07-01","children":[]},{"level":3,"title":"Access Control using ACLs 07:01-10:23","slug":"access-control-using-acls-07-01-10-23","link":"#access-control-using-acls-07-01-10-23","children":[]},{"level":3,"title":"Summary 10:23-10:39","slug":"summary-10-23-10-39","link":"#summary-10-23-10-39","children":[]}]}],"git":{"updatedTime":1735529086000},"filePathRelative":"05/05.11.SwitchSecurityAndAttacks.md"}');export{d as comp,u as data};
